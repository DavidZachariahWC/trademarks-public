<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trademark Case Details</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .case-details {
            margin: 20px 0;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .section h2 {
            margin-top: 0;
            color: #333;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #007bff;
            text-decoration: none;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
        
        .label {
            font-weight: bold;
            color: #666;
        }
        
        .attorney-link {
            color: #007bff;
            text-decoration: none;
            cursor: pointer;
        }
        
        .attorney-link:hover {
            text-decoration: underline;
        }
        
        .subsection {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .subsection h3 {
            margin: 0 0 15px 0;
            color: #444;
            font-size: 1.2em;
        }
        
        .basis-group {
            margin-bottom: 20px;
            padding-left: 15px;
        }
        
        .basis-group h4 {
            margin: 0 0 10px 0;
            color: #666;
            font-size: 1.1em;
        }
        
        .basis-group p {
            margin: 5px 0;
        }
        
        .classification-legend {
            background-color: #f8f9fa;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
            border-radius: 4px;
        }
        
        .classification-legend p {
            margin: 0 0 10px 0;
        }
        
        .classification-legend ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .classification-legend li {
            margin: 5px 0;
        }
        
        .classification-legend code {
            background-color: #e9ecef;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
        
        .primary-badge {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 6px;
            font-size: 0.8em;
            background-color: #28a745;
            color: white;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .classifications-table {
            margin-top: 20px;
            overflow-x: auto;
        }
        
        .classifications-table table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }
        
        .classifications-table th,
        .classifications-table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        
        .classifications-table th {
            background-color: #f8f9fa;
            font-weight: bold;
            color: #333;
        }
        
        .classifications-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .classifications-table tr:hover {
            background-color: #f0f0f0;
        }
        
        .disclaimer-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .disclaimer-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .mark-design-info h3 {
            margin: 20px 0 10px 0;
            font-size: 1.1em;
            color: #444;
        }
        
        .mark-descriptions, .design-codes {
            margin-top: 15px;
        }
        
        .owners-list {
            margin-top: 15px;
        }
        
        .owner-item {
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .owner-item:last-child {
            margin-bottom: 0;
        }
        
        .address-block {
            margin-left: 20px;
            margin-top: 5px;
        }
        
        .address-block p {
            margin: 3px 0;
            line-height: 1.4;
        }
        
        .owner-divider {
            margin: 20px 0;
            border: 0;
            border-top: 1px solid #ddd;
        }
        
        .owner-item .label {
            display: inline-block;
            min-width: 100px;
            color: #666;
        }
        
        .nationality-info {
            margin-top: 10px;
        }
        
        .nationality-info .label {
            display: inline-block;
            min-width: 100px;
            color: #666;
            cursor: help;
        }
        
        .nationality-info p {
            margin: 5px 0;
        }
        
        .dba-text {
            color: #0056b3;
            font-weight: 500;
        }
        
        .owner-item .label[title] {
            cursor: help;
            border-bottom: 1px dotted #666;
        }
        
        .composed-text,
        .name-change-text {
            color: #2c5282;
            font-style: italic;
        }
        
        .foreign-filing-dates {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        
        .foreign-filing-dates h3 {
            margin: 0 0 15px 0;
            font-size: 1.1em;
            color: #444;
        }
        
        .foreign-filing-entry {
            margin-bottom: 10px;
        }
        
        .foreign-filing-divider {
            margin: 15px 0;
            border: 0;
            border-top: 1px solid #ddd;
        }
        
        .goods-services-statements {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        
        .statement-block {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .statement-block:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .statement-block h4 {
            color: #495057;
            margin-bottom: 8px;
        }
        
        .statement-block p {
            margin: 0;
            white-space: pre-wrap;
        }
        
        .international-reg-info {
            margin-top: 15px;
        }
        
        .int-reg-block {
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .int-reg-block:last-child {
            margin-bottom: 0;
        }
        
        .int-reg-divider {
            margin: 20px 0;
            border: 0;
            border-top: 1px solid #ddd;
        }
        
        .status-indicator {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        .status-yes {
            background-color: #28a745;
            color: white;
        }
        
        .status-no {
            background-color: #dc3545;
            color: white;
        }
        
        .drawing-code-desc {
            color: #666;
            font-style: italic;
            margin-left: 5px;
        }
        
        .drawing-type-note {
            margin-top: 5px;
            font-size: 0.9em;
            color: #666;
        }
        
        .filing-date-box {
            display: inline-block;
            margin-left: 10px;
            padding: 2px 8px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <a href="/" class="back-link">‚Üê Back to Search</a>
    
    <div class="case-details">
        <div class="section">
            <h2>{{ case.header.mark_identification }}</h2>
            <p><span class="label">Serial Number:</span> {{ case.serial_number }}</p>
            <p><span class="label">Registration Number:</span> {{ case.registration_number or 'N/A' }}</p>
            <p><span class="label">Status:</span> {{ case.header.status_code or 'N/A' }}</p>
            <p><span class="label">Filing Date:</span> {{ case.header.filing_date.strftime('%Y-%m-%d') if case.header.filing_date else 'N/A' }}</p>
            <p><span class="label">Registration Date:</span> {{ case.header.registration_date.strftime('%Y-%m-%d') if case.header.registration_date else 'N/A' }}</p>
            <p><span class="label">Date Cancelled:</span> {{ case.header.cancellation_date.strftime('%Y-%m-%d') if case.header.cancellation_date else 'N/A' }}</p>
            <p><span class="label">Attorney of Record:</span> 
                {% if case.header.attorney_name %}
                    {% for attorney in case.header.attorney_name.split(';') %}
                        <a href="javascript:void(0)" onclick="searchByAttorney('{{ attorney.strip() }}')" class="attorney-link">{{ attorney.strip() }}</a>
                        {%- if not loop.last %};{% endif %}
                    {% endfor %}
                {% else %}
                    N/A
                {% endif %}
            </p>
            <p><span class="label">Republished 12c Date:</span> {{ case.header.republished_12c_date.strftime('%Y-%m-%d') if case.header.republished_12c_date else 'N/A' }}</p>
            <p><span class="label">Section 8 Partial Accept:</span> {{ 'Yes' if case.header.section_8_partial_accept_in else 'No' }}</p>
            <p><span class="label">Section 8 Accepted:</span> {{ 'Yes' if case.header.section_8_accepted_in else 'No' }}</p>
            <p><span class="label">Section 15 Filed:</span> {{ 'Yes' if case.header.section_15_filed_in else 'No' }}</p>
            <p><span class="label">Section 15 Acknowledged:</span> {{ 'Yes' if case.header.section_15_acknowledged_in else 'No' }}</p>
            <p><span class="label">Changed Registration:</span> {{ 'Yes' if case.header.change_registration_in else 'No' }}</p>
            <p><span class="label">Concurrent Use:</span> {{ 'Yes' if case.header.concurrent_use_in else 'No' }}</p>
            <p><span class="label">Concurrent Use Proceeding Pending:</span> {{ 'Yes' if case.header.concurrent_use_proceeding_in else 'No' }}</p>
            <p><span class="label">Published for Concurrent Use:</span> {{ 'Yes' if case.header.published_concurrent_in else 'No' }}</p>
            
            <div class="subsection">
                <h3>Filing Basis Information</h3>
                
                <div class="basis-group">
                    <h4>Foreign Priority Claim (44(d))</h4>
                    <p><span class="label">Filed as 44(d):</span> {{ 'Yes' if case.header.filing_basis_filed_as_44d_in else 'No' }}</p>
                    <p><span class="label">Amended to 44(d):</span> {{ 'Yes' if case.header.amended_to_44d_application_in else 'No' }}</p>
                    <p><span class="label">Currently 44(d):</span> {{ 'Yes' if case.header.filing_basis_current_44d_in else 'No' }}</p>
                </div>

                <div class="basis-group">
                    <h4>Foreign Registration (44(e))</h4>
                    <p><span class="label">Filed as 44(e):</span> {{ 'Yes' if case.header.filing_basis_filed_as_44e_in else 'No' }}</p>
                    <p><span class="label">Amended to 44(e):</span> {{ 'Yes' if case.header.amended_to_44e_application_in else 'No' }}</p>
                    <p><span class="label">Currently 44(e):</span> {{ 'Yes' if case.header.filing_basis_current_44e_in else 'No' }}</p>
                </div>

                <div class="basis-group">
                    <h4>Extension of Protection (66(a))</h4>
                    <p><span class="label">Filed as 66(a):</span> {{ 'Yes' if case.header.filing_basis_filed_as_66a_in else 'No' }}</p>
                    <p><span class="label">Currently 66(a):</span> {{ 'Yes' if case.header.filing_basis_current_66a_in else 'No' }}</p>
                </div>

                <div class="basis-group">
                    <h4>Basis Issues</h4>
                    <p><span class="label">No Current Basis:</span> {{ 'Yes' if case.header.filing_current_no_basis_in else 'No' }}</p>
                    <p><span class="label">No Initial Basis:</span> {{ 'Yes' if case.header.without_basis_currently_in else 'No' }}</p>
                </div>
            </div>
        </div>

        {% if case.owners %}
        <div class="section">
            <h2>Owner Information</h2>
            <div class="owners-list">
            {% for owner in case.owners %}
            <div class="owner-item">
                <p><span class="label">Name:</span> {{ owner.party_name }}</p>
                <p><span class="label">Address:</span></p>
                <div class="address-block">
                    <p>{{ owner.owner_address_1 }}</p>
                    {% if owner.owner_address_2 %}
                        <p>{{ owner.owner_address_2 }}</p>
                    {% endif %}
                    <p>
                        {% if owner.city %}{{ owner.city }}{% endif %}
                        {% if owner.owner_state %}, {{ owner.owner_state }}{% endif %}
                        {% if owner.postcode %} {{ owner.postcode }}{% endif %}
                    </p>
                    {% if owner.owner_country %}
                        <p>{{ owner.owner_country }}</p>
                    {% endif %}
                </div>
                {% if owner.dba_aka_text %}
                    <p>
                        <span class="label" title="Doing Business As / Also Known As">DBA/AKA:</span>
                        <span class="dba-text">{{ owner.dba_aka_text }}</span>
                    </p>
                {% endif %}
                {% if owner.entity_statement %}
                    <p><span class="label">Entity Type:</span> {{ owner.entity_statement }}</p>
                {% endif %}
                {% if owner.composed_of_statement %}
                    <p>
                        <span class="label" title="Statement describing the composition of the entity">Composed Of:</span>
                        <span class="composed-text">{{ owner.composed_of_statement }}</span>
                    </p>
                {% endif %}
                {% if owner.name_change_explanation %}
                    <p>
                        <span class="label" title="Explanation of owner name change">Name Change:</span>
                        <span class="name-change-text">{{ owner.name_change_explanation }}</span>
                    </p>
                {% endif %}
                <div class="nationality-info">
                    <p>
                        <span class="label" title="Country and state of nationality">Nationality:</span>
                        {% if owner.nationality_country or owner.nationality_state %}
                            {% if owner.nationality_country %}{{ owner.nationality_country }}{% endif %}
                            {% if owner.nationality_state %}
                                {% if owner.nationality_country %}, {% endif %}
                                {{ owner.nationality_state }}
                            {% endif %}
                        {% else %}
                            N/A
                        {% endif %}
                    </p>
                    {% if owner.nationality_other %}
                    <p>
                        <span class="label" title="Additional nationality information">Other Nationality:</span>
                        {{ owner.nationality_other }}
                    </p>
                    {% endif %}
                </div>
                </p>
            </div>
            {% if not loop.last %}<hr class="owner-divider">{% endif %}
            {% endfor %}
            </div>
        </div>
        {% endif %}

        {% if case.classifications %}
        <div class="section">
            <h2>Classifications</h2>
            <div class="classification-legend">
                <p><strong>Note:</strong> The following symbols indicate amendments to goods/services:</p>
                <ul>
                    <li><code>[...]</code> - Deleted goods/services</li>
                    <li><code>((...))</code> - Goods/services not claimed in Section 15 affidavit of incontestability</li>
                    <li><code>*...*</code> - Additional (new) wording in goods/services</li>
                </ul>
            </div>
            
            <div class="classifications-table">
                <table>
                    <thead>
                        <tr>
                            <th>International Class</th>
                            <th>US Class</th>
                            <th>Status</th>
                            <th>Status Date</th>
                            <th>First Use Anywhere</th>
                            <th>First Use in Commerce</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for classification in case.classifications %}
                        <tr>
                            <td>
                                {{ classification.international_code }}
                                {% if classification.primary_code == classification.international_code %}
                                    <span class="primary-badge">Primary</span>
                                {% endif %}
                            </td>
                            <td>
                                {{ classification.us_code }}
                                {% if classification.primary_code == classification.us_code %}
                                    <span class="primary-badge">Primary</span>
                                {% endif %}
                            </td>
                            <td>{{ classification.classification_status_code }}</td>
                            <td>{{ classification.classification_status_date.strftime('%Y-%m-%d') if classification.classification_status_date else 'N/A' }}</td>
                            <td>{{ classification.first_use_anywhere_date.strftime('%Y-%m-%d') if classification.first_use_anywhere_date else 'N/A' }}</td>
                            <td>{{ classification.first_use_in_commerce_date.strftime('%Y-%m-%d') if classification.first_use_in_commerce_date else 'N/A' }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% endif %}

        <div class="goods-services-statements">
            <h3>Goods and Services Statements</h3>
            {% for statement in case.statements %}
                {% if statement.type_code.startswith('GS') %}
                    <div class="statement-block">
                        <h4>Type Code: {{ statement.type_code }}</h4>
                        <p>{{ statement.statement_text }}</p>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="section">
            <h2>Mark Design Information</h2>
            <div class="mark-design-info">
                <p><span class="label">Standard Character Claim:</span> {{ 'Yes' if case.header.standard_characters_claimed_in else 'No' }}</p>
                <p>
                    <span class="label">Mark Drawing Type:</span>
                    {% set first_digit = case.header.mark_drawing_code[0] if case.header.mark_drawing_code else None %}
                    {{ case.header.mark_drawing_code }}
                    {% if first_digit %}
                    <span class="drawing-code-desc">
                        ({% if first_digit == '0' %}Not yet assigned
                        {% elif first_digit == '1' %}Typeset word(s)/letter(s)/number(s)
                        {% elif first_digit == '2' %}Design without text
                        {% elif first_digit == '3' %}Design with text
                        {% elif first_digit == '4' %}Standard character mark
                        {% elif first_digit == '5' %}Stylized text with design
                        {% elif first_digit == '6' %}No drawing (e.g., sound)
                        {% endif %})
                    </span>
                    {% if first_digit == '4' %}
                    <div class="drawing-type-note">
                        <span class="note-text">Note: Type 4 marks represent "Block letter drawing" if filed before Nov 2, 2003, 
                        or "Standard Character Mark" if filed after.</span>
                        <span class="filing-date-box">This application filed: {{ case.header.filing_date.strftime('%B %d, %Y') }}</span>
                    </div>
                    {% endif %}
                    {% endif %}
                </p>
                
                {% if case.statements %}
                    <div class="mark-descriptions">
                        <h3>Description of Mark</h3>
                        {% for statement in case.statements %}
                            {% if statement.type_code == 'DM0000' %}
                                <p><span class="label">Text:</span> {{ statement.statement_text }}</p>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}

                {% if case.design_searches %}
                    <div class="design-codes">
                        <h3>Design Search Codes</h3>
                        {% for design in case.design_searches %}
                            <p><span class="label">Design Code:</span> {{ design.design_search_code }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        {% if case.statements %}
        <div class="section">
            <h2>Disclaimer Statements</h2>
            <div class="disclaimers">
                {% for statement in case.statements %}
                    {% if statement.type_code in ['D00000', 'D10000'] %}
                    <div class="disclaimer-item">
                        <p>
                            <span class="label">Type:</span> 
                            {% if statement.type_code == 'D00000' %}
                                Disclaimer Statement (D00000)
                            {% elif statement.type_code == 'D10000' %}
                                Disclaimer Statement (D10000)
                            {% endif %}
                        </p>
                        <p><span class="label">Text:</span> {{ statement.statement_text }}</p>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        {% endif %}

        {% if case.foreign_applications %}
        <div class="foreign-filing-dates">
            <h3>Foreign Filing Dates</h3>
            {% for app in case.foreign_applications %}
            <div class="foreign-filing-entry">
                <p>
                    <span class="label">Country:</span> 
                    {{ app.foreign_country }}{% if app.foreign_other %} ({{ app.foreign_other }}){% endif %}
                </p>
                <p>
                    <span class="label">Filing Date:</span> 
                    {{ app.foreign_filing_date.strftime('%Y-%m-%d') if app.foreign_filing_date else 'N/A' }}
                </p>
            </div>
            {% if not loop.last %}<hr class="foreign-filing-divider">{% endif %}
            {% endfor %}
        </div>
        {% endif %}

        {% if case.international_registrations %}
        <div class="section">
            <h2>International Registration</h2>
            <div class="international-reg-info">
                {% for reg in case.international_registrations %}
                <div class="int-reg-block">
                    <p>
                        <span class="label">Registration Number:</span>
                        {{ reg.international_registration_number or 'N/A' }}
                    </p>
                    <p>
                        <span class="label">Registration Date:</span>
                        {{ reg.international_registration_date.strftime('%Y-%m-%d') if reg.international_registration_date else 'N/A' }}
                    </p>
                    <p>
                        <span class="label">Publication Date:</span>
                        {{ reg.international_publication_date.strftime('%Y-%m-%d') if reg.international_publication_date else 'N/A' }}
                    </p>
                    <p>
                        <span class="label">Auto Protection Date:</span>
                        {{ reg.auto_protection_date.strftime('%Y-%m-%d') if reg.auto_protection_date else 'N/A' }}
                    </p>
                    <p>
                        <span class="label">Status Code:</span>
                        {{ reg.international_status_code or 'N/A' }}
                    </p>
                    <p>
                        <span class="label">Status Date:</span>
                        {{ reg.international_status_date.strftime('%Y-%m-%d') if reg.international_status_date else 'N/A' }}
                    </p>
                    <p>
                        <span class="label">Renewal Date:</span>
                        {{ reg.international_renewal_date.strftime('%Y-%m-%d') if reg.international_renewal_date else 'N/A' }}
                    </p>
                    <p>
                        <span class="label">Death Date:</span>
                        {{ reg.international_death_date.strftime('%Y-%m-%d') if reg.international_death_date else 'N/A' }}
                    </p>
                    <p>
                        <span class="label">Priority Claimed:</span>
                        <span class="status-indicator {% if reg.priority_claimed_in %}status-yes{% else %}status-no{% endif %}">
                            {{ 'Yes' if reg.priority_claimed_in else 'No' }}
                        </span>
                    </p>
                    {% if reg.priority_claimed_in %}
                    <p>
                        <span class="label">Priority Claimed Date:</span>
                        {{ reg.priority_claimed_date.strftime('%Y-%m-%d') if reg.priority_claimed_date else 'N/A' }}
                    </p>
                    {% endif %}
                    <p>
                        <span class="label">First Refusal:</span>
                        <span class="status-indicator {% if reg.first_refusal_in %}status-yes{% else %}status-no{% endif %}">
                            {{ 'Yes' if reg.first_refusal_in else 'No' }}
                        </span>
                    </p>
                    {% if reg.first_refusal_in %}
                    <p>
                        <span class="label">Notification Date:</span>
                        {{ reg.notification_date.strftime('%Y-%m-%d') if reg.notification_date else 'N/A' }}
                    </p>
                    {% endif %}
                </div>
                {% if not loop.last %}<hr class="int-reg-divider">{% endif %}
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <div class="section">
            <h2>All Statements</h2>
            {% for statement in case.statements %}
                <div class="statement-block">
                    <h4>Type Code: {{ statement.type_code }}</h4>
                    <p>{{ statement.statement_text }}</p>
                </div>
            {% endfor %}
        </div>
    </div>

    <script>
        function searchByAttorney(attorneyName) {
            // Encode the attorney name for the URL
            const encodedName = encodeURIComponent(attorneyName);
            
            // Redirect to the search page with the attorney name pre-selected
            window.location.href = `/?attorney=${encodedName}`;
        }
    </script>
</body>
</html> 