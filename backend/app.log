2025-01-09 19:39:39,264 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-09 19:39:39,264 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 19:39:39,266 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 19:39:41,176 - multi_filter_search - INFO - Found 3 total results in 1.89s
2025-01-09 19:39:41,409 - multi_filter_search - INFO - Query executed in 0.23s, total processing time: 2.15s
2025-01-09 19:39:41,504 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:39:41] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 19:43:30,486 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:43:30] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-09 19:44:43,593 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:44:43] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 19:44:43,597 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 19:44:43,597 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 19:44:43,602 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 19:44:43,603 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1979-01-05
2025-01-09 19:44:43,948 - multi_filter_search - INFO - Found 1 total results in 0.34s
2025-01-09 19:44:43,949 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1617, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 117, in multi_filter_search
    .join(combined_cte, combined_cte.c.serial_number == CaseFile.serial_number)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1619, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-09 19:44:44,031 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:44:44] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 19:59:21,319 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:59:21] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 19:59:21,322 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 19:59:21,323 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-01-05
2025-01-09 19:59:21,511 - multi_filter_search - INFO - Found 11 total results in 0.18s
2025-01-09 19:59:21,604 - multi_filter_search - INFO - Query executed in 0.09s, total processing time: 0.28s
2025-01-09 19:59:21,679 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:59:21] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:05:48,847 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:05:48] "GET /api/case/73199017 HTTP/1.1" 200 -
2025-01-09 20:06:26,675 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:06:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:06:26,678 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-09 20:06:26,679 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-01-05
2025-01-09 20:06:26,679 - multi_filter_search - INFO - Processing condition 2: strategy=int_reg_date, query=1983-03-08
2025-01-09 20:06:26,848 - multi_filter_search - INFO - Found 11 total results in 0.17s
2025-01-09 20:06:26,961 - multi_filter_search - INFO - Query executed in 0.11s, total processing time: 0.28s
2025-01-09 20:06:27,037 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:06:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:06:32,872 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:06:32] "GET /api/case/73199029 HTTP/1.1" 200 -
2025-01-09 20:07:48,982 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:07:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:07:48,986 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-09 20:07:48,986 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-01-05
2025-01-09 20:07:48,991 - multi_filter_search - INFO - Processing condition 2: strategy=registration_date, query=1983-03-08
2025-01-09 20:07:49,268 - multi_filter_search - INFO - Found 1 total results in 0.27s
2025-01-09 20:07:49,372 - multi_filter_search - INFO - Query executed in 0.10s, total processing time: 0.39s
2025-01-09 20:07:49,456 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:07:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:13:54,651 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:13:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:13:54,659 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 20:13:54,660 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:13:54,971 - multi_filter_search - INFO - Found 16 total results in 0.30s
2025-01-09 20:13:55,207 - multi_filter_search - INFO - Query executed in 0.24s, total processing time: 0.55s
2025-01-09 20:13:55,283 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:13:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:14:04,971 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:04] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-09 20:14:21,616 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:21] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:14:21,619 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 20:14:21,619 - multi_filter_search - INFO - Processing condition 1: strategy=attorney, query=Howard F. Feinman
2025-01-09 20:14:22,013 - multi_filter_search - INFO - Found 25 total results in 0.39s
2025-01-09 20:14:22,384 - multi_filter_search - INFO - Query executed in 0.37s, total processing time: 0.76s
2025-01-09 20:14:22,459 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:22] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:14:25,819 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:25] "GET /api/case/73236313 HTTP/1.1" 200 -
2025-01-09 20:14:26,515 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:26] "GET /api/case/73236313 HTTP/1.1" 200 -
2025-01-09 20:15:54,861 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:15:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:15:54,865 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 20:15:54,865 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:15:55,152 - multi_filter_search - INFO - Found 16 total results in 0.28s
2025-01-09 20:15:55,330 - multi_filter_search - INFO - Query executed in 0.18s, total processing time: 0.46s
2025-01-09 20:15:55,405 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:15:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:15:57,704 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:15:57] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-09 20:15:57,752 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:15:57] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-09 20:16:17,298 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:16:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:16:17,302 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:16:17,303 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:16:17,312 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:16:17,313 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:16:17,618 - multi_filter_search - INFO - Found 0 total results in 0.30s
2025-01-09 20:16:17,619 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1617, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 117, in multi_filter_search
    .join(combined_cte, combined_cte.c.serial_number == CaseFile.serial_number)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1619, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-09 20:16:17,696 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:16:17] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:28:38,386 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:28:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:28:38,390 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 20:28:38,391 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-01-05
2025-01-09 20:28:38,575 - multi_filter_search - INFO - Found 11 total results in 0.18s
2025-01-09 20:28:38,667 - multi_filter_search - INFO - Query executed in 0.09s, total processing time: 0.28s
2025-01-09 20:28:38,746 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:28:38] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:37:14,823 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-09 20:37:52,006 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:37:52,009 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:37:52,014 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:37:52,015 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:37:52,015 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 85, in multi_filter_search
    subq_serial_col = subq.c.serial_number
                      ^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-09 20:37:52,017 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:37:52] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:37:54,412 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:37:54,413 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:37:54,414 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:37:54,414 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:37:54,414 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 85, in multi_filter_search
    subq_serial_col = subq.c.serial_number
                      ^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-09 20:37:54,415 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:37:54] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:37:55,388 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:37:55,388 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:37:55,389 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:37:55,389 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:37:55,389 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 85, in multi_filter_search
    subq_serial_col = subq.c.serial_number
                      ^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-09 20:37:55,390 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:37:55] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:38:25,243 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:38:25,244 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:38:25,246 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:38:25,247 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:38:25,247 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 85, in multi_filter_search
    subq_serial_col = subq.c.serial_number
                      ^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-09 20:38:25,251 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:38:25] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:42:11,132 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-09 20:43:04,189 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:43:04,190 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:43:04,200 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:43:04,200 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:43:04,200 - multi_filter_search - ERROR - Error in multi_filter_search: 'Subquery' object has no attribute 'intersect'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 91, in multi_filter_search
    combined_query = combined_query.intersect(subq)
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Subquery' object has no attribute 'intersect'
2025-01-09 20:43:04,202 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:43:04] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:47:56,676 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-09 20:48:10,350 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:48:10,352 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:48:10,355 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:48:10,355 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:48:10,356 - multi_filter_search - ERROR - Error in multi_filter_search: 'Subquery' object has no attribute 'cte'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 97, in multi_filter_search
    combined_cte = combined_query.cte('combined_serials')
                   ^^^^^^^^^^^^^^^^^^
AttributeError: 'Subquery' object has no attribute 'cte'
2025-01-09 20:48:10,357 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:48:10] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:50:26,560 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-09 20:51:20,930 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:51:20,931 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:51:20,935 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:51:20,935 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:51:22,843 - multi_filter_search - INFO - Found 0 total results in 1.91s
2025-01-09 20:51:23,095 - multi_filter_search - INFO - Query executed in 0.25s, total processing time: 2.16s
2025-01-09 20:51:23,173 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:51:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:51:42,864 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:51:42] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:51:42,874 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-09 20:51:42,874 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:51:42,876 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:51:43,168 - multi_filter_search - INFO - Found 3 total results in 0.29s
2025-01-09 20:51:43,374 - multi_filter_search - INFO - Query executed in 0.21s, total processing time: 0.50s
2025-01-09 20:51:43,449 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:51:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:52:08,022 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:52:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:52:08,027 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:52:08,027 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:52:08,029 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:52:08,030 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1979-01-05
2025-01-09 20:52:08,330 - multi_filter_search - INFO - Found 1 total results in 0.29s
2025-01-09 20:52:08,546 - multi_filter_search - INFO - Query executed in 0.22s, total processing time: 0.52s
2025-01-09 20:52:08,624 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:52:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 00:01:56,506 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 00:01:56] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-10 00:01:56,977 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 00:01:56] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-10 00:02:46,340 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 00:02:46] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 00:02:46,344 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 00:02:46,345 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=accurate finish
2025-01-10 00:02:46,706 - multi_filter_search - INFO - Found 15 total results in 0.35s
2025-01-10 00:02:46,931 - multi_filter_search - INFO - Query executed in 0.22s, total processing time: 0.59s
2025-01-10 00:02:47,014 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 00:02:47] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 01:00:45,869 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 01:00:45] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 01:00:45,876 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 01:00:45,879 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 01:00:46,296 - multi_filter_search - INFO - Found 16 total results in 0.41s
2025-01-10 01:00:46,533 - multi_filter_search - INFO - Query executed in 0.24s, total processing time: 0.66s
2025-01-10 01:00:46,648 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 01:00:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 01:04:50,057 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 01:04:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 01:04:50,063 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 01:04:50,065 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 01:04:50,076 - multi_filter_search - INFO - Processing condition 2: strategy=standard_character_claim, query=true
2025-01-10 01:04:50,371 - multi_filter_search - INFO - Found 479 total results in 0.29s
2025-01-10 01:04:50,637 - multi_filter_search - INFO - Query executed in 0.27s, total processing time: 0.57s
2025-01-10 01:04:50,755 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 01:04:50] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:42:17,601 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 18:42:17,603 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 18:42:31,401 - multi_filter_search - INFO - Found 16 total results in 13.79s
2025-01-10 18:42:32,320 - multi_filter_search - INFO - Query executed in 0.92s, total processing time: 14.72s
2025-01-10 18:42:33,141 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:42:33] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:51:28,201 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:51:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:51:28,207 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 18:51:28,207 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 18:51:28,222 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 18:51:29,649 - multi_filter_search - INFO - Found 147 total results in 1.43s
2025-01-10 18:51:30,367 - multi_filter_search - INFO - Query executed in 0.72s, total processing time: 2.16s
2025-01-10 18:51:31,051 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:51:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:54:10,999 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:54:10] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:54:11,003 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 18:54:11,003 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 18:54:11,006 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 18:54:11,006 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 18:54:12,633 - multi_filter_search - INFO - Found 314 total results in 1.62s
2025-01-10 18:54:13,558 - multi_filter_search - INFO - Query executed in 0.92s, total processing time: 2.55s
2025-01-10 18:54:14,275 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:54:14] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:54:41,092 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:54:41] "GET /api/case/73264870 HTTP/1.1" 200 -
2025-01-10 19:02:39,621 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:02:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:02:39,627 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 19:02:39,628 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:02:41,267 - multi_filter_search - INFO - Found 23 total results in 1.63s
2025-01-10 19:02:41,997 - multi_filter_search - INFO - Query executed in 0.73s, total processing time: 2.37s
2025-01-10 19:02:42,864 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:02:42] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:05:02,926 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 19:05:23,237 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 19:05:23,237 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:05:23,263 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:05:37,794 - multi_filter_search - INFO - Found 23 total results in 14.53s
2025-01-10 19:05:37,797 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_1)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN combined_serials ON combined_serials.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 19:05:38,726 - multi_filter_search - INFO - Query executed in 0.93s, total processing time: 15.49s
2025-01-10 19:05:39,645 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:05:39] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:07:47,178 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:07:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:07:47,185 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 19:07:47,185 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:07:47,194 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:07:47,195 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 19:07:47,197 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 19:07:47,197 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 19:07:47,199 - multi_filter_search - INFO - Subquery 3 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:07:47,206 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = %(filing_date_1)s ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2 UNION SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = %(international_code_1)s ORDER BY casefileheader.filing_date DESC) AS anon_5) AS anon_1)
 SELECT COUNT(*) 
FROM combined_serials]
[parameters: {'filing_date_1': datetime.date(1979, 4, 30), 'international_code_1': '040'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = %(filing_date_1)s ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2 UNION SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = %(international_code_1)s ORDER BY casefileheader.filing_date DESC) AS anon_5) AS anon_1)
 SELECT COUNT(*) 
FROM combined_serials]
[parameters: {'filing_date_1': datetime.date(1979, 4, 30), 'international_code_1': '040'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-10 19:07:47,224 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:07:47] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 19:09:34,548 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:09:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:09:34,553 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 19:09:34,553 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:09:34,559 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:34,559 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 19:09:34,568 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:34,568 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 19:09:34,570 - multi_filter_search - INFO - Subquery 3 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:34,574 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 717, in checkout
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 715, in checkout
    dbapi_connection = rec.get_connection()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 837, in get_connection
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2442, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 717, in checkout
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 715, in checkout
    dbapi_connection = rec.get_connection()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 837, in get_connection
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-10 19:09:34,585 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:09:34] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 19:09:38,868 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 19:09:38,869 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:09:38,871 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:38,871 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 19:09:38,872 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:38,872 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 19:09:38,874 - multi_filter_search - INFO - Subquery 3 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:38,877 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 717, in checkout
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 715, in checkout
    dbapi_connection = rec.get_connection()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 837, in get_connection
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2442, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 717, in checkout
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 715, in checkout
    dbapi_connection = rec.get_connection()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 837, in get_connection
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-10 19:09:38,886 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:09:38] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 19:09:52,603 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:09:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:09:52,606 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 19:09:52,606 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:09:52,607 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:52,607 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 19:09:52,608 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:52,608 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 19:09:52,609 - multi_filter_search - INFO - Subquery 3 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:10:01,688 - multi_filter_search - INFO - Found 314 total results in 9.08s
2025-01-10 19:10:01,690 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2 UNION SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_5) AS anon_1)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN combined_serials ON combined_serials.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 19:10:02,815 - multi_filter_search - INFO - Query executed in 1.13s, total processing time: 10.21s
2025-01-10 19:10:03,672 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:10:03] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:17:20,266 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:17:20] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:17:20,272 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 19:17:20,273 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:17:20,279 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:17:20,279 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 19:17:20,283 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:17:22,062 - multi_filter_search - INFO - Found 191 total results in 1.78s
2025-01-10 19:17:22,064 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_2 UNION SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_3) AS anon_1)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN combined_serials ON combined_serials.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 19:17:22,935 - multi_filter_search - INFO - Query executed in 0.87s, total processing time: 2.66s
2025-01-10 19:17:23,760 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:17:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:26:29,992 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 19:27:19,669 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 19:27:19,670 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:27:19,709 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:27:19,709 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 19:27:19,710 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:27:36,507 - multi_filter_search - INFO - Found 191 total results in 16.80s
2025-01-10 19:27:36,509 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_2 UNION ALL SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_3) AS anon_1)
 SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN combined_serials ON combined_serials.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 19:27:37,390 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py", line 199, in _key_not_found
    self._key_fallback(key, None)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py", line 138, in _key_fallback
    raise KeyError(key) from err
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 138, in multi_filter_search
    'serial_number': row.serial_number,
                     ^^^^^^^^^^^^^^^^^
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 66, in sqlalchemy.cyextension.resultproxy.BaseRow.__getattr__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 63, in sqlalchemy.cyextension.resultproxy.BaseRow._get_by_key_impl
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py", line 201, in _key_not_found
    raise AttributeError(ke.args[0]) from ke
AttributeError: serial_number
2025-01-10 19:27:38,253 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:27:38] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 19:55:54,500 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 19:56:28,048 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 19:56:28,049 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:56:28,081 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:56:28,081 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 19:56:28,082 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:56:49,114 - multi_filter_search - INFO - Found 191 total results in 21.03s
2025-01-10 19:56:49,115 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1617, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 128, in multi_filter_search
    .join(distinct_serial_numbers, distinct_serial_numbers.c.serial_number == CaseFile.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1619, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-10 19:56:50,138 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:56:50] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 20:01:06,314 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 20:02:43,248 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:02:43,249 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 20:02:43,292 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:02:43,292 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:02:43,293 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:02:43,300 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2442, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-10 20:02:43,313 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:02:43] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 20:05:20,992 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:05:20] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:05:20,997 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:05:20,998 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 20:05:21,027 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:05:21,027 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:05:21,033 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:05:36,880 - multi_filter_search - INFO - Found 191 total results in 15.85s
2025-01-10 20:05:36,882 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:05:37,828 - multi_filter_search - INFO - Query executed in 0.95s, total processing time: 16.83s
2025-01-10 20:05:38,626 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:05:38] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:06:48,798 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:06:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:06:48,801 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:06:48,802 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 20:06:48,807 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:06:48,807 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 20:06:48,808 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 20:06:50,508 - multi_filter_search - INFO - Found 147 total results in 1.70s
2025-01-10 20:06:50,510 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:06:52,047 - multi_filter_search - INFO - Query executed in 1.54s, total processing time: 3.25s
2025-01-10 20:06:52,863 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:06:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:07:32,114 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:07:32] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:07:32,117 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 20:07:32,117 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 20:07:32,118 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:07:33,631 - multi_filter_search - INFO - Found 23 total results in 1.51s
2025-01-10 20:07:33,632 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:07:34,437 - multi_filter_search - INFO - Query executed in 0.81s, total processing time: 2.32s
2025-01-10 20:07:35,145 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:07:35] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:08:57,071 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:08:57] "GET /api/case/73199909 HTTP/1.1" 200 -
2025-01-10 20:09:02,499 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:09:02] "GET /api/case/73199909 HTTP/1.1" 200 -
2025-01-10 20:10:19,615 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:10:19] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:10:19,621 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:10:19,622 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1970-04-30
2025-01-10 20:10:19,630 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1970-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:10:19,630 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:10:19,633 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:10:21,451 - multi_filter_search - INFO - Found 174 total results in 1.82s
2025-01-10 20:10:21,453 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1970-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:10:22,277 - multi_filter_search - INFO - Query executed in 0.83s, total processing time: 2.66s
2025-01-10 20:10:23,087 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:10:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:12:05,703 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:12:05] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:12:05,707 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:12:05,708 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 20:12:05,714 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17' ORDER BY casefileheader.registration_date DESC
2025-01-10 20:12:05,714 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:12:05,716 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:12:07,405 - multi_filter_search - INFO - Found 189 total results in 1.69s
2025-01-10 20:12:07,407 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17' ORDER BY casefileheader.registration_date DESC) AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:12:08,354 - multi_filter_search - INFO - Query executed in 0.95s, total processing time: 2.65s
2025-01-10 20:12:09,170 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:12:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:12:25,121 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:12:25] "GET /api/case/73266434 HTTP/1.1" 200 -
2025-01-10 20:18:12,001 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:18:12] "GET /api/case/73264870 HTTP/1.1" 200 -
2025-01-10 20:18:41,038 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:18:41] "GET /api/case/73264654 HTTP/1.1" 200 -
2025-01-10 20:23:16,636 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/search_strategies.py', reloading
2025-01-10 20:26:15,577 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:26:15,577 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 20:26:15,614 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 20:26:15,614 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:26:15,615 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 20:26:29,825 - multi_filter_search - INFO - Found 189 total results in 14.21s
2025-01-10 20:26:29,827 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:26:30,644 - multi_filter_search - INFO - Query executed in 0.82s, total processing time: 15.07s
2025-01-10 20:26:31,361 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:26:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:27:01,745 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:27:01,746 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 20:27:01,780 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 20:27:01,780 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:27:01,781 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 20:27:16,007 - multi_filter_search - INFO - Found 189 total results in 14.22s
2025-01-10 20:27:16,008 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:27:16,827 - multi_filter_search - INFO - Query executed in 0.82s, total processing time: 15.08s
2025-01-10 20:27:17,646 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:27:17] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:29:39,662 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:29:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:29:39,666 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 20:29:39,666 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 20:29:39,676 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-10 20:29:41,712 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:29:41] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-10 20:29:47,035 - multi_filter_search - INFO - Found 16 total results in 7.36s
2025-01-10 20:29:47,037 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:29:47,957 - multi_filter_search - INFO - Query executed in 0.92s, total processing time: 8.29s
2025-01-10 20:29:48,776 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:29:48] "POST /api/combined_search HTTP/1.1" 200 -
