2025-01-09 19:39:39,264 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-09 19:39:39,264 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 19:39:39,266 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 19:39:41,176 - multi_filter_search - INFO - Found 3 total results in 1.89s
2025-01-09 19:39:41,409 - multi_filter_search - INFO - Query executed in 0.23s, total processing time: 2.15s
2025-01-09 19:39:41,504 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:39:41] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 19:43:30,486 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:43:30] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-09 19:44:43,593 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:44:43] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 19:44:43,597 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 19:44:43,597 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 19:44:43,602 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 19:44:43,603 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1979-01-05
2025-01-09 19:44:43,948 - multi_filter_search - INFO - Found 1 total results in 0.34s
2025-01-09 19:44:43,949 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1617, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 117, in multi_filter_search
    .join(combined_cte, combined_cte.c.serial_number == CaseFile.serial_number)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1619, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-09 19:44:44,031 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:44:44] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 19:59:21,319 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:59:21] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 19:59:21,322 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 19:59:21,323 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-01-05
2025-01-09 19:59:21,511 - multi_filter_search - INFO - Found 11 total results in 0.18s
2025-01-09 19:59:21,604 - multi_filter_search - INFO - Query executed in 0.09s, total processing time: 0.28s
2025-01-09 19:59:21,679 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 19:59:21] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:05:48,847 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:05:48] "GET /api/case/73199017 HTTP/1.1" 200 -
2025-01-09 20:06:26,675 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:06:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:06:26,678 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-09 20:06:26,679 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-01-05
2025-01-09 20:06:26,679 - multi_filter_search - INFO - Processing condition 2: strategy=int_reg_date, query=1983-03-08
2025-01-09 20:06:26,848 - multi_filter_search - INFO - Found 11 total results in 0.17s
2025-01-09 20:06:26,961 - multi_filter_search - INFO - Query executed in 0.11s, total processing time: 0.28s
2025-01-09 20:06:27,037 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:06:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:06:32,872 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:06:32] "GET /api/case/73199029 HTTP/1.1" 200 -
2025-01-09 20:07:48,982 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:07:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:07:48,986 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-09 20:07:48,986 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-01-05
2025-01-09 20:07:48,991 - multi_filter_search - INFO - Processing condition 2: strategy=registration_date, query=1983-03-08
2025-01-09 20:07:49,268 - multi_filter_search - INFO - Found 1 total results in 0.27s
2025-01-09 20:07:49,372 - multi_filter_search - INFO - Query executed in 0.10s, total processing time: 0.39s
2025-01-09 20:07:49,456 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:07:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:13:54,651 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:13:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:13:54,659 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 20:13:54,660 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:13:54,971 - multi_filter_search - INFO - Found 16 total results in 0.30s
2025-01-09 20:13:55,207 - multi_filter_search - INFO - Query executed in 0.24s, total processing time: 0.55s
2025-01-09 20:13:55,283 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:13:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:14:04,971 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:04] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-09 20:14:21,616 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:21] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:14:21,619 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 20:14:21,619 - multi_filter_search - INFO - Processing condition 1: strategy=attorney, query=Howard F. Feinman
2025-01-09 20:14:22,013 - multi_filter_search - INFO - Found 25 total results in 0.39s
2025-01-09 20:14:22,384 - multi_filter_search - INFO - Query executed in 0.37s, total processing time: 0.76s
2025-01-09 20:14:22,459 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:22] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:14:25,819 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:25] "GET /api/case/73236313 HTTP/1.1" 200 -
2025-01-09 20:14:26,515 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:14:26] "GET /api/case/73236313 HTTP/1.1" 200 -
2025-01-09 20:15:54,861 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:15:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:15:54,865 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 20:15:54,865 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:15:55,152 - multi_filter_search - INFO - Found 16 total results in 0.28s
2025-01-09 20:15:55,330 - multi_filter_search - INFO - Query executed in 0.18s, total processing time: 0.46s
2025-01-09 20:15:55,405 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:15:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:15:57,704 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:15:57] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-09 20:15:57,752 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:15:57] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-09 20:16:17,298 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:16:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:16:17,302 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:16:17,303 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:16:17,312 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:16:17,313 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:16:17,618 - multi_filter_search - INFO - Found 0 total results in 0.30s
2025-01-09 20:16:17,619 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1617, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 117, in multi_filter_search
    .join(combined_cte, combined_cte.c.serial_number == CaseFile.serial_number)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1619, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-09 20:16:17,696 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:16:17] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:28:38,386 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:28:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:28:38,390 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-09 20:28:38,391 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-01-05
2025-01-09 20:28:38,575 - multi_filter_search - INFO - Found 11 total results in 0.18s
2025-01-09 20:28:38,667 - multi_filter_search - INFO - Query executed in 0.09s, total processing time: 0.28s
2025-01-09 20:28:38,746 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:28:38] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:37:14,823 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-09 20:37:52,006 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:37:52,009 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:37:52,014 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:37:52,015 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:37:52,015 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 85, in multi_filter_search
    subq_serial_col = subq.c.serial_number
                      ^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-09 20:37:52,017 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:37:52] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:37:54,412 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:37:54,413 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:37:54,414 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:37:54,414 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:37:54,414 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 85, in multi_filter_search
    subq_serial_col = subq.c.serial_number
                      ^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-09 20:37:54,415 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:37:54] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:37:55,388 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:37:55,388 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:37:55,389 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:37:55,389 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:37:55,389 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 85, in multi_filter_search
    subq_serial_col = subq.c.serial_number
                      ^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-09 20:37:55,390 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:37:55] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:38:25,243 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:38:25,244 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:38:25,246 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:38:25,247 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:38:25,247 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 85, in multi_filter_search
    subq_serial_col = subq.c.serial_number
                      ^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-09 20:38:25,251 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:38:25] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:42:11,132 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-09 20:43:04,189 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:43:04,190 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:43:04,200 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:43:04,200 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:43:04,200 - multi_filter_search - ERROR - Error in multi_filter_search: 'Subquery' object has no attribute 'intersect'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 91, in multi_filter_search
    combined_query = combined_query.intersect(subq)
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Subquery' object has no attribute 'intersect'
2025-01-09 20:43:04,202 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:43:04] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:47:56,676 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-09 20:48:10,350 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:48:10,352 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:48:10,355 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:48:10,355 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:48:10,356 - multi_filter_search - ERROR - Error in multi_filter_search: 'Subquery' object has no attribute 'cte'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 97, in multi_filter_search
    combined_cte = combined_query.cte('combined_serials')
                   ^^^^^^^^^^^^^^^^^^
AttributeError: 'Subquery' object has no attribute 'cte'
2025-01-09 20:48:10,357 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:48:10] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-09 20:50:26,560 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-09 20:51:20,930 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:51:20,931 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:51:20,935 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:51:20,935 - multi_filter_search - INFO - Processing condition 3: strategy=drawing_code_type, query=3000
2025-01-09 20:51:22,843 - multi_filter_search - INFO - Found 0 total results in 1.91s
2025-01-09 20:51:23,095 - multi_filter_search - INFO - Query executed in 0.25s, total processing time: 2.16s
2025-01-09 20:51:23,173 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:51:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:51:42,864 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:51:42] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:51:42,874 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-09 20:51:42,874 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:51:42,876 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:51:43,168 - multi_filter_search - INFO - Found 3 total results in 0.29s
2025-01-09 20:51:43,374 - multi_filter_search - INFO - Query executed in 0.21s, total processing time: 0.50s
2025-01-09 20:51:43,449 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:51:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:52:08,022 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:52:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-09 20:52:08,027 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-09 20:52:08,027 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-09 20:52:08,029 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-09 20:52:08,030 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1979-01-05
2025-01-09 20:52:08,330 - multi_filter_search - INFO - Found 1 total results in 0.29s
2025-01-09 20:52:08,546 - multi_filter_search - INFO - Query executed in 0.22s, total processing time: 0.52s
2025-01-09 20:52:08,624 - werkzeug - INFO - 127.0.0.1 - - [09/Jan/2025 20:52:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 00:01:56,506 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 00:01:56] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-10 00:01:56,977 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 00:01:56] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-10 00:02:46,340 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 00:02:46] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 00:02:46,344 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 00:02:46,345 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=accurate finish
2025-01-10 00:02:46,706 - multi_filter_search - INFO - Found 15 total results in 0.35s
2025-01-10 00:02:46,931 - multi_filter_search - INFO - Query executed in 0.22s, total processing time: 0.59s
2025-01-10 00:02:47,014 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 00:02:47] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 01:00:45,869 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 01:00:45] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 01:00:45,876 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 01:00:45,879 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 01:00:46,296 - multi_filter_search - INFO - Found 16 total results in 0.41s
2025-01-10 01:00:46,533 - multi_filter_search - INFO - Query executed in 0.24s, total processing time: 0.66s
2025-01-10 01:00:46,648 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 01:00:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 01:04:50,057 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 01:04:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 01:04:50,063 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 01:04:50,065 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 01:04:50,076 - multi_filter_search - INFO - Processing condition 2: strategy=standard_character_claim, query=true
2025-01-10 01:04:50,371 - multi_filter_search - INFO - Found 479 total results in 0.29s
2025-01-10 01:04:50,637 - multi_filter_search - INFO - Query executed in 0.27s, total processing time: 0.57s
2025-01-10 01:04:50,755 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 01:04:50] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:42:17,601 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 18:42:17,603 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 18:42:31,401 - multi_filter_search - INFO - Found 16 total results in 13.79s
2025-01-10 18:42:32,320 - multi_filter_search - INFO - Query executed in 0.92s, total processing time: 14.72s
2025-01-10 18:42:33,141 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:42:33] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:51:28,201 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:51:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:51:28,207 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 18:51:28,207 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 18:51:28,222 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 18:51:29,649 - multi_filter_search - INFO - Found 147 total results in 1.43s
2025-01-10 18:51:30,367 - multi_filter_search - INFO - Query executed in 0.72s, total processing time: 2.16s
2025-01-10 18:51:31,051 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:51:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:54:10,999 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:54:10] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:54:11,003 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 18:54:11,003 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 18:54:11,006 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 18:54:11,006 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 18:54:12,633 - multi_filter_search - INFO - Found 314 total results in 1.62s
2025-01-10 18:54:13,558 - multi_filter_search - INFO - Query executed in 0.92s, total processing time: 2.55s
2025-01-10 18:54:14,275 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:54:14] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 18:54:41,092 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 18:54:41] "GET /api/case/73264870 HTTP/1.1" 200 -
2025-01-10 19:02:39,621 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:02:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:02:39,627 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 19:02:39,628 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:02:41,267 - multi_filter_search - INFO - Found 23 total results in 1.63s
2025-01-10 19:02:41,997 - multi_filter_search - INFO - Query executed in 0.73s, total processing time: 2.37s
2025-01-10 19:02:42,864 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:02:42] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:05:02,926 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 19:05:23,237 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 19:05:23,237 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:05:23,263 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:05:37,794 - multi_filter_search - INFO - Found 23 total results in 14.53s
2025-01-10 19:05:37,797 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_1)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN combined_serials ON combined_serials.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 19:05:38,726 - multi_filter_search - INFO - Query executed in 0.93s, total processing time: 15.49s
2025-01-10 19:05:39,645 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:05:39] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:07:47,178 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:07:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:07:47,185 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 19:07:47,185 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:07:47,194 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:07:47,195 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 19:07:47,197 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 19:07:47,197 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 19:07:47,199 - multi_filter_search - INFO - Subquery 3 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:07:47,206 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = %(filing_date_1)s ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2 UNION SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = %(international_code_1)s ORDER BY casefileheader.filing_date DESC) AS anon_5) AS anon_1)
 SELECT COUNT(*) 
FROM combined_serials]
[parameters: {'filing_date_1': datetime.date(1979, 4, 30), 'international_code_1': '040'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = %(filing_date_1)s ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2 UNION SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = %(international_code_1)s ORDER BY casefileheader.filing_date DESC) AS anon_5) AS anon_1)
 SELECT COUNT(*) 
FROM combined_serials]
[parameters: {'filing_date_1': datetime.date(1979, 4, 30), 'international_code_1': '040'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-10 19:07:47,224 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:07:47] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 19:09:34,548 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:09:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:09:34,553 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 19:09:34,553 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:09:34,559 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:34,559 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 19:09:34,568 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:34,568 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 19:09:34,570 - multi_filter_search - INFO - Subquery 3 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:34,574 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 717, in checkout
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 715, in checkout
    dbapi_connection = rec.get_connection()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 837, in get_connection
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2442, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 717, in checkout
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 715, in checkout
    dbapi_connection = rec.get_connection()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 837, in get_connection
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-10 19:09:34,585 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:09:34] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 19:09:38,868 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 19:09:38,869 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:09:38,871 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:38,871 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 19:09:38,872 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:38,872 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 19:09:38,874 - multi_filter_search - INFO - Subquery 3 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:38,877 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 717, in checkout
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 715, in checkout
    dbapi_connection = rec.get_connection()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 837, in get_connection
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2442, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 717, in checkout
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 715, in checkout
    dbapi_connection = rec.get_connection()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 837, in get_connection
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-10 19:09:38,886 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:09:38] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 19:09:52,603 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:09:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:09:52,606 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 19:09:52,606 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:09:52,607 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:52,607 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 19:09:52,608 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 19:09:52,608 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=040
2025-01-10 19:09:52,609 - multi_filter_search - INFO - Subquery 3 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:10:01,688 - multi_filter_search - INFO - Found 314 total results in 9.08s
2025-01-10 19:10:01,690 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2 UNION SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_5) AS anon_1)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN combined_serials ON combined_serials.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 19:10:02,815 - multi_filter_search - INFO - Query executed in 1.13s, total processing time: 10.21s
2025-01-10 19:10:03,672 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:10:03] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:17:20,266 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:17:20] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:17:20,272 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 19:17:20,273 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:17:20,279 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:17:20,279 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 19:17:20,283 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:17:22,062 - multi_filter_search - INFO - Found 191 total results in 1.78s
2025-01-10 19:17:22,064 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_2 UNION SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_3) AS anon_1)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN combined_serials ON combined_serials.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 19:17:22,935 - multi_filter_search - INFO - Query executed in 0.87s, total processing time: 2.66s
2025-01-10 19:17:23,760 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:17:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 19:26:29,992 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 19:27:19,669 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 19:27:19,670 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:27:19,709 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:27:19,709 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 19:27:19,710 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:27:36,507 - multi_filter_search - INFO - Found 191 total results in 16.80s
2025-01-10 19:27:36,509 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_1.serial_number AS serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_2 UNION ALL SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_3) AS anon_1)
 SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN combined_serials ON combined_serials.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 19:27:37,390 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py", line 199, in _key_not_found
    self._key_fallback(key, None)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py", line 138, in _key_fallback
    raise KeyError(key) from err
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 138, in multi_filter_search
    'serial_number': row.serial_number,
                     ^^^^^^^^^^^^^^^^^
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 66, in sqlalchemy.cyextension.resultproxy.BaseRow.__getattr__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 63, in sqlalchemy.cyextension.resultproxy.BaseRow._get_by_key_impl
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/result.py", line 201, in _key_not_found
    raise AttributeError(ke.args[0]) from ke
AttributeError: serial_number
2025-01-10 19:27:38,253 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:27:38] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 19:55:54,500 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 19:56:28,048 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 19:56:28,049 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 19:56:28,081 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:56:28,081 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 19:56:28,082 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 19:56:49,114 - multi_filter_search - INFO - Found 191 total results in 21.03s
2025-01-10 19:56:49,115 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1617, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 128, in multi_filter_search
    .join(distinct_serial_numbers, distinct_serial_numbers.c.serial_number == CaseFile.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/sql/base.py", line 1619, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-10 19:56:50,138 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 19:56:50] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 20:01:06,314 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 20:02:43,248 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:02:43,249 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 20:02:43,292 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:02:43,292 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:02:43,293 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:02:43,300 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2442, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-10 20:02:43,313 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:02:43] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 20:05:20,992 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:05:20] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:05:20,997 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:05:20,998 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 20:05:21,027 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:05:21,027 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:05:21,033 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:05:36,880 - multi_filter_search - INFO - Found 191 total results in 15.85s
2025-01-10 20:05:36,882 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:05:37,828 - multi_filter_search - INFO - Query executed in 0.95s, total processing time: 16.83s
2025-01-10 20:05:38,626 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:05:38] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:06:48,798 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:06:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:06:48,801 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:06:48,802 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 20:06:48,807 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:06:48,807 - multi_filter_search - INFO - Processing condition 2: strategy=section_15, query=true
2025-01-10 20:06:48,808 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC
2025-01-10 20:06:50,508 - multi_filter_search - INFO - Found 147 total results in 1.70s
2025-01-10 20:06:50,510 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_filed_in = true ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:06:52,047 - multi_filter_search - INFO - Query executed in 1.54s, total processing time: 3.25s
2025-01-10 20:06:52,863 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:06:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:07:32,114 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:07:32] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:07:32,117 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 20:07:32,117 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1979-04-30
2025-01-10 20:07:32,118 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:07:33,631 - multi_filter_search - INFO - Found 23 total results in 1.51s
2025-01-10 20:07:33,632 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:07:34,437 - multi_filter_search - INFO - Query executed in 0.81s, total processing time: 2.32s
2025-01-10 20:07:35,145 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:07:35] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:08:57,071 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:08:57] "GET /api/case/73199909 HTTP/1.1" 200 -
2025-01-10 20:09:02,499 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:09:02] "GET /api/case/73199909 HTTP/1.1" 200 -
2025-01-10 20:10:19,615 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:10:19] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:10:19,621 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:10:19,622 - multi_filter_search - INFO - Processing condition 1: strategy=filing_date, query=1970-04-30
2025-01-10 20:10:19,630 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1970-04-30' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:10:19,630 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:10:19,633 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:10:21,451 - multi_filter_search - INFO - Found 174 total results in 1.82s
2025-01-10 20:10:21,453 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1970-04-30' ORDER BY casefileheader.filing_date DESC) AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:10:22,277 - multi_filter_search - INFO - Query executed in 0.83s, total processing time: 2.66s
2025-01-10 20:10:23,087 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:10:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:12:05,703 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:12:05] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:12:05,707 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:12:05,708 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 20:12:05,714 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17' ORDER BY casefileheader.registration_date DESC
2025-01-10 20:12:05,714 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:12:05,716 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC
2025-01-10 20:12:07,405 - multi_filter_search - INFO - Found 189 total results in 1.69s
2025-01-10 20:12:07,407 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17' ORDER BY casefileheader.registration_date DESC) AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040' ORDER BY casefileheader.filing_date DESC) AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:12:08,354 - multi_filter_search - INFO - Query executed in 0.95s, total processing time: 2.65s
2025-01-10 20:12:09,170 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:12:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:12:25,121 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:12:25] "GET /api/case/73266434 HTTP/1.1" 200 -
2025-01-10 20:18:12,001 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:18:12] "GET /api/case/73264870 HTTP/1.1" 200 -
2025-01-10 20:18:41,038 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:18:41] "GET /api/case/73264654 HTTP/1.1" 200 -
2025-01-10 20:23:16,636 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/search_strategies.py', reloading
2025-01-10 20:26:15,577 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:26:15,577 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 20:26:15,614 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 20:26:15,614 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:26:15,615 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 20:26:29,825 - multi_filter_search - INFO - Found 189 total results in 14.21s
2025-01-10 20:26:29,827 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:26:30,644 - multi_filter_search - INFO - Query executed in 0.82s, total processing time: 15.07s
2025-01-10 20:26:31,361 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:26:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:27:01,745 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:27:01,746 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 20:27:01,780 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 20:27:01,780 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:27:01,781 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 20:27:16,007 - multi_filter_search - INFO - Found 189 total results in 14.22s
2025-01-10 20:27:16,008 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS anon_4) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:27:16,827 - multi_filter_search - INFO - Query executed in 0.82s, total processing time: 15.08s
2025-01-10 20:27:17,646 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:27:17] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:29:39,662 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:29:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:29:39,666 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 20:29:39,666 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 20:29:39,676 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-10 20:29:41,712 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:29:41] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-10 20:29:47,035 - multi_filter_search - INFO - Found 16 total results in 7.36s
2025-01-10 20:29:47,037 - multi_filter_search - INFO - Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2)
 SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1 ON anon_1.serial_number = casefile.serial_number ORDER BY casefileheader.filing_date DESC
2025-01-10 20:29:47,957 - multi_filter_search - INFO - Query executed in 0.92s, total processing time: 8.29s
2025-01-10 20:29:48,776 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:29:48] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:41:37,238 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 20:44:00,494 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:44:00,495 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 20:44:00,567 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 20:44:00,568 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:44:00,571 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 20:44:15,211 - multi_filter_search - INFO - Found 189 total results in 14.64s
2025-01-10 20:44:15,214 - multi_filter_search - INFO - Simplified Final query SQL: WITH combined_serials AS 
(SELECT anon_2.serial_number AS serial_number 
FROM (SELECT anon_3.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS anon_3 UNION ALL SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS anon_4) AS anon_2)
 SELECT anon_1.serial_number 
FROM (SELECT DISTINCT combined_serials.serial_number AS serial_number 
FROM combined_serials) AS anon_1
2025-01-10 20:44:17,058 - multi_filter_search - INFO - Query executed in 1.85s, total processing time: 16.56s
2025-01-10 20:44:17,876 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:44:17] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 20:46:30,722 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:46:30] "GET /api/case/71467061 HTTP/1.1" 200 -
2025-01-10 20:46:37,447 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:46:37] "GET /api/case/71467061 HTTP/1.1" 200 -
2025-01-10 20:48:12,273 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:48:12] "GET /api/case/71528300 HTTP/1.1" 200 -
2025-01-10 20:49:06,955 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:49:06] "GET /api/case/71559414 HTTP/1.1" 200 -
2025-01-10 20:57:41,298 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 20:58:17,767 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 20:58:17,768 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 20:58:17,795 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 20:58:17,795 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 20:58:17,796 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 20:58:17,796 - multi_filter_search - ERROR - Error in multi_filter_search: HasCTE.cte() got an unexpected keyword argument 'materialized'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 99, in multi_filter_search
    combined_cte = select(combined_query).cte('combined_serials', materialized=True)
TypeError: HasCTE.cte() got an unexpected keyword argument 'materialized'
2025-01-10 20:58:17,797 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 20:58:17] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 20:59:58,709 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 21:00:18,756 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:00:18,757 - multi_filter_search - ERROR - Error in multi_filter_search: name 'sqlalchemy' is not defined
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 45, in multi_filter_search
    print(sqlalchemy.__version__)
          ^^^^^^^^^^
NameError: name 'sqlalchemy' is not defined
2025-01-10 21:00:18,759 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:00:18] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 21:00:42,767 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 21:00:51,668 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:00:51,668 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 21:00:51,698 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 21:00:51,698 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 21:00:51,700 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 21:00:51,700 - multi_filter_search - ERROR - Error in multi_filter_search: HasCTE.cte() got an unexpected keyword argument 'materialized'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 103, in multi_filter_search
    combined_cte = select(combined_query).cte('combined_serials', materialized=True)
TypeError: HasCTE.cte() got an unexpected keyword argument 'materialized'
2025-01-10 21:00:51,701 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:00:51] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 21:01:35,003 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 21:02:47,986 - multi_filter_search - INFO - SQLAlchemy version: 2.0.36
2025-01-10 21:02:47,986 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:02:47,987 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 21:02:48,020 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 21:02:48,020 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 21:02:48,021 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 21:02:48,022 - multi_filter_search - ERROR - Error in multi_filter_search: HasCTE.cte() got an unexpected keyword argument 'materialized'
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 104, in multi_filter_search
    combined_cte = select(combined_query).cte('combined_serials', materialized=True)
TypeError: HasCTE.cte() got an unexpected keyword argument 'materialized'
2025-01-10 21:02:48,022 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:02:48] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-10 21:08:59,576 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 21:15:35,471 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:15:35,473 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 21:15:35,516 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 21:15:35,516 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 21:15:35,517 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 21:15:50,352 - multi_filter_search - INFO - Found 189 total results in 14.83s
2025-01-10 21:15:50,354 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS anon_2) ORDER BY casefileheader.filing_date DESC
2025-01-10 21:15:51,171 - multi_filter_search - INFO - Query executed in 0.82s, total processing time: 15.70s
2025-01-10 21:15:51,888 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:15:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:16:16,059 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:16:16] "GET /api/case/73266434 HTTP/1.1" 200 -
2025-01-10 21:17:37,074 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:17:37] "GET /api/case/73263650 HTTP/1.1" 200 -
2025-01-10 21:18:23,156 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:18:23,157 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 21:18:23,186 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 21:18:23,186 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 21:18:23,187 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 21:18:37,777 - multi_filter_search - INFO - Found 189 total results in 14.59s
2025-01-10 21:18:37,779 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS anon_2) ORDER BY casefileheader.filing_date DESC
2025-01-10 21:18:38,599 - multi_filter_search - INFO - Query executed in 0.82s, total processing time: 15.44s
2025-01-10 21:18:39,318 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:18:39] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:24:16,936 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 21:24:25,214 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:24:25,214 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 21:24:25,252 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17'
2025-01-10 21:24:25,252 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 21:24:25,253 - multi_filter_search - INFO - Subquery 2 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040'
2025-01-10 21:24:38,947 - multi_filter_search - INFO - Found 189 total results in 13.69s
2025-01-10 21:24:38,949 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS anon_2) ORDER BY casefileheader.filing_date DESC
2025-01-10 21:24:39,734 - multi_filter_search - INFO - Query executed in 0.79s, total processing time: 14.52s
2025-01-10 21:24:40,477 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:24:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:27:28,983 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:27:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:27:28,987 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 21:27:28,988 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 21:27:28,998 - multi_filter_search - INFO - Subquery 1 SQL: SELECT casefile.serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-10 21:27:30,561 - multi_filter_search - INFO - Found 16 total results in 1.56s
2025-01-10 21:27:30,562 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
2025-01-10 21:27:31,380 - multi_filter_search - INFO - Query executed in 0.82s, total processing time: 2.39s
2025-01-10 21:27:32,202 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:27:32] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:29:00,768 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py', reloading
2025-01-10 21:30:44,716 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:30:44,717 - multi_filter_search - INFO - Processing condition 1: strategy=registration_date, query=1982-08-17
2025-01-10 21:30:44,724 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=040
2025-01-10 21:30:59,643 - multi_filter_search - INFO - Found 36945 total results in 14.92s
2025-01-10 21:30:59,645 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1982-08-17') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '040') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 21:31:00,769 - multi_filter_search - INFO - Query executed in 16.04s, total processing time: 16.05s
2025-01-10 21:31:01,486 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:31:01] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:31:23,504 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:31:23] "GET /api/case/73264870 HTTP/1.1" 200 -
2025-01-10 21:33:07,848 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:33:07] "GET /api/case/73232926 HTTP/1.1" 200 -
2025-01-10 21:33:54,354 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:33:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:33:54,359 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 21:33:54,360 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 21:33:56,187 - multi_filter_search - INFO - Found 36945 total results in 1.82s
2025-01-10 21:33:56,188 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 21:33:57,205 - multi_filter_search - INFO - Query executed in 2.84s, total processing time: 2.85s
2025-01-10 21:33:58,021 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:33:58] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:34:18,647 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:34:18] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:34:18,651 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:34:18,651 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 21:34:18,652 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 21:34:20,446 - multi_filter_search - INFO - Found 36945 total results in 1.79s
2025-01-10 21:34:20,449 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 21:34:21,293 - multi_filter_search - INFO - Query executed in 2.64s, total processing time: 2.64s
2025-01-10 21:34:22,084 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:34:22] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:34:34,577 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:34:34] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-10 21:40:11,593 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:40:11] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-10 21:40:20,650 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:40:20] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:40:20,654 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 21:40:20,654 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 21:40:20,656 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 21:40:20,656 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1979-01-05
2025-01-10 21:40:22,323 - multi_filter_search - INFO - Found 36945 total results in 1.67s
2025-01-10 21:40:22,325 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 21:40:23,349 - multi_filter_search - INFO - Query executed in 2.69s, total processing time: 2.70s
2025-01-10 21:40:24,167 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:40:24] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:41:00,109 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:41:00] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-10 21:41:21,634 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:41:21] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:41:21,636 - multi_filter_search - INFO - Starting search with 4 conditions, page=1, per_page=10
2025-01-10 21:41:21,636 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 21:41:21,638 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 21:41:21,638 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1979-01-05
2025-01-10 21:41:21,638 - multi_filter_search - INFO - Processing condition 4: strategy=drawing_code_type, query=1000
2025-01-10 21:41:23,218 - multi_filter_search - INFO - Found 0 total results in 1.58s
2025-01-10 21:41:23,220 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE false) AS subquery_3 ON casefile.serial_number = subquery_3.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 21:41:24,786 - multi_filter_search - INFO - Query executed in 3.15s, total processing time: 3.15s
2025-01-10 21:41:25,502 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:41:25] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:42:36,471 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:42:36] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:42:36,477 - multi_filter_search - INFO - Starting search with 4 conditions, page=1, per_page=10
2025-01-10 21:42:36,478 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 21:42:36,482 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 21:42:36,483 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1979-01-05
2025-01-10 21:42:36,484 - multi_filter_search - INFO - Processing condition 4: strategy=drawing_code_type, query=1
2025-01-10 21:42:38,411 - multi_filter_search - INFO - Found 36945 total results in 1.93s
2025-01-10 21:42:38,413 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE substr(CAST(casefileheader.mark_drawing_code AS VARCHAR), 1, 1) = '1') AS subquery_3 ON casefile.serial_number = subquery_3.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 21:42:39,545 - multi_filter_search - INFO - Query executed in 3.06s, total processing time: 3.07s
2025-01-10 21:42:40,358 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:42:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:42:57,981 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:42:57] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:42:57,983 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 21:42:57,983 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 21:42:57,984 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 21:42:59,709 - multi_filter_search - INFO - Found 36945 total results in 1.73s
2025-01-10 21:42:59,711 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 21:43:00,633 - multi_filter_search - INFO - Query executed in 2.65s, total processing time: 2.65s
2025-01-10 21:43:01,452 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:43:01] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:43:24,613 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:43:24] "GET /api/case/72371976 HTTP/1.1" 200 -
2025-01-10 21:43:40,296 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:43:40] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 21:43:40,299 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 21:43:40,300 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 21:43:40,303 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 21:43:40,304 - multi_filter_search - INFO - Processing condition 3: strategy=section_8, query=true
2025-01-10 21:43:42,001 - multi_filter_search - INFO - Found 0 total results in 1.70s
2025-01-10 21:43:42,003 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_8_filed_in = true) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 21:43:42,923 - multi_filter_search - INFO - Query executed in 2.62s, total processing time: 2.62s
2025-01-10 21:43:43,640 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 21:43:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:05:30,759 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:05:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:05:30,762 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 22:05:30,763 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:05:30,767 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 22:05:30,767 - multi_filter_search - INFO - Processing condition 3: strategy=owner_name, query=NOVA WILDCAT BULLDOG, LLC
2025-01-10 22:05:33,791 - multi_filter_search - INFO - Found 36945 total results in 3.02s
2025-01-10 22:05:33,794 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN owner ON casefile.serial_number = owner.serial_number 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'NOVA WILDCAT BULLDOG, LLC') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%NOVA WILDCAT BULLDOG, LLC%'))) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:05:35,386 - multi_filter_search - INFO - Query executed in 4.62s, total processing time: 4.62s
2025-01-10 22:05:36,776 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:05:36] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:05:53,678 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:05:53] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:05:53,681 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 22:05:53,682 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:05:53,682 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 22:05:53,683 - multi_filter_search - INFO - Processing condition 3: strategy=wordmark, query=NOVA WILDCAT
2025-01-10 22:05:55,500 - multi_filter_search - INFO - Found 0 total results in 1.82s
2025-01-10 22:05:55,502 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'NOVA WILDCAT') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%NOVA WILDCAT%')) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:05:56,464 - multi_filter_search - INFO - Query executed in 2.78s, total processing time: 2.78s
2025-01-10 22:05:57,241 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:05:57] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:06:12,935 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:06:12] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:06:12,940 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 22:06:12,940 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:06:12,942 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 22:06:12,942 - multi_filter_search - INFO - Processing condition 3: strategy=owner_name, query=NOVA WILDCAT 
2025-01-10 22:06:15,257 - multi_filter_search - INFO - Found 36945 total results in 2.31s
2025-01-10 22:06:15,259 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN owner ON casefile.serial_number = owner.serial_number 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'NOVA WILDCAT') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%NOVA WILDCAT%'))) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:06:16,797 - multi_filter_search - INFO - Query executed in 3.85s, total processing time: 3.86s
2025-01-10 22:06:17,514 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:06:17] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:06:34,678 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:06:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:06:34,684 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-10 22:06:34,684 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:06:34,686 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-10 22:06:34,687 - multi_filter_search - INFO - Processing condition 3: strategy=owner_name, query=NOVA
2025-01-10 22:06:38,916 - multi_filter_search - INFO - Found 36945 total results in 4.23s
2025-01-10 22:06:38,919 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN owner ON casefile.serial_number = owner.serial_number 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'NOVA') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%NOVA%'))) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:06:40,254 - multi_filter_search - INFO - Query executed in 5.57s, total processing time: 5.57s
2025-01-10 22:06:40,965 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:06:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:37:02,555 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:37:02] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:37:02,561 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 22:37:02,562 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:37:04,510 - multi_filter_search - INFO - Found 36945 total results in 1.94s
2025-01-10 22:37:04,512 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:37:05,709 - multi_filter_search - INFO - Query executed in 3.14s, total processing time: 3.15s
2025-01-10 22:37:06,558 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:37:06] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:41:10,236 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:41:10] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:41:10,241 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 22:41:10,241 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:41:11,972 - multi_filter_search - INFO - Found 36945 total results in 1.73s
2025-01-10 22:41:11,974 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:41:12,950 - multi_filter_search - INFO - Query executed in 2.70s, total processing time: 2.71s
2025-01-10 22:41:13,750 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:41:13] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:51:16,922 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:51:16] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:51:16,926 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 22:51:16,927 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:51:16,930 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-10 22:51:18,680 - multi_filter_search - INFO - Found 36945 total results in 1.75s
2025-01-10 22:51:18,682 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:51:19,600 - multi_filter_search - INFO - Query executed in 2.67s, total processing time: 2.67s
2025-01-10 22:51:20,317 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:51:20] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:54:18,534 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:54:18] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:54:18,538 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 22:54:18,538 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:54:18,543 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-08
2025-01-10 22:54:20,234 - multi_filter_search - INFO - Found 0 total results in 1.69s
2025-01-10 22:54:20,237 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-08') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:54:21,100 - multi_filter_search - INFO - Query executed in 2.56s, total processing time: 2.56s
2025-01-10 22:54:21,873 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:54:21] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:56:34,303 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:56:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:56:34,310 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 22:56:34,311 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:56:34,315 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-08
2025-01-10 22:56:36,017 - multi_filter_search - INFO - Found 0 total results in 1.70s
2025-01-10 22:56:36,019 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-08') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:56:36,968 - multi_filter_search - INFO - Query executed in 2.65s, total processing time: 2.66s
2025-01-10 22:56:37,758 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:56:37] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:56:49,480 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:56:49] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:56:49,483 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 22:56:49,483 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:56:49,484 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-08
2025-01-10 22:56:51,172 - multi_filter_search - INFO - Found 0 total results in 1.69s
2025-01-10 22:56:51,174 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-08') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:56:52,197 - multi_filter_search - INFO - Query executed in 2.71s, total processing time: 2.71s
2025-01-10 22:56:53,017 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:56:53] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:56:58,359 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:56:58] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:56:58,362 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 22:56:58,363 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:56:58,364 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-19
2025-01-10 22:57:00,086 - multi_filter_search - INFO - Found 0 total results in 1.72s
2025-01-10 22:57:00,088 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-19') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:57:01,208 - multi_filter_search - INFO - Query executed in 2.84s, total processing time: 2.85s
2025-01-10 22:57:02,034 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:57:02] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:57:14,048 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:57:14] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:57:14,052 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-10 22:57:14,052 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:57:16,158 - multi_filter_search - INFO - Found 36945 total results in 2.10s
2025-01-10 22:57:16,159 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:57:17,285 - multi_filter_search - INFO - Query executed in 3.23s, total processing time: 3.23s
2025-01-10 22:57:18,207 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:57:18] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:57:37,337 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:57:37] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:57:37,341 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 22:57:37,342 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:57:37,354 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-10 22:57:38,932 - multi_filter_search - INFO - Found 36945 total results in 1.58s
2025-01-10 22:57:38,934 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:57:39,927 - multi_filter_search - INFO - Query executed in 2.57s, total processing time: 2.59s
2025-01-10 22:57:40,734 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:57:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:57:55,052 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:57:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-10 22:57:55,059 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-10 22:57:55,059 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-10 22:57:55,064 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-10 22:57:56,644 - multi_filter_search - INFO - Found 36945 total results in 1.58s
2025-01-10 22:57:56,646 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-10 22:57:57,533 - multi_filter_search - INFO - Query executed in 2.47s, total processing time: 2.47s
2025-01-10 22:57:58,351 - werkzeug - INFO - 127.0.0.1 - - [10/Jan/2025 22:57:58] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 11:33:50,397 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-11 11:33:50,399 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 11:33:50,408 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1970-09-28
2025-01-11 11:33:51,655 - multi_filter_search - INFO - Found 36945 total results in 1.24s
2025-01-11 11:33:51,657 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1970-09-28') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 11:33:51,834 - multi_filter_search - INFO - Query executed in 1.42s, total processing time: 1.44s
2025-01-11 11:33:51,869 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 11:33:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 11:34:03,866 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 11:34:03] "GET /api/case/72371976 HTTP/1.1" 200 -
2025-01-11 11:34:04,006 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 11:34:04] "GET /api/case/72371976 HTTP/1.1" 200 -
2025-01-11 11:34:04,119 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 11:34:04] "GET /api/case/72371976 HTTP/1.1" 200 -
2025-01-11 11:36:28,315 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 11:36:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-11 11:36:28,320 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-11 11:36:28,320 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 11:36:28,325 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1970-09-28
2025-01-11 11:36:28,326 - multi_filter_search - INFO - Processing condition 3: strategy=section_8, query=true
2025-01-11 11:36:28,566 - multi_filter_search - INFO - Found 0 total results in 0.24s
2025-01-11 11:36:28,568 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1970-09-28') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_8_filed_in = true) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 11:36:28,769 - multi_filter_search - INFO - Query executed in 0.44s, total processing time: 0.45s
2025-01-11 11:36:28,800 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 11:36:28] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 11:59:44,773 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/search_strategies.py', reloading
2025-01-11 12:04:10,581 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-11 12:04:10,583 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 12:04:10,592 - multi_filter_search - INFO - Processing condition 2: strategy=section_8_accepted, query=true
2025-01-11 12:04:11,725 - multi_filter_search - INFO - Found 36945 total results in 1.13s
2025-01-11 12:04:11,726 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_8_accepted_in = true) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 12:04:12,050 - multi_filter_search - INFO - Query executed in 1.46s, total processing time: 1.47s
2025-01-11 12:04:12,083 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 12:04:12] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 12:04:22,611 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 12:04:22] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-11 12:05:35,304 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/search_strategies.py', reloading
2025-01-11 12:18:22,910 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-11 12:18:22,911 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 12:18:22,918 - multi_filter_search - INFO - Processing condition 2: strategy=section_8_accepted, query=true
2025-01-11 12:18:22,918 - multi_filter_search - INFO - Processing condition 3: strategy=section_15_acknowledged, query=true
2025-01-11 12:18:24,056 - multi_filter_search - INFO - Found 36945 total results in 1.14s
2025-01-11 12:18:24,058 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_8_accepted_in = true) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_acknowledged_in = true) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 12:18:24,422 - multi_filter_search - INFO - Query executed in 1.50s, total processing time: 1.51s
2025-01-11 12:18:24,457 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 12:18:24] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 12:29:00,697 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 12:29:00] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-11 12:29:00,705 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-11 12:29:00,707 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 12:29:00,711 - multi_filter_search - INFO - Processing condition 2: strategy=section_8_accepted, query=true
2025-01-11 12:29:00,712 - multi_filter_search - INFO - Processing condition 3: strategy=section_15_acknowledged, query=true
2025-01-11 12:29:01,026 - multi_filter_search - INFO - Found 36945 total results in 0.31s
2025-01-11 12:29:01,029 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_8_accepted_in = true) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.section_15_acknowledged_in = true) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 12:29:01,638 - multi_filter_search - INFO - Query executed in 0.93s, total processing time: 0.93s
2025-01-11 12:29:01,680 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 12:29:01] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 17:57:11,128 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-11 17:57:11,130 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 17:57:11,139 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=017
2025-01-11 17:57:11,174 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariahvm/trademarks/backend/multi_filter_search.py", line 101, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2805, in scalar
    ret = self.one()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
           ~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2237, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2106, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3278, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        err, dialect, engine
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2442, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 3302, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 643, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 621, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariahvm/trademarks/venv/lib/python3.13/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-11 17:57:11,189 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 17:57:11] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-11 17:57:24,346 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 17:57:24] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-11 17:57:24,348 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-11 17:57:24,348 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 17:57:24,349 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=017
2025-01-11 17:57:25,215 - multi_filter_search - INFO - Found 0 total results in 0.87s
2025-01-11 17:57:25,217 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile 
WHERE 1=0) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 17:57:25,256 - multi_filter_search - INFO - Query executed in 0.91s, total processing time: 0.91s
2025-01-11 17:57:25,288 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 17:57:25] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 17:57:59,961 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 17:57:59] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-11 17:57:59,965 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-11 17:57:59,965 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 17:57:59,967 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-11 17:58:00,439 - multi_filter_search - INFO - Found 36945 total results in 0.47s
2025-01-11 17:58:00,441 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 17:58:00,652 - multi_filter_search - INFO - Query executed in 0.68s, total processing time: 0.69s
2025-01-11 17:58:00,687 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 17:58:00] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 17:58:05,019 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 17:58:05] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-11 17:58:05,204 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 17:58:05] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-11 18:03:10,520 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/search_strategies.py', reloading
2025-01-11 18:03:29,994 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-11 18:03:29,995 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 18:03:30,000 - multi_filter_search - INFO - Processing condition 2: strategy=international_class, query=017
2025-01-11 18:03:31,061 - multi_filter_search - INFO - Found 36945 total results in 1.06s
2025-01-11 18:03:31,062 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 18:03:31,234 - multi_filter_search - INFO - Query executed in 1.23s, total processing time: 1.24s
2025-01-11 18:03:31,268 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:03:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 18:03:42,047 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:03:42] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-11 18:03:42,053 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-11 18:03:42,054 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 18:03:42,056 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=017
2025-01-11 18:03:42,178 - multi_filter_search - INFO - Found 0 total results in 0.12s
2025-01-11 18:03:42,180 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile 
WHERE 1=0) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 18:03:42,230 - multi_filter_search - INFO - Query executed in 0.17s, total processing time: 0.18s
2025-01-11 18:03:42,265 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:03:42] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 18:13:36,766 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/coordinated_class_config.py', reloading
2025-01-11 18:13:44,643 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-11 18:13:44,644 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 18:13:44,646 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=017
2025-01-11 18:13:45,498 - multi_filter_search - INFO - Found 0 total results in 0.85s
2025-01-11 18:13:45,499 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile 
WHERE 1=0) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 18:13:45,546 - multi_filter_search - INFO - Query executed in 0.90s, total processing time: 0.90s
2025-01-11 18:13:45,578 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:13:45] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 18:13:57,831 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/coordinated_class_config.py', reloading
2025-01-11 18:15:14,448 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-11 18:15:14,449 - multi_filter_search - INFO - Processing condition 1: strategy=coordinated_class, query=017
2025-01-11 18:15:15,307 - multi_filter_search - INFO - Found 0 total results in 0.86s
2025-01-11 18:15:15,308 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile 
WHERE 1=0) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 18:15:15,353 - multi_filter_search - INFO - Query executed in 0.90s, total processing time: 0.91s
2025-01-11 18:15:15,387 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:15:15] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 18:17:29,878 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-11 18:17:29,880 - multi_filter_search - INFO - Processing condition 1: strategy=coordinated_class, query=017
2025-01-11 18:17:30,820 - multi_filter_search - INFO - Found 0 total results in 0.94s
2025-01-11 18:17:30,821 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile 
WHERE 1=0) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 18:17:30,865 - multi_filter_search - INFO - Query executed in 0.98s, total processing time: 0.99s
2025-01-11 18:17:30,904 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:17:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 18:20:29,928 - werkzeug - INFO -  * Detected change in '/Users/davidzachariahvm/trademarks/backend/coordinated_class_config.py', reloading
2025-01-11 18:20:33,549 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-11 18:20:33,549 - multi_filter_search - INFO - Processing condition 1: strategy=coordinated_class, query=017
2025-01-11 18:20:54,665 - multi_filter_search - INFO - Found 36945 total results in 21.11s
2025-01-11 18:20:54,670 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('001', '002', '006', '019', '035', '037', '040', '042')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 18:20:54,816 - multi_filter_search - INFO - Query executed in 21.27s, total processing time: 21.27s
2025-01-11 18:20:54,850 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:20:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-11 18:21:07,380 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:21:07] "GET /api/case/73246775 HTTP/1.1" 200 -
2025-01-11 18:39:50,444 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-11 18:39:50,445 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-11 18:39:51,619 - multi_filter_search - INFO - Found 36945 total results in 1.17s
2025-01-11 18:39:51,621 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-11 18:39:51,870 - multi_filter_search - INFO - Query executed in 1.42s, total processing time: 1.43s
2025-01-11 18:39:51,905 - werkzeug - INFO - 127.0.0.1 - - [11/Jan/2025 18:39:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-12 13:37:11,819 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-12 13:37:11,819 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=74160632
2025-01-12 13:37:12,700 - multi_filter_search - INFO - Found 0 total results in 0.88s
2025-01-12 13:37:12,701 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '74160632') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-12 13:37:12,745 - multi_filter_search - INFO - Query executed in 0.92s, total processing time: 0.93s
2025-01-12 13:37:12,779 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 13:37:12] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-12 13:37:18,992 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 13:37:18] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-12 13:37:18,995 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-12 13:37:18,995 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=74160632
2025-01-12 13:37:19,070 - multi_filter_search - INFO - Found 0 total results in 0.07s
2025-01-12 13:37:19,072 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '74160632') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-12 13:37:19,115 - multi_filter_search - INFO - Query executed in 0.12s, total processing time: 0.12s
2025-01-12 13:37:19,149 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 13:37:19] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-12 13:38:15,832 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 13:38:15] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-12 13:38:15,836 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-12 13:38:15,837 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-12 13:38:16,228 - multi_filter_search - INFO - Found 36945 total results in 0.39s
2025-01-12 13:38:16,229 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-12 13:38:16,507 - multi_filter_search - INFO - Query executed in 0.67s, total processing time: 0.67s
2025-01-12 13:38:16,545 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 13:38:16] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-12 13:38:27,763 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 13:38:27] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-12 13:38:27,952 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 13:38:27] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-12 15:58:10,541 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-12 15:58:10,542 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-12 15:58:10,548 - multi_filter_search - INFO - Processing condition 2: strategy=, query=sd
2025-01-12 15:58:10,549 - multi_filter_search - WARNING - Unknown strategy: 
2025-01-12 15:58:11,599 - multi_filter_search - INFO - Found 36945 total results in 1.05s
2025-01-12 15:58:11,600 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-12 15:58:11,933 - multi_filter_search - INFO - Query executed in 1.38s, total processing time: 1.39s
2025-01-12 15:58:11,969 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 15:58:11] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-12 16:00:43,107 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 16:00:43] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-12 16:00:43,113 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-12 16:00:43,113 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-12 16:00:43,341 - multi_filter_search - INFO - Found 36945 total results in 0.22s
2025-01-12 16:00:43,344 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-12 16:00:43,551 - multi_filter_search - INFO - Query executed in 0.43s, total processing time: 0.44s
2025-01-12 16:00:43,586 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 16:00:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-12 16:00:47,671 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 16:00:47] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-12 16:00:47,952 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 16:00:47] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-12 16:47:43,664 - werkzeug - INFO - 127.0.0.1 - - [12/Jan/2025 16:47:43] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 13:53:16,590 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 13:53:16,591 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 13:53:17,674 - multi_filter_search - INFO - Found 36945 total results in 1.08s
2025-01-13 13:53:17,676 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 13:53:17,983 - multi_filter_search - INFO - Query executed in 1.39s, total processing time: 1.39s
2025-01-13 13:53:18,014 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 13:53:18] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 13:56:22,176 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 13:56:22] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 13:56:22,257 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 13:56:22] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 14:35:45,416 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 14:35:45] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 14:35:45,420 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 14:35:45,420 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 14:35:45,695 - multi_filter_search - INFO - Found 36945 total results in 0.27s
2025-01-13 14:35:45,702 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 14:35:45,919 - multi_filter_search - INFO - Query executed in 0.49s, total processing time: 0.50s
2025-01-13 14:35:45,954 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 14:35:45] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 14:35:47,696 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 14:35:47] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 14:35:47,768 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 14:35:47] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 14:41:24,528 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 14:41:24] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 15:42:39,353 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:42:39] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 15:42:39,372 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:42:39] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 15:42:40,169 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:42:40] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 15:48:08,923 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:48:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:48:08,927 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:48:08,928 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 15:48:09,306 - multi_filter_search - INFO - Found 36945 total results in 0.37s
2025-01-13 15:48:09,312 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 15:48:09,636 - multi_filter_search - INFO - Query executed in 0.70s, total processing time: 0.71s
2025-01-13 15:48:09,669 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:48:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:48:11,179 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:48:11] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 15:48:11,271 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:48:11] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 15:48:52,712 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:48:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:48:52,717 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:48:52,717 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F Feinman
2025-01-13 15:48:52,717 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 15:48:52,717 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 15:48:52,718 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:48:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:49:00,069 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:49:00] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:49:00,075 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:49:00,075 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Bob
2025-01-13 15:49:00,075 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 15:49:00,075 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 15:49:00,078 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:49:00] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:50:23,830 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:50:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:50:23,832 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:50:23,832 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Bob
2025-01-13 15:50:23,832 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 15:50:23,833 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 15:50:23,833 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:50:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:50:30,807 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:50:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:50:30,810 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:50:30,810 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=bob
2025-01-13 15:50:30,810 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 15:50:30,810 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 15:50:30,811 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:50:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:51:31,373 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:51:31,374 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=bob
2025-01-13 15:51:31,374 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 15:51:31,374 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 15:51:31,375 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:51:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:53:08,520 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:53:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:53:08,524 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:53:08,524 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=bob
2025-01-13 15:53:08,525 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 15:53:08,525 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 15:53:08,525 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:53:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:53:14,803 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:53:14,803 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=bob
2025-01-13 15:53:14,803 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 15:53:14,803 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 15:53:14,805 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:53:14] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:53:16,427 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:53:16,427 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=bob
2025-01-13 15:53:16,427 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 15:53:16,428 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 15:53:16,428 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:53:16] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:56:55,483 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:56:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 15:56:55,486 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 15:56:55,486 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 15:56:56,472 - multi_filter_search - INFO - Found 36945 total results in 0.98s
2025-01-13 15:56:56,477 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 15:56:56,724 - multi_filter_search - INFO - Query executed in 1.23s, total processing time: 1.24s
2025-01-13 15:56:56,758 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 15:56:56] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:14:52,208 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:14:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:14:52,211 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:14:52,211 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=bob
2025-01-13 16:14:52,211 - multi_filter_search - WARNING - Unknown strategy: attorney_name
2025-01-13 16:14:52,211 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 16:14:52,212 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:14:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:16:35,237 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_engine.py', reloading
2025-01-13 16:16:39,689 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:16:39,689 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=bob
2025-01-13 16:16:40,610 - multi_filter_search - INFO - Found 36945 total results in 0.92s
2025-01-13 16:16:40,616 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%bob%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 16:16:40,787 - multi_filter_search - INFO - Query executed in 1.09s, total processing time: 1.10s
2025-01-13 16:16:40,823 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:16:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:16:43,572 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:16:43] "GET /api/case/73179936 HTTP/1.1" 200 -
2025-01-13 16:16:43,824 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:16:43] "GET /api/case/73179936 HTTP/1.1" 200 -
2025-01-13 16:17:03,508 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:17:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:17:03,513 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:17:03,513 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 16:17:04,095 - multi_filter_search - INFO - Found 36945 total results in 0.58s
2025-01-13 16:17:04,102 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 16:17:04,502 - multi_filter_search - INFO - Query executed in 0.99s, total processing time: 0.99s
2025-01-13 16:17:04,536 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:17:04] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:17:06,089 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:17:06] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:17:06,116 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:17:06] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:19:26,336 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:19:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:19:26,340 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:19:26,340 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=bob
2025-01-13 16:19:26,558 - multi_filter_search - INFO - Found 36945 total results in 0.21s
2025-01-13 16:19:26,564 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%bob%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 16:19:26,749 - multi_filter_search - INFO - Query executed in 0.41s, total processing time: 0.41s
2025-01-13 16:19:26,791 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:19:26] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:19:32,722 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:19:32] "GET /api/case/73179936 HTTP/1.1" 200 -
2025-01-13 16:19:32,753 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:19:32] "GET /api/case/73179936 HTTP/1.1" 200 -
2025-01-13 16:20:50,061 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:20:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:20:50,064 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:20:50,065 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 16:20:50,289 - multi_filter_search - INFO - Found 36945 total results in 0.22s
2025-01-13 16:20:50,293 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 16:20:50,528 - multi_filter_search - INFO - Query executed in 0.46s, total processing time: 0.46s
2025-01-13 16:20:50,572 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:20:50] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:20:51,853 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:20:51] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:20:51,898 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:20:51] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:21:39,327 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:21:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:21:39,330 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:21:39,330 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 16:21:39,613 - multi_filter_search - INFO - Found 36945 total results in 0.28s
2025-01-13 16:21:39,618 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 16:21:39,965 - multi_filter_search - INFO - Query executed in 0.63s, total processing time: 0.63s
2025-01-13 16:21:40,000 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:21:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:21:41,437 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:21:41] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:21:41,438 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:21:41] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:22:38,588 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:22:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:22:38,592 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:22:38,592 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 16:22:38,848 - multi_filter_search - INFO - Found 36945 total results in 0.26s
2025-01-13 16:22:38,853 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 16:22:39,283 - multi_filter_search - INFO - Query executed in 0.69s, total processing time: 0.69s
2025-01-13 16:22:39,319 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:22:39] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:22:41,069 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:22:41] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:22:41,070 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:22:41] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:26:57,030 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:26:57] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:26:57,033 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:26:57,033 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 16:26:57,307 - multi_filter_search - INFO - Found 36945 total results in 0.27s
2025-01-13 16:26:57,311 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 16:26:57,540 - multi_filter_search - INFO - Query executed in 0.51s, total processing time: 0.51s
2025-01-13 16:26:57,574 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:26:57] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:26:58,933 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:26:58] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:26:58,986 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:26:58] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:27:00,412 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-13 16:27:00,413 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-13 16:27:00,413 - multi_filter_search - INFO - Processing condition 1: strategy=attorney, query=Howard F. Feinman
2025-01-13 16:27:00,413 - multi_filter_search - INFO - Processing condition 1: strategy=attorney, query=Howard F. Feinman
2025-01-13 16:27:00,414 - multi_filter_search - WARNING - Unknown strategy: attorney
2025-01-13 16:27:00,414 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 16:27:00,414 - multi_filter_search - WARNING - Unknown strategy: attorney
2025-01-13 16:27:00,415 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:27:00] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:27:00,415 - multi_filter_search - WARNING - No valid queries generated
2025-01-13 16:27:00,415 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:27:00] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:27:53,907 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:27:53] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:27:53,910 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-13 16:27:53,910 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F. Feinman
2025-01-13 16:27:54,443 - multi_filter_search - INFO - Found 36945 total results in 0.53s
2025-01-13 16:27:54,450 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Howard F. Feinman') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Howard F. Feinman%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 0
2025-01-13 16:27:54,653 - multi_filter_search - INFO - Query executed in 0.74s, total processing time: 0.74s
2025-01-13 16:27:54,689 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:27:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:28:08,244 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:28:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:28:08,246 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-13 16:28:08,246 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F. Feinman
2025-01-13 16:28:08,622 - multi_filter_search - INFO - Found 36945 total results in 0.38s
2025-01-13 16:28:08,629 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Howard F. Feinman') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Howard F. Feinman%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 0
2025-01-13 16:28:08,984 - multi_filter_search - INFO - Query executed in 0.74s, total processing time: 0.74s
2025-01-13 16:28:09,017 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:28:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:29:21,631 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:29:21] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:29:21,634 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 16:29:21,635 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 16:29:21,869 - multi_filter_search - INFO - Found 36945 total results in 0.23s
2025-01-13 16:29:21,876 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 16:29:22,116 - multi_filter_search - INFO - Query executed in 0.48s, total processing time: 0.48s
2025-01-13 16:29:22,147 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:29:22] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 16:29:23,866 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:29:23] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 16:29:23,900 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 16:29:23] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:25:57,981 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 23:25:57,981 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 23:25:57,985 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 101, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-13 23:25:57,999 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:25:57] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-13 23:26:06,570 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:26:06] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:26:06,575 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 23:26:06,576 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 23:26:07,452 - multi_filter_search - INFO - Found 36945 total results in 0.87s
2025-01-13 23:26:07,457 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 23:26:07,697 - multi_filter_search - INFO - Query executed in 1.12s, total processing time: 1.12s
2025-01-13 23:26:07,730 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:26:07] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:26:09,615 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:26:09] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:26:09,782 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:26:09] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:32:11,269 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:11] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:32:11,274 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 23:32:11,274 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=coonhound bloodlines
2025-01-13 23:32:11,546 - multi_filter_search - INFO - Found 36945 total results in 0.27s
2025-01-13 23:32:11,552 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'coonhound bloodlines') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%coonhound bloodlines%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 23:32:11,852 - multi_filter_search - INFO - Query executed in 0.57s, total processing time: 0.58s
2025-01-13 23:32:11,888 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:11] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:32:14,384 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:14] "GET /api/case/73054589 HTTP/1.1" 200 -
2025-01-13 23:32:14,443 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:14] "GET /api/case/73054589 HTTP/1.1" 200 -
2025-01-13 23:32:30,143 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:32:30,144 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:32:30,160 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-13 23:32:30,160 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-13 23:32:30,160 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Timothy K. Kroninger
2025-01-13 23:32:30,160 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Timothy K. Kroninger
2025-01-13 23:32:30,797 - multi_filter_search - INFO - Found 36945 total results in 0.64s
2025-01-13 23:32:30,798 - multi_filter_search - INFO - Found 36945 total results in 0.63s
2025-01-13 23:32:30,803 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Timothy K. Kroninger') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Timothy K. Kroninger%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 0
2025-01-13 23:32:30,806 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Timothy K. Kroninger') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Timothy K. Kroninger%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 0
2025-01-13 23:32:31,206 - multi_filter_search - INFO - Query executed in 1.04s, total processing time: 1.05s
2025-01-13 23:32:31,207 - multi_filter_search - INFO - Query executed in 1.05s, total processing time: 1.05s
2025-01-13 23:32:31,238 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:32:31,239 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:32:34,994 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:34] "GET /api/case/73244000 HTTP/1.1" 200 -
2025-01-13 23:32:35,033 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:32:35] "GET /api/case/73244000 HTTP/1.1" 200 -
2025-01-13 23:34:46,234 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:34:46] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:34:46,237 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 23:34:46,238 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 23:34:46,479 - multi_filter_search - INFO - Found 36945 total results in 0.24s
2025-01-13 23:34:46,486 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 23:34:46,692 - multi_filter_search - INFO - Query executed in 0.45s, total processing time: 0.45s
2025-01-13 23:34:46,726 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:34:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:34:48,006 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:34:48] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:34:48,048 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:34:48] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:44:05,870 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:44:05] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:52:55,520 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:52:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:52:55,523 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 23:52:55,523 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 23:52:55,769 - multi_filter_search - INFO - Found 36945 total results in 0.24s
2025-01-13 23:52:55,772 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 23:52:56,035 - multi_filter_search - INFO - Query executed in 0.51s, total processing time: 0.51s
2025-01-13 23:52:56,067 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:52:56] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:52:58,491 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:52:58] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:52:58,493 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:52:58] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:59:12,329 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:59:12] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:59:12,332 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-13 23:59:12,333 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-13 23:59:12,555 - multi_filter_search - INFO - Found 36945 total results in 0.22s
2025-01-13 23:59:12,561 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-13 23:59:12,781 - multi_filter_search - INFO - Query executed in 0.44s, total processing time: 0.45s
2025-01-13 23:59:12,816 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:59:12] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-13 23:59:14,598 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:59:14] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-13 23:59:14,599 - werkzeug - INFO - 127.0.0.1 - - [13/Jan/2025 23:59:14] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-14 13:29:18,695 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-14 13:29:18,696 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F. Feinman
2025-01-14 13:29:20,261 - multi_filter_search - INFO - Found 36945 total results in 1.56s
2025-01-14 13:29:20,269 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Howard F. Feinman') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Howard F. Feinman%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 0
2025-01-14 13:29:20,602 - multi_filter_search - INFO - Query executed in 1.90s, total processing time: 1.91s
2025-01-14 13:29:20,634 - werkzeug - INFO - 127.0.0.1 - - [14/Jan/2025 13:29:20] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-14 13:29:28,741 - werkzeug - INFO - 127.0.0.1 - - [14/Jan/2025 13:29:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-14 13:29:28,744 - multi_filter_search - INFO - Starting search with 1 conditions, page=2, per_page=20
2025-01-14 13:29:28,744 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F. Feinman
2025-01-14 13:29:29,206 - multi_filter_search - INFO - Found 36945 total results in 0.46s
2025-01-14 13:29:29,212 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Howard F. Feinman') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Howard F. Feinman%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 20
2025-01-14 13:29:29,637 - multi_filter_search - INFO - Query executed in 0.89s, total processing time: 0.89s
2025-01-14 13:29:29,700 - werkzeug - INFO - 127.0.0.1 - - [14/Jan/2025 13:29:29] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-14 13:29:31,625 - multi_filter_search - INFO - Starting search with 1 conditions, page=3, per_page=20
2025-01-14 13:29:31,625 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F. Feinman
2025-01-14 13:29:32,062 - multi_filter_search - INFO - Found 36945 total results in 0.43s
2025-01-14 13:29:32,071 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Howard F. Feinman') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Howard F. Feinman%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 40
2025-01-14 13:29:32,294 - multi_filter_search - INFO - Query executed in 0.67s, total processing time: 0.67s
2025-01-14 13:29:32,330 - werkzeug - INFO - 127.0.0.1 - - [14/Jan/2025 13:29:32] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-14 13:29:36,452 - werkzeug - INFO - 127.0.0.1 - - [14/Jan/2025 13:29:36] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-14 13:29:36,731 - werkzeug - INFO - 127.0.0.1 - - [14/Jan/2025 13:29:36] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-16 14:32:46,069 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-16 14:32:46,069 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=73229966
2025-01-16 14:32:46,187 - multi_filter_search - INFO - Found 36945 total results in 0.11s
2025-01-16 14:32:46,189 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73229966') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 14:32:46,240 - multi_filter_search - INFO - Query executed in 0.17s, total processing time: 0.17s
2025-01-16 14:32:46,277 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 14:32:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 14:32:48,302 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 14:32:48] "GET /api/case/73229966 HTTP/1.1" 200 -
2025-01-16 14:32:48,518 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 14:32:48] "GET /api/case/73229966 HTTP/1.1" 200 -
2025-01-16 14:35:45,790 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 14:35:45] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 14:35:45,794 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-16 14:35:45,795 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=73141134
2025-01-16 14:35:45,894 - multi_filter_search - INFO - Found 36945 total results in 0.10s
2025-01-16 14:35:45,899 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73141134') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 14:35:45,954 - multi_filter_search - INFO - Query executed in 0.16s, total processing time: 0.16s
2025-01-16 14:35:46,008 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 14:35:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 14:35:47,896 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 14:35:47] "GET /api/case/73141134 HTTP/1.1" 200 -
2025-01-16 14:35:47,896 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 14:35:47] "GET /api/case/73141134 HTTP/1.1" 200 -
2025-01-16 15:42:05,358 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 15:42:05] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 15:42:05,362 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-16 15:42:05,362 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=73054761
2025-01-16 15:42:05,491 - multi_filter_search - INFO - Found 36945 total results in 0.13s
2025-01-16 15:42:05,495 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73054761') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 15:42:05,543 - multi_filter_search - INFO - Query executed in 0.18s, total processing time: 0.18s
2025-01-16 15:42:05,732 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 15:42:05] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 15:42:07,398 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 15:42:07] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 15:42:07,398 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 15:42:07] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 15:55:55,080 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 15:55:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 15:55:55,083 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-16 15:55:55,083 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=73055025
2025-01-16 15:55:55,183 - multi_filter_search - INFO - Found 36945 total results in 0.10s
2025-01-16 15:55:55,188 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73055025') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 15:55:55,233 - multi_filter_search - INFO - Query executed in 0.15s, total processing time: 0.15s
2025-01-16 15:55:55,291 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 15:55:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 15:55:57,470 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 15:55:57] "GET /api/case/73055025 HTTP/1.1" 200 -
2025-01-16 15:55:57,560 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 15:55:57] "GET /api/case/73055025 HTTP/1.1" 200 -
2025-01-16 16:06:52,045 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:06:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 16:06:52,048 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-16 16:06:52,049 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=73054761
2025-01-16 16:06:52,156 - multi_filter_search - INFO - Found 36945 total results in 0.11s
2025-01-16 16:06:52,160 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73054761') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 16:06:52,205 - multi_filter_search - INFO - Query executed in 0.15s, total processing time: 0.16s
2025-01-16 16:06:52,257 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:06:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 16:06:53,970 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:06:53] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 16:06:53,977 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:06:53] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 16:30:40,274 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:30:40] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 16:30:40,277 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-16 16:30:40,278 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=73069742
2025-01-16 16:30:40,413 - multi_filter_search - INFO - Found 36945 total results in 0.13s
2025-01-16 16:30:40,418 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73069742') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 16:30:40,462 - multi_filter_search - INFO - Query executed in 0.18s, total processing time: 0.19s
2025-01-16 16:30:40,500 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:30:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 16:30:42,035 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:30:42] "GET /api/case/73069742 HTTP/1.1" 200 -
2025-01-16 16:30:42,262 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:30:42] "GET /api/case/73069742 HTTP/1.1" 200 -
2025-01-16 16:36:11,835 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 16:36:11] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 17:13:00,164 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 17:13:00] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 17:13:00,189 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 17:13:00] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 17:13:00,875 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 17:13:00] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 17:13:40,579 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 17:13:40] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 17:14:07,335 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 17:14:07] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 20:20:43,518 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-16 20:20:43,518 - multi_filter_search - INFO - Processing condition 1: strategy=serial_number, query=73054761
2025-01-16 20:20:44,286 - multi_filter_search - INFO - Found 36945 total results in 0.76s
2025-01-16 20:20:44,291 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73054761') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 20:20:44,340 - multi_filter_search - INFO - Query executed in 0.82s, total processing time: 0.82s
2025-01-16 20:20:44,380 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:20:44] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 20:20:46,678 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:20:46] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 20:20:46,900 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:20:46] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 20:28:11,576 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:28:11] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 20:28:38,007 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:28:38] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 20:29:02,620 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:29:02] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 20:30:30,161 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:30:30] "GET /api/case/73054761 HTTP/1.1" 200 -
2025-01-16 20:56:24,056 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:56:24] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 20:56:24,061 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-16 20:56:24,061 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 20:56:24,450 - multi_filter_search - INFO - Found 36945 total results in 0.38s
2025-01-16 20:56:24,455 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 20:56:24,835 - multi_filter_search - INFO - Query executed in 0.77s, total processing time: 0.77s
2025-01-16 20:56:24,874 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:56:24] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 20:56:45,265 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:56:45] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 20:56:45,268 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-16 20:56:45,269 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 20:56:45,271 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=017
2025-01-16 20:56:45,570 - multi_filter_search - INFO - Found 36945 total results in 0.30s
2025-01-16 20:56:45,578 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('001', '002', '006', '019', '035', '037', '040', '042')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 20:56:45,837 - multi_filter_search - INFO - Query executed in 0.57s, total processing time: 0.57s
2025-01-16 20:56:45,871 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:56:45] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 20:56:52,432 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:56:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 20:56:52,436 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-16 20:56:52,436 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 20:56:52,439 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=007
2025-01-16 20:56:53,146 - multi_filter_search - INFO - Found 36945 total results in 0.71s
2025-01-16 20:56:53,153 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('008', '011', '012', '035', '037', '040', '042')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 20:56:53,367 - multi_filter_search - INFO - Query executed in 0.93s, total processing time: 0.93s
2025-01-16 20:56:53,410 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:56:53] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 20:56:56,538 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:56:56] "GET /api/case/72371976 HTTP/1.1" 200 -
2025-01-16 20:56:56,568 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 20:56:56] "GET /api/case/72371976 HTTP/1.1" 200 -
2025-01-16 21:01:13,254 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:01:13] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:01:13,258 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-16 21:01:13,259 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 21:01:13,262 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=017
2025-01-16 21:01:13,701 - multi_filter_search - INFO - Found 36945 total results in 0.44s
2025-01-16 21:01:13,707 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('001', '002', '006', '019', '035', '037', '040', '042')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 21:01:14,060 - multi_filter_search - INFO - Query executed in 0.80s, total processing time: 0.80s
2025-01-16 21:01:14,225 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:01:14] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:01:49,780 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:01:49] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:01:49,783 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-16 21:01:49,783 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 21:01:49,785 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1976-12-17
2025-01-16 21:01:49,792 - multi_filter_search - INFO - Processing condition 3: strategy=coordinated_class, query=001
2025-01-16 21:01:50,160 - multi_filter_search - INFO - Found 0 total results in 0.37s
2025-01-16 21:01:50,167 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1976-12-17') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('005', '017', '035', '042', '044')) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 21:01:50,596 - multi_filter_search - INFO - Query executed in 0.80s, total processing time: 0.81s
2025-01-16 21:01:50,632 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:01:50] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:02:08,930 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:02:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:02:08,933 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-16 21:02:08,933 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 21:02:08,934 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1976-12-17
2025-01-16 21:02:09,145 - multi_filter_search - INFO - Found 36945 total results in 0.21s
2025-01-16 21:02:09,150 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1976-12-17') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 21:02:09,304 - multi_filter_search - INFO - Query executed in 0.37s, total processing time: 0.37s
2025-01-16 21:02:09,344 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:02:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:02:15,249 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:02:15] "GET /api/case/73109952 HTTP/1.1" 200 -
2025-01-16 21:02:22,983 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:02:22] "GET /api/case/73109951 HTTP/1.1" 200 -
2025-01-16 21:02:42,360 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:02:42] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:02:42,363 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-16 21:02:42,364 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 21:02:42,367 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1976-12-17
2025-01-16 21:02:42,367 - multi_filter_search - INFO - Processing condition 3: strategy=coordinated_class, query=006
2025-01-16 21:02:42,587 - multi_filter_search - INFO - Found 0 total results in 0.22s
2025-01-16 21:02:42,594 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1976-12-17') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('011', '017', '019', '020', '035', '037', '040', '042')) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 21:02:42,841 - multi_filter_search - INFO - Query executed in 0.47s, total processing time: 0.48s
2025-01-16 21:02:42,873 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:02:42] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:04:22,960 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:04:22] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:04:22,963 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-16 21:04:22,963 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 21:04:22,965 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=006
2025-01-16 21:04:23,246 - multi_filter_search - INFO - Found 36945 total results in 0.28s
2025-01-16 21:04:23,254 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('011', '017', '019', '020', '035', '037', '040', '042')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 21:04:23,438 - multi_filter_search - INFO - Query executed in 0.47s, total processing time: 0.47s
2025-01-16 21:04:23,563 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:04:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:04:46,356 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:04:46] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:04:46,360 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-16 21:04:46,360 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 21:04:46,361 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=006
2025-01-16 21:04:46,362 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1976-12-17
2025-01-16 21:04:46,644 - multi_filter_search - INFO - Found 0 total results in 0.28s
2025-01-16 21:04:46,651 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('011', '017', '019', '020', '035', '037', '040', '042')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1976-12-17') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 21:04:46,845 - multi_filter_search - INFO - Query executed in 0.48s, total processing time: 0.49s
2025-01-16 21:04:46,879 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:04:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:04:48,576 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-16 21:04:48,576 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 21:04:48,578 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1976-12-17
2025-01-16 21:04:48,833 - multi_filter_search - INFO - Found 36945 total results in 0.25s
2025-01-16 21:04:48,838 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1976-12-17') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 21:04:49,018 - multi_filter_search - INFO - Query executed in 0.44s, total processing time: 0.44s
2025-01-16 21:04:49,052 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:04:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:04:55,190 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:04:55] "GET /api/case/73109952 HTTP/1.1" 200 -
2025-01-16 21:06:12,890 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:06:12] "GET /api/case/73109952 HTTP/1.1" 200 -
2025-01-16 21:06:23,709 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:06:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-16 21:06:23,712 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-16 21:06:23,712 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-16 21:06:23,714 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1976-12-17
2025-01-16 21:06:23,716 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=006
2025-01-16 21:06:24,112 - multi_filter_search - INFO - Found 36945 total results in 0.40s
2025-01-16 21:06:24,120 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1976-12-17') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '006') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-16 21:06:24,312 - multi_filter_search - INFO - Query executed in 0.60s, total processing time: 0.60s
2025-01-16 21:06:24,349 - werkzeug - INFO - 127.0.0.1 - - [16/Jan/2025 21:06:24] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:05:24,573 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 14:05:24,573 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 14:05:26,302 - multi_filter_search - INFO - Found 36945 total results in 1.73s
2025-01-17 14:05:26,308 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:05:26,566 - multi_filter_search - INFO - Query executed in 1.99s, total processing time: 1.99s
2025-01-17 14:05:26,828 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:05:26] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:05:29,512 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:05:29] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-17 14:06:21,641 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:06:21] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:06:21,644 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 14:06:21,645 - multi_filter_search - INFO - Processing condition 1: strategy=design_code, query=030122
2025-01-17 14:06:21,646 - multi_filter_search - ERROR - Error in multi_filter_search: isinstance() arg 2 must be a type, a tuple of types, or a union
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 61, in multi_filter_search
    query = strategy.build_query(session)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py", line 561, in build_query
    query = query.filter(*[f.params(**self._query_params) if isinstance(f, text) else f for f in filters])
                                                             ^^^^^^^^^^^^^^^^^^^
TypeError: isinstance() arg 2 must be a type, a tuple of types, or a union
2025-01-17 14:06:21,649 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:06:21] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-17 14:07:19,003 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-17 14:07:36,064 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 14:07:36,065 - multi_filter_search - INFO - Processing condition 1: strategy=design_code, query=030122
2025-01-17 14:07:37,154 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.UndefinedFunction) operator does not exist: text = integer
LINE 5: WHERE designsearch.design_search_code = 30122) AS subquery_0...
                                              ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT count(DISTINCT casefile.serial_number) AS count_1 
FROM (SELECT DISTINCT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefile.transaction_date AS transaction_date, casefile.application_information_id AS application_information_id 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE designsearch.design_search_code = %(design_search_code_1)s) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number) AS anon_1, casefile]
[parameters: {'design_search_code_1': 30122}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: operator does not exist: text = integer
LINE 5: WHERE designsearch.design_search_code = 30122) AS subquery_0...
                                              ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 101, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) operator does not exist: text = integer
LINE 5: WHERE designsearch.design_search_code = 30122) AS subquery_0...
                                              ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT count(DISTINCT casefile.serial_number) AS count_1 
FROM (SELECT DISTINCT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefile.transaction_date AS transaction_date, casefile.application_information_id AS application_information_id 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE designsearch.design_search_code = %(design_search_code_1)s) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number) AS anon_1, casefile]
[parameters: {'design_search_code_1': 30122}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-17 14:07:37,197 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:07:37] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-17 14:07:40,770 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:07:40] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-17 14:07:48,379 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:07:48] "GET /api/case/73058964 HTTP/1.1" 200 -
2025-01-17 14:09:10,266 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:09:10] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:09:10,270 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 14:09:10,270 - multi_filter_search - INFO - Processing condition 1: strategy=design_code, query=030122
2025-01-17 14:09:10,353 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.UndefinedFunction) operator does not exist: text = integer
LINE 5: WHERE designsearch.design_search_code = 30122) AS subquery_0...
                                              ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT count(DISTINCT casefile.serial_number) AS count_1 
FROM (SELECT DISTINCT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefile.transaction_date AS transaction_date, casefile.application_information_id AS application_information_id 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE designsearch.design_search_code = %(design_search_code_1)s) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number) AS anon_1, casefile]
[parameters: {'design_search_code_1': 30122}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: operator does not exist: text = integer
LINE 5: WHERE designsearch.design_search_code = 30122) AS subquery_0...
                                              ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 101, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) operator does not exist: text = integer
LINE 5: WHERE designsearch.design_search_code = 30122) AS subquery_0...
                                              ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT count(DISTINCT casefile.serial_number) AS count_1 
FROM (SELECT DISTINCT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefile.transaction_date AS transaction_date, casefile.application_information_id AS application_information_id 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE designsearch.design_search_code = %(design_search_code_1)s) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number) AS anon_1, casefile]
[parameters: {'design_search_code_1': 30122}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-17 14:09:10,392 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:09:10] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-17 14:10:29,994 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-17 14:10:55,782 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 14:10:55,782 - multi_filter_search - INFO - Processing condition 1: strategy=design_code, query=030122
2025-01-17 14:10:57,115 - multi_filter_search - INFO - Found 36945 total results in 1.33s
2025-01-17 14:10:57,120 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE LPAD(CAST(design_search_code AS TEXT), 6, '0') = '030122') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:10:57,197 - multi_filter_search - INFO - Query executed in 1.41s, total processing time: 1.41s
2025-01-17 14:10:57,234 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:10:57] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:11:03,310 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:11:03] "GET /api/case/73256496 HTTP/1.1" 200 -
2025-01-17 14:11:12,107 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:11:12] "GET /api/case/73114048 HTTP/1.1" 200 -
2025-01-17 14:11:19,198 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:11:19] "GET /api/case/73109951 HTTP/1.1" 200 -
2025-01-17 14:11:28,323 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:11:28] "GET /api/case/73216575 HTTP/1.1" 200 -
2025-01-17 14:11:56,172 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:11:56] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:11:56,177 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 14:11:56,177 - multi_filter_search - INFO - Processing condition 1: strategy=design_code, query=0301XX
2025-01-17 14:11:56,885 - multi_filter_search - INFO - Found 36945 total results in 0.71s
2025-01-17 14:11:56,891 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE LPAD(CAST(design_search_code AS TEXT), 6, '0') LIKE '0301%') AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:11:56,971 - multi_filter_search - INFO - Query executed in 0.79s, total processing time: 0.79s
2025-01-17 14:11:57,016 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:11:57] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:12:01,436 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:12:01] "GET /api/case/73258180 HTTP/1.1" 200 -
2025-01-17 14:12:11,292 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:12:11] "GET /api/case/73249846 HTTP/1.1" 200 -
2025-01-17 14:18:42,814 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-17 14:21:35,334 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 14:21:35,335 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 14:21:36,611 - multi_filter_search - INFO - Found 36945 total results in 1.26s
2025-01-17 14:21:36,616 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:21:36,849 - multi_filter_search - INFO - Query executed in 1.50s, total processing time: 1.51s
2025-01-17 14:21:36,884 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:21:36] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:21:41,918 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:21:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:21:41,921 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 14:21:41,921 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull doggy
2025-01-17 14:21:42,494 - multi_filter_search - INFO - Found 36945 total results in 0.57s
2025-01-17 14:21:42,499 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull doggy') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull doggy%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:21:42,787 - multi_filter_search - INFO - Query executed in 0.86s, total processing time: 0.87s
2025-01-17 14:21:43,018 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:21:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:21:58,126 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:21:58] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:21:58,131 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 14:21:58,131 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull doggy
2025-01-17 14:21:58,133 - multi_filter_search - INFO - Processing condition 2: strategy=design_code, query=0602XX
2025-01-17 14:21:58,311 - multi_filter_search - INFO - Found 0 total results in 0.18s
2025-01-17 14:21:58,321 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull doggy') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull doggy%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE LPAD(CAST(design_search_code AS TEXT), 6, '0') LIKE '0602%') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:21:58,415 - multi_filter_search - INFO - Query executed in 0.28s, total processing time: 0.28s
2025-01-17 14:21:58,451 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:21:58] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:22:08,409 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:22:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:22:08,413 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 14:22:08,413 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 14:22:08,414 - multi_filter_search - INFO - Processing condition 2: strategy=design_code, query=0602XX
2025-01-17 14:22:08,540 - multi_filter_search - INFO - Found 0 total results in 0.12s
2025-01-17 14:22:08,545 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE LPAD(CAST(design_search_code AS TEXT), 6, '0') LIKE '0602%') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:22:08,707 - multi_filter_search - INFO - Query executed in 0.29s, total processing time: 0.29s
2025-01-17 14:22:08,745 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:22:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:22:23,357 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:22:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:22:23,362 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 14:22:23,362 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 14:22:23,365 - multi_filter_search - INFO - Processing condition 2: strategy=design_code, query=0302XX
2025-01-17 14:22:23,510 - multi_filter_search - INFO - Found 0 total results in 0.15s
2025-01-17 14:22:23,517 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE LPAD(CAST(design_search_code AS TEXT), 6, '0') LIKE '0302%') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:22:23,627 - multi_filter_search - INFO - Query executed in 0.26s, total processing time: 0.26s
2025-01-17 14:22:23,664 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:22:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:22:29,228 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:22:29] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:22:29,232 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 14:22:29,232 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 14:22:29,233 - multi_filter_search - INFO - Processing condition 2: strategy=design_code, query=0302XX
2025-01-17 14:22:29,436 - multi_filter_search - INFO - Found 0 total results in 0.20s
2025-01-17 14:22:29,439 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE LPAD(CAST(design_search_code AS TEXT), 6, '0') LIKE '0302%') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:22:29,873 - multi_filter_search - INFO - Query executed in 0.64s, total processing time: 0.64s
2025-01-17 14:22:29,910 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:22:29] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:22:45,064 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:22:45] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 14:22:45,068 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 14:22:45,068 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 14:22:45,070 - multi_filter_search - INFO - Processing condition 2: strategy=design_code, query=0301XX
2025-01-17 14:22:45,406 - multi_filter_search - INFO - Found 36945 total results in 0.34s
2025-01-17 14:22:45,412 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN designsearch ON casefile.serial_number = designsearch.serial_number 
WHERE LPAD(CAST(design_search_code AS TEXT), 6, '0') LIKE '0301%') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 14:22:45,642 - multi_filter_search - INFO - Query executed in 0.57s, total processing time: 0.57s
2025-01-17 14:22:45,677 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 14:22:45] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:45:05,057 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:05] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:45:05,060 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 16:45:05,060 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 16:45:12,119 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(DISTINCT casefile.serial_number) AS count_1 
FROM (SELECT DISTINCT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefile.transaction_date AS transaction_date, casefile.application_information_id AS application_information_id 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number) AS anon_1, casefile]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 101, in multi_filter_search
    total_count = count_query.scalar() or 0
                  ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(DISTINCT casefile.serial_number) AS count_1 
FROM (SELECT DISTINCT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefile.transaction_date AS transaction_date, casefile.application_information_id AS application_information_id 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number) AS anon_1, casefile]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-17 16:45:12,134 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:12] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-17 16:45:17,359 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:45:17,363 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 16:45:17,363 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 16:45:17,871 - multi_filter_search - INFO - Found 36945 total results in 0.51s
2025-01-17 16:45:17,877 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 16:45:18,177 - multi_filter_search - INFO - Query executed in 0.81s, total processing time: 0.81s
2025-01-17 16:45:18,214 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:18] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:45:30,912 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:45:30,918 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 16:45:30,918 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 16:45:30,920 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 16:45:31,132 - multi_filter_search - INFO - Found 36945 total results in 0.20s
2025-01-17 16:45:31,138 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 16:45:31,357 - multi_filter_search - INFO - Query executed in 0.43s, total processing time: 0.44s
2025-01-17 16:45:31,393 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:45:34,795 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:34] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-17 16:45:51,577 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:51] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:45:51,580 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 16:45:51,580 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 16:45:51,582 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 16:45:51,582 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=032
2025-01-17 16:45:51,936 - multi_filter_search - INFO - Found 36945 total results in 0.35s
2025-01-17 16:45:51,942 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 16:45:52,104 - multi_filter_search - INFO - Query executed in 0.52s, total processing time: 0.52s
2025-01-17 16:45:52,171 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:45:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:46:07,846 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:46:07] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 16:46:07,850 - multi_filter_search - INFO - Starting search with 4 conditions, page=1, per_page=10
2025-01-17 16:46:07,851 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 16:46:07,852 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 16:46:07,853 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=032
2025-01-17 16:46:07,853 - multi_filter_search - INFO - Processing condition 4: strategy=registration_number, query=1190899
2025-01-17 16:46:08,069 - multi_filter_search - INFO - Found 36945 total results in 0.22s
2025-01-17 16:46:08,079 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.registration_number = '1190899') AS subquery_3 ON casefile.serial_number = subquery_3.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 16:46:08,289 - multi_filter_search - INFO - Query executed in 0.44s, total processing time: 0.44s
2025-01-17 16:46:08,325 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 16:46:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:03:27,272 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:03:27] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:03:27,275 - multi_filter_search - INFO - Starting search with 5 conditions, page=1, per_page=10
2025-01-17 17:03:27,275 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:03:27,277 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:03:27,277 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=032
2025-01-17 17:03:27,277 - multi_filter_search - INFO - Processing condition 4: strategy=registration_number, query=1190899
2025-01-17 17:03:27,277 - multi_filter_search - INFO - Processing condition 5: strategy=serial_number, query=73220202
2025-01-17 17:03:27,423 - multi_filter_search - INFO - Found 36945 total results in 0.15s
2025-01-17 17:03:27,433 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.registration_number = '1190899') AS subquery_3 ON casefile.serial_number = subquery_3.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73220202') AS subquery_4 ON casefile.serial_number = subquery_4.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:03:27,737 - multi_filter_search - INFO - Query executed in 0.46s, total processing time: 0.46s
2025-01-17 17:03:27,771 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:03:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:03:33,457 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:03:33] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:03:33,460 - multi_filter_search - INFO - Starting search with 5 conditions, page=1, per_page=10
2025-01-17 17:03:33,460 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:03:33,462 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:03:33,462 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=032
2025-01-17 17:03:33,462 - multi_filter_search - INFO - Processing condition 4: strategy=registration_number, query=1190899
2025-01-17 17:03:33,463 - multi_filter_search - INFO - Processing condition 5: strategy=serial_number, query=73220201
2025-01-17 17:03:33,547 - multi_filter_search - INFO - Found 0 total results in 0.08s
2025-01-17 17:03:33,552 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.registration_number = '1190899') AS subquery_3 ON casefile.serial_number = subquery_3.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73220201') AS subquery_4 ON casefile.serial_number = subquery_4.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:03:33,599 - multi_filter_search - INFO - Query executed in 0.14s, total processing time: 0.14s
2025-01-17 17:03:33,634 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:03:33] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:03:41,781 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:03:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:03:41,785 - multi_filter_search - INFO - Starting search with 5 conditions, page=1, per_page=10
2025-01-17 17:03:41,785 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:03:41,788 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:03:41,788 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=032
2025-01-17 17:03:41,788 - multi_filter_search - INFO - Processing condition 4: strategy=registration_number, query=1190899
2025-01-17 17:03:41,788 - multi_filter_search - INFO - Processing condition 5: strategy=serial_number, query=73220201
2025-01-17 17:03:41,939 - multi_filter_search - INFO - Found 0 total results in 0.15s
2025-01-17 17:03:41,949 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.registration_number = '1190899') AS subquery_3 ON casefile.serial_number = subquery_3.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73220201') AS subquery_4 ON casefile.serial_number = subquery_4.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:03:42,008 - multi_filter_search - INFO - Query executed in 0.22s, total processing time: 0.22s
2025-01-17 17:03:42,053 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:03:42] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:04:02,903 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:02] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:04:02,906 - multi_filter_search - INFO - Starting search with 4 conditions, page=1, per_page=10
2025-01-17 17:04:02,906 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:04:02,907 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:04:02,908 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=032
2025-01-17 17:04:02,909 - multi_filter_search - INFO - Processing condition 4: strategy=registration_number, query=1190899
2025-01-17 17:04:03,297 - multi_filter_search - INFO - Found 36945 total results in 0.39s
2025-01-17 17:04:03,305 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.registration_number = '1190899') AS subquery_3 ON casefile.serial_number = subquery_3.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:04:03,560 - multi_filter_search - INFO - Query executed in 0.65s, total processing time: 0.65s
2025-01-17 17:04:03,599 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:03] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:04:25,441 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:25] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:04:25,444 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 17:04:25,444 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:04:25,840 - multi_filter_search - INFO - Found 36945 total results in 0.39s
2025-01-17 17:04:25,846 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:04:26,068 - multi_filter_search - INFO - Query executed in 0.62s, total processing time: 0.62s
2025-01-17 17:04:26,101 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:26] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:04:39,966 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:04:39,969 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 17:04:39,969 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:04:39,970 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-01-05
2025-01-17 17:04:40,199 - multi_filter_search - INFO - Found 36945 total results in 0.23s
2025-01-17 17:04:40,205 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:04:40,343 - multi_filter_search - INFO - Query executed in 0.37s, total processing time: 0.37s
2025-01-17 17:04:40,550 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:04:45,797 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:45] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-17 17:04:58,905 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:58] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:04:58,908 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 17:04:58,908 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:04:58,910 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-01-05
2025-01-17 17:04:58,910 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=017
2025-01-17 17:04:59,120 - multi_filter_search - INFO - Found 36945 total results in 0.21s
2025-01-17 17:04:59,129 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '017') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:04:59,279 - multi_filter_search - INFO - Query executed in 0.37s, total processing time: 0.37s
2025-01-17 17:04:59,394 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:04:59] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:05:09,467 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:05:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:05:09,472 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 17:05:09,472 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:05:09,473 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-01-05
2025-01-17 17:05:09,474 - multi_filter_search - INFO - Processing condition 3: strategy=coordinated_class, query=017
2025-01-17 17:05:09,900 - multi_filter_search - INFO - Found 0 total results in 0.43s
2025-01-17 17:05:09,907 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('001', '002', '006', '019', '035', '037', '040', '042')) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:05:10,316 - multi_filter_search - INFO - Query executed in 0.84s, total processing time: 0.84s
2025-01-17 17:05:10,434 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:05:10] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:09:26,440 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:09:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:09:26,444 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 17:09:26,444 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:09:26,448 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=017
2025-01-17 17:09:26,771 - multi_filter_search - INFO - Found 36945 total results in 0.32s
2025-01-17 17:09:26,777 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('001', '002', '006', '019', '035', '037', '040', '042')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:09:27,025 - multi_filter_search - INFO - Query executed in 0.58s, total processing time: 0.58s
2025-01-17 17:09:27,063 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:09:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:22:48,777 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 17:22:48,778 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:22:50,224 - multi_filter_search - INFO - Found 36945 total results in 1.44s
2025-01-17 17:22:50,228 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:22:50,487 - multi_filter_search - INFO - Query executed in 1.71s, total processing time: 1.71s
2025-01-17 17:22:50,523 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:22:50] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:23:10,818 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:23:10] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:23:10,822 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 17:23:10,822 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:23:10,824 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:23:11,144 - multi_filter_search - INFO - Found 36945 total results in 0.32s
2025-01-17 17:23:11,149 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:23:11,329 - multi_filter_search - INFO - Query executed in 0.50s, total processing time: 0.51s
2025-01-17 17:23:11,453 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:23:11] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:23:16,279 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:23:16] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-17 17:23:28,956 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:23:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:23:28,960 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 17:23:28,960 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:23:28,962 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:23:28,963 - multi_filter_search - INFO - Processing condition 3: strategy=international_class, query=032
2025-01-17 17:23:29,277 - multi_filter_search - INFO - Found 36945 total results in 0.31s
2025-01-17 17:23:29,284 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:23:29,544 - multi_filter_search - INFO - Query executed in 0.58s, total processing time: 0.58s
2025-01-17 17:23:29,578 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:23:29] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:23:48,928 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:23:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:23:48,932 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 17:23:48,933 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:23:48,935 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:23:48,935 - multi_filter_search - INFO - Processing condition 3: strategy=coordinated_class, query=032
2025-01-17 17:23:49,412 - multi_filter_search - INFO - Found 0 total results in 0.48s
2025-01-17 17:23:49,421 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('005', '029', '030', '031', '033', '035', '042', '043')) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:23:49,725 - multi_filter_search - INFO - Query executed in 0.79s, total processing time: 0.79s
2025-01-17 17:23:49,761 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:23:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:25:23,898 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-17 17:40:57,502 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 17:40:57,503 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:40:57,507 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:40:57,509 - multi_filter_search - INFO - Processing condition 3: strategy=coordinated_class, query=032
2025-01-17 17:40:58,760 - multi_filter_search - INFO - Found 0 total results in 1.25s
2025-01-17 17:40:58,767 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('005', '029', '030', '031', '033', '035', '042', '043')) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:40:59,474 - multi_filter_search - INFO - Query executed in 1.96s, total processing time: 1.97s
2025-01-17 17:40:59,511 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:40:59] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:51:30,243 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/coordinated_class_config.py', reloading
2025-01-17 17:52:05,908 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 17:52:05,909 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:52:05,913 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:52:07,081 - multi_filter_search - INFO - Found 36945 total results in 1.17s
2025-01-17 17:52:07,087 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:52:07,304 - multi_filter_search - INFO - Query executed in 1.39s, total processing time: 1.40s
2025-01-17 17:52:07,340 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:52:07] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:52:26,759 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:52:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:52:26,763 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 17:52:26,763 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 17:52:26,766 - multi_filter_search - INFO - Processing condition 2: strategy=filing_date, query=1979-06-18
2025-01-17 17:52:26,767 - multi_filter_search - INFO - Processing condition 3: strategy=coordinated_class, query=032
2025-01-17 17:52:26,857 - multi_filter_search - INFO - Found 0 total results in 0.09s
2025-01-17 17:52:26,861 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile 
WHERE 1=0) AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:52:26,950 - multi_filter_search - INFO - Query executed in 0.18s, total processing time: 0.19s
2025-01-17 17:52:26,986 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:52:26] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:53:52,382 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:53:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 17:53:52,385 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 17:53:52,386 - multi_filter_search - INFO - Processing condition 1: strategy=coordinated_class, query=032
2025-01-17 17:53:52,549 - multi_filter_search - INFO - Found 0 total results in 0.16s
2025-01-17 17:53:52,553 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile 
WHERE 1=0) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 17:53:52,681 - multi_filter_search - INFO - Query executed in 0.30s, total processing time: 0.30s
2025-01-17 17:53:52,717 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 17:53:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:10:25,321 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-17 18:11:01,560 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 18:11:01,560 - multi_filter_search - INFO - Processing condition 1: strategy=coordinated_class, query=032
2025-01-17 18:11:22,252 - multi_filter_search - INFO - Found 36945 total results in 20.69s
2025-01-17 18:11:22,260 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('005', '029', '030', '031', '033', '035', '042', '043')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 18:11:22,372 - multi_filter_search - INFO - Query executed in 20.81s, total processing time: 20.81s
2025-01-17 18:11:22,409 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:11:22] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:11:30,817 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:11:30] "GET /api/case/73246775 HTTP/1.1" 200 -
2025-01-17 18:12:36,096 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:12:36] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:12:36,100 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 18:12:36,100 - multi_filter_search - INFO - Processing condition 1: strategy=coordinated_class, query=032
2025-01-17 18:12:36,100 - multi_filter_search - INFO - Processing condition 2: strategy=wordmark, query=camp viejo
2025-01-17 18:12:36,406 - multi_filter_search - INFO - Found 36945 total results in 0.30s
2025-01-17 18:12:36,412 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('005', '029', '030', '031', '033', '035', '042', '043')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'camp viejo') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%camp viejo%')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 18:12:36,644 - multi_filter_search - INFO - Query executed in 0.54s, total processing time: 0.54s
2025-01-17 18:12:36,681 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:12:36] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:12:57,213 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:12:57] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:12:57,217 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 18:12:57,217 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 18:12:57,482 - multi_filter_search - INFO - Found 36945 total results in 0.26s
2025-01-17 18:12:57,488 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 18:12:57,739 - multi_filter_search - INFO - Query executed in 0.52s, total processing time: 0.52s
2025-01-17 18:12:57,804 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:12:57] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:12:59,613 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:12:59] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-17 18:13:18,922 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:13:18] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:13:18,926 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 18:13:18,926 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 18:13:18,928 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=032
2025-01-17 18:13:19,321 - multi_filter_search - INFO - Found 36945 total results in 0.39s
2025-01-17 18:13:19,327 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('005', '029', '030', '031', '033', '035', '042', '043')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 18:13:19,634 - multi_filter_search - INFO - Query executed in 0.71s, total processing time: 0.71s
2025-01-17 18:13:19,670 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:13:19] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:13:54,130 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:13:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:13:54,134 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 18:13:54,134 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 18:13:54,136 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=032
2025-01-17 18:13:54,136 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1958-07-25
2025-01-17 18:13:54,457 - multi_filter_search - INFO - Found 36945 total results in 0.32s
2025-01-17 18:13:54,465 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('005', '029', '030', '031', '033', '035', '042', '043')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1958-07-25') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 18:13:54,758 - multi_filter_search - INFO - Query executed in 0.62s, total processing time: 0.62s
2025-01-17 18:13:54,793 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:13:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:20:37,849 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/coordinated_class_config.py', reloading
2025-01-17 18:22:05,669 - multi_filter_search - INFO - Starting search with 3 conditions, page=1, per_page=10
2025-01-17 18:22:05,670 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 18:22:05,673 - multi_filter_search - INFO - Processing condition 2: strategy=coordinated_class, query=032
2025-01-17 18:22:05,674 - multi_filter_search - INFO - Processing condition 3: strategy=filing_date, query=1958-07-25
2025-01-17 18:22:07,059 - multi_filter_search - INFO - Found 36945 total results in 1.38s
2025-01-17 18:22:07,067 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT DISTINCT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code IN ('032', '005', '029', '030', '031', '033', '035', '042', '043')) AS subquery_1 ON casefile.serial_number = subquery_1.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1958-07-25') AS subquery_2 ON casefile.serial_number = subquery_2.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 18:22:07,279 - multi_filter_search - INFO - Query executed in 1.60s, total processing time: 1.61s
2025-01-17 18:22:07,312 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:22:07] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 18:22:09,334 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 18:22:09] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-17 19:17:00,333 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 19:17:00,334 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 19:17:01,517 - multi_filter_search - INFO - Found 36945 total results in 1.18s
2025-01-17 19:17:01,522 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 19:17:02,139 - multi_filter_search - INFO - Query executed in 1.80s, total processing time: 1.81s
2025-01-17 19:17:02,176 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:17:02] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:36:37,976 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:36:37] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-17 19:36:50,356 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:36:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:36:50,360 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=10
2025-01-17 19:36:50,360 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F. Feinman
2025-01-17 19:36:50,699 - multi_filter_search - INFO - Found 36945 total results in 0.34s
2025-01-17 19:36:50,704 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Howard F. Feinman') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Howard F. Feinman%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 19:36:50,947 - multi_filter_search - INFO - Query executed in 0.58s, total processing time: 0.59s
2025-01-17 19:36:50,986 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:36:50] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:37:00,813 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:00] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:37:00,814 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:00] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:37:00,825 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-17 19:37:00,825 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F. Feinman
2025-01-17 19:37:00,827 - multi_filter_search - INFO - Starting search with 1 conditions, page=1, per_page=20
2025-01-17 19:37:00,827 - multi_filter_search - INFO - Processing condition 1: strategy=attorney_name, query=Howard F. Feinman
2025-01-17 19:37:01,275 - multi_filter_search - INFO - Found 36945 total results in 0.45s
2025-01-17 19:37:01,280 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Howard F. Feinman') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Howard F. Feinman%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 0
2025-01-17 19:37:01,843 - multi_filter_search - INFO - Query executed in 1.02s, total processing time: 1.02s
2025-01-17 19:37:01,955 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:01] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:37:01,955 - multi_filter_search - INFO - Found 36945 total results in 1.13s
2025-01-17 19:37:01,958 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'Howard F. Feinman') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%Howard F. Feinman%'))) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 20 OFFSET 0
2025-01-17 19:37:02,223 - multi_filter_search - INFO - Query executed in 1.39s, total processing time: 1.40s
2025-01-17 19:37:02,272 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:02] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:37:09,049 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:09] "GET /api/case/73111283 HTTP/1.1" 200 -
2025-01-17 19:37:14,435 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:14] "GET /api/case/73158295 HTTP/1.1" 200 -
2025-01-17 19:37:21,730 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:21] "GET /api/case/73236313 HTTP/1.1" 200 -
2025-01-17 19:37:25,727 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:25] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-17 19:37:34,135 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:34] "GET /api/case/72300830 HTTP/1.1" 200 -
2025-01-17 19:37:34,191 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:37:34] "GET /api/case/72300830 HTTP/1.1" 200 -
2025-01-17 19:44:12,107 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:44:12] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:44:12,110 - multi_filter_search - INFO - Starting search with 2 conditions, page=1, per_page=10
2025-01-17 19:44:12,110 - multi_filter_search - INFO - Processing condition 1: strategy=wordmark, query=bull dog
2025-01-17 19:44:12,112 - multi_filter_search - INFO - Processing condition 2: strategy=serial_number, query=73054761
2025-01-17 19:44:12,217 - multi_filter_search - INFO - Found 0 total results in 0.11s
2025-01-17 19:44:12,223 - multi_filter_search - INFO - Final query SQL: SELECT DISTINCT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS subquery_0 ON casefile.serial_number = subquery_0.serial_number JOIN (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73054761') AS subquery_1 ON casefile.serial_number = subquery_1.serial_number ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 19:44:12,386 - multi_filter_search - INFO - Query executed in 0.27s, total processing time: 0.28s
2025-01-17 19:44:12,423 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 19:44:12] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 19:52:29,466 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-17 21:06:53,792 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-17 21:06:53,792 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-17 21:06:53,793 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:06:54,032 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:06:54,040 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:07:03,886 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:07:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:07:03,890 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, page=1, per_page=10
2025-01-17 21:07:03,893 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 89, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 70, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-17 21:07:03,895 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:07:03] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-17 21:08:41,147 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-17 21:08:41,209 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:08:41,512 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:08:41,516 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:08:49,745 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:08:49] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:08:49,748 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, page=1, per_page=10
2025-01-17 21:08:49,789 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 21:08:50,987 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-17 21:08:50,995 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 21:08:51,144 - multi_filter_search - INFO - Query executed in 1.35s, total processing time: 1.40s
2025-01-17 21:08:51,176 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:08:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:09:33,751 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:09:33] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:09:33,755 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, page=1, per_page=10
2025-01-17 21:09:33,760 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 21:09:34,132 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-17 21:09:34,135 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 21:09:34,269 - multi_filter_search - INFO - Query executed in 0.51s, total processing time: 0.51s
2025-01-17 21:09:34,303 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:09:34] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:09:46,621 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:09:46] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:09:46,625 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1979-01-05'}]}, page=1, per_page=10
2025-01-17 21:09:46,628 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 21:09:46,632 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05'
2025-01-17 21:09:46,818 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-17 21:09:46,827 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 21:09:47,066 - multi_filter_search - INFO - Query executed in 0.43s, total processing time: 0.44s
2025-01-17 21:09:47,126 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:09:47] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:10:36,628 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:10:36] "[35m[1mGET /api/case/73199066 HTTP/1.1[0m" 500 -
2025-01-17 21:11:24,897 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-17 21:11:24,897 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-17 21:11:24,898 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:11:25,122 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:11:25,135 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:11:29,846 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:11:29] "[35m[1mGET /api/case/73199066 HTTP/1.1[0m" 500 -
2025-01-17 21:13:22,707 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:13:22] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:13:22,711 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1979-01-05'}]}, page=1, per_page=10
2025-01-17 21:13:22,717 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 21:13:22,721 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05'
2025-01-17 21:13:22,996 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-17 21:13:23,005 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 21:13:23,160 - multi_filter_search - INFO - Query executed in 0.44s, total processing time: 0.45s
2025-01-17 21:13:23,222 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:13:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 21:19:44,709 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-17 21:19:44,773 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:32:10,205 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-17 21:32:10,205 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-17 21:32:10,206 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:32:10,427 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:32:10,431 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:32:13,291 - __main__ - INFO - Fetching details for case: 73199066
2025-01-17 21:32:13,291 - __main__ - INFO - Database session established.
2025-01-17 21:32:14,468 - __main__ - INFO - Case query executed. Case found: True
2025-01-17 21:32:14,519 - __main__ - INFO - Header query executed. Header found: True
2025-01-17 21:32:14,566 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-17 21:32:14,610 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-17 21:32:14,668 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-17 21:32:14,711 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-17 21:32:14,754 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-17 21:32:14,942 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-17 21:32:14,995 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-17 21:32:14,995 - __main__ - ERROR - Error fetching case details for serial number 73199066: 'correspondent'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 262, in case_details
    response['correspondent'].append({
    ~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'correspondent'
2025-01-17 21:32:15,032 - __main__ - INFO - Database session closed.
2025-01-17 21:32:15,035 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:32:15] "[35m[1mGET /api/case/73199066 HTTP/1.1[0m" 500 -
2025-01-17 21:33:11,112 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-17 21:33:11,169 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:33:11,478 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:33:11,481 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:33:22,627 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-17 21:33:22,690 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:33:22,925 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:33:22,929 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:33:24,991 - __main__ - INFO - Fetching details for case: 73199066
2025-01-17 21:33:24,991 - __main__ - INFO - Database session established.
2025-01-17 21:33:26,056 - __main__ - INFO - Case query executed. Case found: True
2025-01-17 21:33:26,107 - __main__ - INFO - Header query executed. Header found: True
2025-01-17 21:33:26,242 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-17 21:33:26,292 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-17 21:33:26,335 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-17 21:33:26,377 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-17 21:33:26,414 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-17 21:33:26,546 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-17 21:33:26,586 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-17 21:33:26,620 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-17 21:33:26,658 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-17 21:33:26,659 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-17 21:33:26,659 - __main__ - ERROR - Error fetching case details for serial number 73199066: app.json.response() takes either args or kwargs, not both
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 304, in case_details
    return jsonify(response, default=custom_serializer)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/flask/json/__init__.py", line 170, in jsonify
    return current_app.json.response(*args, **kwargs)  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/flask/json/provider.py", line 205, in response
    obj = self._prepare_response_obj(args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/flask/json/provider.py", line 79, in _prepare_response_obj
    raise TypeError("app.json.response() takes either args or kwargs, not both")
TypeError: app.json.response() takes either args or kwargs, not both
2025-01-17 21:33:26,765 - __main__ - INFO - Database session closed.
2025-01-17 21:33:26,767 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:33:26] "[35m[1mGET /api/case/73199066 HTTP/1.1[0m" 500 -
2025-01-17 21:34:00,345 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-17 21:34:00,403 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:34:00,718 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:34:00,722 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:34:40,224 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-17 21:34:40,270 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:34:40,499 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:34:40,503 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:34:42,626 - __main__ - INFO - Fetching details for case: 73199066
2025-01-17 21:34:42,626 - __main__ - INFO - Database session established.
2025-01-17 21:34:43,651 - __main__ - INFO - Case query executed. Case found: True
2025-01-17 21:34:43,701 - __main__ - INFO - Header query executed. Header found: True
2025-01-17 21:34:43,837 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-17 21:34:43,890 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-17 21:34:43,934 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-17 21:34:44,024 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-17 21:34:44,078 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-17 21:34:44,233 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-17 21:34:44,361 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-17 21:34:44,401 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-17 21:34:44,439 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-17 21:34:44,439 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-17 21:34:44,472 - __main__ - INFO - Database session closed.
2025-01-17 21:34:44,475 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:34:44] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-17 21:35:49,320 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-17 21:35:49,394 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:35:49,718 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:35:49,722 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 21:36:14,668 - __main__ - INFO - Fetching details for case: 73199066
2025-01-17 21:36:14,669 - __main__ - INFO - Database session established.
2025-01-17 21:36:15,654 - __main__ - INFO - Case query executed. Case found: True
2025-01-17 21:36:15,731 - __main__ - INFO - Header query executed. Header found: True
2025-01-17 21:36:15,779 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-17 21:36:15,841 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-17 21:36:15,881 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-17 21:36:15,927 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-17 21:36:15,965 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-17 21:36:16,110 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-17 21:36:16,154 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-17 21:36:16,192 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-17 21:36:16,230 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-17 21:36:16,230 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-17 21:36:16,263 - __main__ - INFO - Database session closed.
2025-01-17 21:36:16,266 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 21:36:16] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-17 21:36:24,163 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-17 21:36:24,220 - werkzeug - INFO -  * Restarting with stat
2025-01-17 21:36:24,520 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 21:36:24,525 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 22:21:22,551 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-17 22:21:22,551 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-17 22:21:22,552 - werkzeug - INFO -  * Restarting with stat
2025-01-17 22:21:22,787 - werkzeug - WARNING -  * Debugger is active!
2025-01-17 22:21:22,794 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-17 22:22:51,056 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:22:51] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:22:51,060 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1979-01-05'}]}, 'page': 1, 'per_page': 10}
2025-01-17 22:22:51,060 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1979-01-05'}]}, page=1, per_page=10
2025-01-17 22:22:51,100 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 22:22:51,103 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05'
2025-01-17 22:22:52,285 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-17 22:22:52,294 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 22:22:52,450 - multi_filter_search - INFO - Query executed in 1.35s, total processing time: 1.39s
2025-01-17 22:22:52,485 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:22:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:36:24,298 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:36:24] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:36:24,301 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, 'page': 1, 'per_page': 10}
2025-01-17 22:36:24,301 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, page=1, per_page=10
2025-01-17 22:36:24,307 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 22:36:24,499 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-17 22:36:24,507 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 22:36:24,671 - multi_filter_search - INFO - Query executed in 0.36s, total processing time: 0.37s
2025-01-17 22:36:24,704 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:36:24] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:36:33,940 - __main__ - INFO - Fetching details for case: 73220202
2025-01-17 22:36:33,941 - __main__ - INFO - Database session established.
2025-01-17 22:36:34,010 - __main__ - INFO - Case query executed. Case found: True
2025-01-17 22:36:34,082 - __main__ - INFO - Header query executed. Header found: True
2025-01-17 22:36:34,134 - __main__ - INFO - Owners query executed. Owners found: 7
2025-01-17 22:36:34,183 - __main__ - INFO - Classifications query executed. Classifications found: 4
2025-01-17 22:36:34,443 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 1
2025-01-17 22:36:34,487 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-17 22:36:34,544 - __main__ - INFO - Design Searches query executed. Design Searches found: 4
2025-01-17 22:36:34,676 - __main__ - INFO - Event Statements query executed. Event Statements found: 40
2025-01-17 22:36:34,747 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-17 22:36:34,789 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-17 22:36:34,965 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-17 22:36:34,965 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-17 22:36:34,998 - __main__ - INFO - Database session closed.
2025-01-17 22:36:34,999 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:36:34] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-17 22:39:26,100 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:39:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:39:26,103 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'international_class', 'query': '032'}]}, 'page': 1, 'per_page': 10}
2025-01-17 22:39:26,104 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'international_class', 'query': '032'}]}, page=1, per_page=10
2025-01-17 22:39:26,110 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 22:39:26,113 - multi_filter_search - INFO - Generated query for strategy 'international_class': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, classification.international_code 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032'
2025-01-17 22:39:26,402 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-17 22:39:26,413 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, classification.international_code AS international_code 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN classification ON casefile.serial_number = classification.serial_number 
WHERE classification.international_code = '032') AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 22:39:26,616 - multi_filter_search - INFO - Query executed in 0.50s, total processing time: 0.51s
2025-01-17 22:39:26,660 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:39:26] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:39:34,553 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:39:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:39:34,557 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, 'page': 1, 'per_page': 10}
2025-01-17 22:39:34,557 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, page=1, per_page=10
2025-01-17 22:39:34,562 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 22:39:34,821 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-17 22:39:34,828 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 22:39:34,987 - multi_filter_search - INFO - Query executed in 0.42s, total processing time: 0.43s
2025-01-17 22:39:35,020 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:39:35] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:40:04,244 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:40:04] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:40:04,248 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'macou auto'}]}, 'page': 1, 'per_page': 10}
2025-01-17 22:40:04,249 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'macou auto'}]}, page=1, per_page=10
2025-01-17 22:40:04,253 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'macou auto') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'macou auto') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'macou auto') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'macou auto') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'macou auto') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%macou auto%')
2025-01-17 22:40:04,420 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-17 22:40:04,427 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'macou auto') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'macou auto') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'macou auto') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'macou auto') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'macou auto') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%macou auto%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 22:40:04,673 - multi_filter_search - INFO - Query executed in 0.42s, total processing time: 0.42s
2025-01-17 22:40:04,710 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:40:04] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:40:34,278 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:40:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-17 22:40:34,283 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1980-01-23'}]}, 'page': 1, 'per_page': 10}
2025-01-17 22:40:34,283 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1980-01-23'}]}, page=1, per_page=10
2025-01-17 22:40:34,287 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-17 22:40:34,288 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1980-01-23'
2025-01-17 22:40:34,604 - multi_filter_search - INFO - Total results before pagination: 23
2025-01-17 22:40:34,613 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1 UNION ALL SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1980-01-23') AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-17 22:40:34,806 - multi_filter_search - INFO - Query executed in 0.52s, total processing time: 0.52s
2025-01-17 22:40:34,842 - werkzeug - INFO - 127.0.0.1 - - [17/Jan/2025 22:40:34] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-18 19:02:57,705 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-18 19:02:57,705 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-18 19:02:57,706 - werkzeug - INFO -  * Restarting with stat
2025-01-18 19:02:57,928 - werkzeug - WARNING -  * Debugger is active!
2025-01-18 19:02:57,939 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-18 19:03:18,329 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 19:03:18] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 19:03:18,388 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1980-01-23'}]}, 'page': 1, 'per_page': 10}
2025-01-18 19:03:18,389 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1980-01-23'}]}, page=1, per_page=10
2025-01-18 19:03:18,418 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-18 19:03:18,420 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1980-01-23'
2025-01-18 19:03:36,207 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-18 19:03:36,219 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1980-01-23') AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-18 19:03:37,666 - multi_filter_search - INFO - Query executed in 19.24s, total processing time: 19.28s
2025-01-18 19:03:38,475 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 19:03:38] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-18 19:03:57,930 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 19:03:57] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 19:03:57,934 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, 'page': 1, 'per_page': 10}
2025-01-18 19:03:57,934 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}]}, page=1, per_page=10
2025-01-18 19:03:57,938 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-18 19:04:00,108 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-18 19:04:00,113 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-18 19:04:01,455 - multi_filter_search - INFO - Query executed in 3.52s, total processing time: 3.52s
2025-01-18 19:04:02,335 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 19:04:02] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-18 19:04:25,987 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 19:04:25] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 19:04:25,992 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1979-01-05'}]}, 'page': 1, 'per_page': 10}
2025-01-18 19:04:25,992 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog'}, {'strategy': 'filing_date', 'query': '1979-01-05'}]}, page=1, per_page=10
2025-01-18 19:04:25,996 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-18 19:04:25,997 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05'
2025-01-18 19:04:29,122 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-18 19:04:29,130 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-18 19:04:30,623 - multi_filter_search - INFO - Query executed in 4.62s, total processing time: 4.63s
2025-01-18 19:04:31,746 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 19:04:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:20:29,986 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:20:29] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:20:29,991 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bah', 'group': 'General Search'}]}, 'page': 1, 'per_page': 10}
2025-01-18 20:20:29,993 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bah', 'group': 'General Search'}]}, page=1, per_page=10
2025-01-18 20:20:30,000 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bah') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bah') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bah%')
2025-01-18 20:20:30,004 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT count(*) AS count_1 
FROM (SELECT anon_2.serial_number AS anon_2_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, %(similarity_1)s) * %(similarity_2)s AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, %(similarity_3)s) >= %(similarity_4)s) THEN %(param_1)s WHEN (similarity(casefileheader.mark_identification, %(similarity_5)s) >= %(similarity_6)s) THEN %(param_2)s WHEN (similarity(casefileheader.mark_identification, %(similarity_7)s) >= %(similarity_8)s) THEN %(param_3)s ELSE %(param_4)s END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_9)s) > %(similarity_10)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AS anon_1]
[parameters: {'similarity_1': 'bah', 'similarity_2': 100, 'similarity_3': 'bah', 'similarity_4': 0.8, 'param_1': 'Very High', 'similarity_5': 'bah', 'similarity_6': 0.6, 'param_2': 'High', 'similarity_7': 'bah', 'similarity_8': 0.4, 'param_3': 'Medium', 'param_4': 'Low', 'similarity_9': 'bah', 'similarity_10': 0.3, 'lower_1': '%bah%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3142, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT count(*) AS count_1 
FROM (SELECT anon_2.serial_number AS anon_2_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, %(similarity_1)s) * %(similarity_2)s AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, %(similarity_3)s) >= %(similarity_4)s) THEN %(param_1)s WHEN (similarity(casefileheader.mark_identification, %(similarity_5)s) >= %(similarity_6)s) THEN %(param_2)s WHEN (similarity(casefileheader.mark_identification, %(similarity_7)s) >= %(similarity_8)s) THEN %(param_3)s ELSE %(param_4)s END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_9)s) > %(similarity_10)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AS anon_1]
[parameters: {'similarity_1': 'bah', 'similarity_2': 100, 'similarity_3': 'bah', 'similarity_4': 0.8, 'param_1': 'Very High', 'similarity_5': 'bah', 'similarity_6': 0.6, 'param_2': 'High', 'similarity_7': 'bah', 'similarity_8': 0.4, 'param_3': 'Medium', 'param_4': 'Low', 'similarity_9': 'bah', 'similarity_10': 0.3, 'lower_1': '%bah%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-18 20:20:30,016 - __main__ - ERROR - Error in combined_search: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT count(*) AS count_1 
FROM (SELECT anon_2.serial_number AS anon_2_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, %(similarity_1)s) * %(similarity_2)s AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, %(similarity_3)s) >= %(similarity_4)s) THEN %(param_1)s WHEN (similarity(casefileheader.mark_identification, %(similarity_5)s) >= %(similarity_6)s) THEN %(param_2)s WHEN (similarity(casefileheader.mark_identification, %(similarity_7)s) >= %(similarity_8)s) THEN %(param_3)s ELSE %(param_4)s END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_9)s) > %(similarity_10)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AS anon_1]
[parameters: {'similarity_1': 'bah', 'similarity_2': 100, 'similarity_3': 'bah', 'similarity_4': 0.8, 'param_1': 'Very High', 'similarity_5': 'bah', 'similarity_6': 0.6, 'param_2': 'High', 'similarity_7': 'bah', 'similarity_8': 0.4, 'param_3': 'Medium', 'param_4': 'Low', 'similarity_9': 'bah', 'similarity_10': 0.3, 'lower_1': '%bah%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3142, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT count(*) AS count_1 
FROM (SELECT anon_2.serial_number AS anon_2_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, %(similarity_1)s) * %(similarity_2)s AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, %(similarity_3)s) >= %(similarity_4)s) THEN %(param_1)s WHEN (similarity(casefileheader.mark_identification, %(similarity_5)s) >= %(similarity_6)s) THEN %(param_2)s WHEN (similarity(casefileheader.mark_identification, %(similarity_7)s) >= %(similarity_8)s) THEN %(param_3)s ELSE %(param_4)s END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_9)s) > %(similarity_10)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AS anon_1]
[parameters: {'similarity_1': 'bah', 'similarity_2': 100, 'similarity_3': 'bah', 'similarity_4': 0.8, 'param_1': 'Very High', 'similarity_5': 'bah', 'similarity_6': 0.6, 'param_2': 'High', 'similarity_7': 'bah', 'similarity_8': 0.4, 'param_3': 'Medium', 'param_4': 'Low', 'similarity_9': 'bah', 'similarity_10': 0.3, 'lower_1': '%bah%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-18 20:20:30,018 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:20:30] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-18 20:20:57,842 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:20:57] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:20:57,845 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bah', 'group': 'General Search'}]}, 'page': 1, 'per_page': 10}
2025-01-18 20:20:57,845 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bah', 'group': 'General Search'}]}, page=1, per_page=10
2025-01-18 20:20:57,850 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bah') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bah') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bah%')
2025-01-18 20:21:06,034 - multi_filter_search - INFO - Total results before pagination: 8
2025-01-18 20:21:06,041 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bah') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bah') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bah%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-18 20:21:06,980 - multi_filter_search - INFO - Query executed in 9.13s, total processing time: 9.13s
2025-01-18 20:21:08,004 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:21:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:25:03,515 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:25:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:25:03,519 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bah', 'group': 'General Search'}, {'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search'}]}, 'page': 1, 'per_page': 10}
2025-01-18 20:25:03,519 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bah', 'group': 'General Search'}, {'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search'}]}, page=1, per_page=10
2025-01-18 20:25:03,525 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bah') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bah') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bah%')
2025-01-18 20:25:03,529 - multi_filter_search - INFO - Generated query for strategy 'owner_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, owner.party_name, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS similarity_score, CASE WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.6) THEN 'High' WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN owner ON casefile.serial_number = owner.serial_number 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))
2025-01-18 20:25:05,719 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-18 20:25:05,730 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bah') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bah') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bah%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, owner.party_name AS party_name, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS similarity_score, CASE WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.6) THEN 'High' WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN owner ON casefile.serial_number = owner.serial_number 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-18 20:25:07,172 - multi_filter_search - INFO - Query executed in 3.64s, total processing time: 3.65s
2025-01-18 20:25:07,942 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:25:07] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:25:10,152 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:25:10] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:25:10,155 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bah', 'group': 'General Search'}, {'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search'}]}, 'page': 1, 'per_page': 10}
2025-01-18 20:25:10,155 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bah', 'group': 'General Search'}, {'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search'}]}, page=1, per_page=10
2025-01-18 20:25:10,160 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bah') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bah') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bah%')
2025-01-18 20:25:10,165 - multi_filter_search - INFO - Generated query for strategy 'owner_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, owner.party_name, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS similarity_score, CASE WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.6) THEN 'High' WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN owner ON casefile.serial_number = owner.serial_number 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))
2025-01-18 20:25:13,249 - multi_filter_search - INFO - Total results before pagination: 55
2025-01-18 20:25:13,262 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'bah') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bah') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bah') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bah%')) AS anon_1 UNION ALL SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, owner.party_name AS party_name, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS similarity_score, CASE WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.6) THEN 'High' WHEN (similarity(coalesce(owner.party_name, ''), 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN owner ON casefile.serial_number = owner.serial_number 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-18 20:25:14,830 - multi_filter_search - INFO - Query executed in 4.66s, total processing time: 4.67s
2025-01-18 20:25:15,910 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:25:15] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:25:23,813 - __main__ - INFO - Fetching details for case: 73225191
2025-01-18 20:25:23,813 - __main__ - INFO - Database session established.
2025-01-18 20:25:25,297 - __main__ - INFO - Case query executed. Case found: True
2025-01-18 20:25:26,018 - __main__ - INFO - Header query executed. Header found: True
2025-01-18 20:25:26,815 - __main__ - INFO - Owners query executed. Owners found: 9
2025-01-18 20:25:27,541 - __main__ - INFO - Classifications query executed. Classifications found: 19
2025-01-18 20:25:28,585 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-18 20:25:29,435 - __main__ - INFO - Statements query executed. Statements found: 5
2025-01-18 20:25:30,158 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-18 20:25:31,010 - __main__ - INFO - Event Statements query executed. Event Statements found: 28
2025-01-18 20:25:31,721 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-18 20:25:32,421 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-18 20:25:33,275 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-18 20:25:33,275 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-18 20:25:34,031 - __main__ - INFO - Database session closed.
2025-01-18 20:25:34,033 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:25:34] "GET /api/case/73225191 HTTP/1.1" 200 -
2025-01-18 20:54:52,457 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:54:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 20:54:52,462 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'oho', 'group': 'General Search'}, {'strategy': 'serial_number', 'query': '9y98y98y', 'group': 'General Search'}]}, {'strategy': 'wordmark', 'query': '8y9uho'}]}, 'page': 1, 'per_page': 10}
2025-01-18 20:54:52,462 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'oho', 'group': 'General Search'}, {'strategy': 'serial_number', 'query': '9y98y98y', 'group': 'General Search'}]}, {'strategy': 'wordmark', 'query': '8y9uho'}]}, page=1, per_page=10
2025-01-18 20:54:52,469 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'oho') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'oho') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'oho') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'oho') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'oho') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%oho%')
2025-01-18 20:54:52,471 - multi_filter_search - INFO - Generated query for strategy 'serial_number': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, 100 AS match_score, 'High' AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '9y98y98y'
2025-01-18 20:54:52,474 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, '8y9uho') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, '8y9uho') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, '8y9uho') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, '8y9uho') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, '8y9uho') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%8y9uho%')
2025-01-18 20:54:52,475 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 105, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 76, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-18 20:54:52,479 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 105, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 76, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-18 20:54:52,482 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 20:54:52] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-18 21:07:20,110 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 21:07:20] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-18 21:07:20,113 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'hhiougi', 'group': 'General Search'}, {'strategy': 'attorney_name', 'query': 'uhuipi', 'group': 'General Search'}]}, 'page': 1, 'per_page': 10}
2025-01-18 21:07:20,113 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'hhiougi', 'group': 'General Search'}, {'strategy': 'attorney_name', 'query': 'uhuipi', 'group': 'General Search'}]}, page=1, per_page=10
2025-01-18 21:07:20,120 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'hhiougi') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'hhiougi') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'hhiougi') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'hhiougi') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hhiougi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hhiougi%')
2025-01-18 21:07:20,125 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') * 100 AS similarity_score, CASE WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') >= 0.8) THEN 'Very High' WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') >= 0.6) THEN 'High' WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') * 100 AS similarity_score, CASE WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') >= 0.8) THEN 'Very High' WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') >= 0.6) THEN 'High' WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'uhuipi') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%uhuipi%'))
2025-01-18 21:07:20,126 - multi_filter_search - ERROR - Error in multi_filter_search: Label name similarity_score is being renamed to an anonymous label due to disambiguation which is not supported right now.  Please use unique names for explicit labels.
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 105, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 83, in build_query_recursive
    combined_query = combined_query.union_all(session.query(sq.c.serial_number))
                                                            ^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1145, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 894, in c
    self._populate_column_collection()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 1705, in _populate_column_collection
    self.element._generate_fromclause_column_proxies(self)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 6468, in _generate_fromclause_column_proxies
    c._make_proxy(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 4819, in _make_proxy
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Label name similarity_score is being renamed to an anonymous label due to disambiguation which is not supported right now.  Please use unique names for explicit labels.
2025-01-18 21:07:20,130 - __main__ - ERROR - Error in combined_search: Label name similarity_score is being renamed to an anonymous label due to disambiguation which is not supported right now.  Please use unique names for explicit labels.
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 105, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 83, in build_query_recursive
    combined_query = combined_query.union_all(session.query(sq.c.serial_number))
                                                            ^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1145, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 894, in c
    self._populate_column_collection()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 1705, in _populate_column_collection
    self.element._generate_fromclause_column_proxies(self)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 6468, in _generate_fromclause_column_proxies
    c._make_proxy(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 4819, in _make_proxy
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Label name similarity_score is being renamed to an anonymous label due to disambiguation which is not supported right now.  Please use unique names for explicit labels.
2025-01-18 21:07:20,131 - werkzeug - INFO - 127.0.0.1 - - [18/Jan/2025 21:07:20] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 19:24:25,203 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:24:25,207 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:24:37,685 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:24:37] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:24:37,688 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:24:37,688 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 19:24:37,727 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(coalesce(casefileheader.attorney_name, ''), 'bob') * 100 AS similarity_score, CASE WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') >= 0.6) THEN 'High' WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, similarity(coalesce(casefileheader.attorney_name, ''), 'bob') * 100 AS similarity_score, CASE WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') >= 0.6) THEN 'High' WHEN (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.attorney_name IS NOT NULL AND (similarity(coalesce(casefileheader.attorney_name, ''), 'bob') > 0.3 OR lower(coalesce(casefileheader.attorney_name, '')) LIKE lower('%bob%'))
2025-01-21 19:24:37,728 - multi_filter_search - ERROR - Error in multi_filter_search: Label name similarity_score is being renamed to an anonymous label due to disambiguation which is not supported right now.  Please use unique names for explicit labels.
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 105, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 76, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1145, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 894, in c
    self._populate_column_collection()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 1705, in _populate_column_collection
    self.element._generate_fromclause_column_proxies(self)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 6468, in _generate_fromclause_column_proxies
    c._make_proxy(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 4819, in _make_proxy
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Label name similarity_score is being renamed to an anonymous label due to disambiguation which is not supported right now.  Please use unique names for explicit labels.
2025-01-21 19:24:37,733 - __main__ - ERROR - Error in combined_search: Label name similarity_score is being renamed to an anonymous label due to disambiguation which is not supported right now.  Please use unique names for explicit labels.
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 105, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 76, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1145, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 894, in c
    self._populate_column_collection()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 1705, in _populate_column_collection
    self.element._generate_fromclause_column_proxies(self)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 6468, in _generate_fromclause_column_proxies
    c._make_proxy(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 4819, in _make_proxy
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Label name similarity_score is being renamed to an anonymous label due to disambiguation which is not supported right now.  Please use unique names for explicit labels.
2025-01-21 19:24:37,734 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:24:37] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 19:24:50,480 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-21 19:24:50,848 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:24:50,853 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:24:52,369 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:24:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:24:52,372 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:24:52,373 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 19:24:52,411 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:24:54,145 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 19:24:54,153 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 19:24:54,474 - multi_filter_search - INFO - Query executed in 2.06s, total processing time: 2.10s
2025-01-21 19:24:54,537 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:24:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:18,605 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 19:52:18,990 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:52:18,995 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:52:22,380 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:22] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:22,384 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:52:22,384 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 19:52:22,417 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:52:24,345 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 19:52:24,352 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 19:52:24,543 - multi_filter_search - INFO - Query executed in 2.13s, total processing time: 2.16s
2025-01-21 19:52:24,608 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:24] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:28,307 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:28,310 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'Joe', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:52:28,310 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'Joe', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 19:52:28,314 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:52:28,317 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'Joe') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'Joe') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'Joe') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'Joe') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Joe') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Joe%')
2025-01-21 19:52:28,931 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-21 19:52:28,941 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'Joe') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'Joe') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'Joe') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'Joe') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Joe') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Joe%')) AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 19:52:29,597 - multi_filter_search - INFO - Query executed in 1.28s, total processing time: 1.29s
2025-01-21 19:52:29,659 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:29] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:38,558 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:38,561 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:52:38,561 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 19:52:38,566 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:52:38,570 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 19:52:39,023 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 19:52:39,034 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 19:52:39,284 - multi_filter_search - INFO - Query executed in 0.71s, total processing time: 0.72s
2025-01-21 19:52:39,418 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:39] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:44,938 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:44] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:44,941 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:52:44,941 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 19:52:44,945 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:52:44,949 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'uncase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'uncase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%uncase%')
2025-01-21 19:52:45,431 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 19:52:45,440 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.anon_1_serial_number 
FROM (SELECT anon_1.serial_number AS anon_1_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1 INTERSECT SELECT anon_3.serial_number AS anon_3_serial_number 
FROM (SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, similarity(casefileheader.mark_identification, 'uncase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'uncase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%uncase%')) AS anon_3) AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 19:52:45,840 - multi_filter_search - INFO - Query executed in 0.89s, total processing time: 0.90s
2025-01-21 19:52:45,912 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:45] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:52:48,782 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:52:48,782 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, page=1, per_page=10
2025-01-21 19:52:48,786 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:52:48,789 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'uncase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'uncase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%uncase%')
2025-01-21 19:52:48,791 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 108, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 79, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-21 19:52:48,796 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 108, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 79, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-21 19:52:48,799 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:52:48] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 19:53:13,648 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 19:53:14,066 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:53:14,069 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:54:19,833 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 19:54:20,195 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:54:20,198 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:54:22,862 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-21 19:54:22,863 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-21 19:54:22,863 - werkzeug - INFO -  * Restarting with stat
2025-01-21 19:54:23,087 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:54:23,091 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:54:25,896 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:54:25] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:54:25,898 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:54:25,898 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, page=1, per_page=10
2025-01-21 19:54:25,920 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:54:25,922 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'uncase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'uncase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%uncase%')
2025-01-21 19:54:25,922 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 108, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 79, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-21 19:54:25,925 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 108, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 79, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-21 19:54:25,926 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:54:25] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 19:54:27,301 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:54:27,301 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, page=1, per_page=10
2025-01-21 19:54:27,305 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:54:27,309 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'uncase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality, casefile.serial_number AS serial_number__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'uncase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%uncase%')
2025-01-21 19:54:27,310 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 108, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 79, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-21 19:54:27,313 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 108, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 79, in build_query_recursive
    combined_query = session.query(subqueries[0].c.serial_number)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-21 19:54:27,317 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:54:27] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 19:56:25,488 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 19:56:25,547 - werkzeug - INFO -  * Restarting with stat
2025-01-21 19:56:25,845 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:56:25,849 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:56:41,024 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 19:56:41,088 - werkzeug - INFO -  * Restarting with stat
2025-01-21 19:56:41,308 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:56:41,312 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:56:56,516 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 19:56:56,611 - werkzeug - INFO -  * Restarting with stat
2025-01-21 19:56:56,884 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:56:56,888 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:57:13,066 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 19:57:13,124 - werkzeug - INFO -  * Restarting with stat
2025-01-21 19:57:13,449 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 19:57:13,454 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 19:57:18,407 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:57:18] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 19:57:18,411 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 19:57:18,411 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, page=1, per_page=10
2025-01-21 19:57:18,446 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 19:57:18,448 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'uncase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'uncase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%uncase%')
2025-01-21 19:57:18,448 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'with_only_columns'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 105, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 69, in build_query_recursive
    subqueries = [build_query_recursive(op, session) for op in operands]
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 80, in build_query_recursive
    combined_query = combined_query.filter(CaseFile.serial_number.in_(sq.with_only_columns(CaseFile.serial_number).subquery()))
                                                                      ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Query' object has no attribute 'with_only_columns'
2025-01-21 19:57:18,456 - __main__ - ERROR - Error in combined_search: 'Query' object has no attribute 'with_only_columns'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 105, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 69, in build_query_recursive
    subqueries = [build_query_recursive(op, session) for op in operands]
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 80, in build_query_recursive
    combined_query = combined_query.filter(CaseFile.serial_number.in_(sq.with_only_columns(CaseFile.serial_number).subquery()))
                                                                      ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Query' object has no attribute 'with_only_columns'
2025-01-21 19:57:18,463 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 19:57:18] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 20:08:59,815 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 20:08:59,884 - werkzeug - INFO -  * Restarting with stat
2025-01-21 20:09:00,200 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 20:09:00,207 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 20:09:02,955 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:09:02] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 20:09:02,958 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 20:09:02,958 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'uncase', 'label': 'Word Mark'}]}]}, page=1, per_page=10
2025-01-21 20:09:02,991 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 20:09:02,993 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'uncase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'uncase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'uncase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%uncase%')
2025-01-21 20:09:05,702 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 20:09:05,711 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'uncase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%uncase%')) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 20:09:05,790 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'uncase', 'similarity_4': 0.3, 'lower_2': '%uncase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'uncase', 'similarity_4': 0.3, 'lower_2': '%uncase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:09:05,869 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'uncase', 'similarity_4': 0.3, 'lower_2': '%uncase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'uncase', 'similarity_4': 0.3, 'lower_2': '%uncase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:09:05,870 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:09:05] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 20:09:56,086 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:09:56] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 20:09:56,090 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 20:09:56,090 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 20:09:56,094 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 20:09:56,426 - multi_filter_search - INFO - Total results before pagination: 9
2025-01-21 20:09:56,434 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 20:09:56,557 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:09:56,623 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:09:56,629 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:09:56] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 20:10:03,881 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 20:10:03,886 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 20:10:03,886 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 20:10:03,889 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 20:10:03,892 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 20:10:04,199 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 20:10:04,206 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 20:10:04,420 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:10:04,485 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:10:04,491 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:04] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 20:10:09,265 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 20:10:09,269 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 20:10:09,269 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 20:10:09,274 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 20:10:09,277 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 20:10:09,277 - multi_filter_search - ERROR - Error in multi_filter_search: 'CompoundSelect' object has no attribute 'count'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'count'
2025-01-21 20:10:09,279 - __main__ - ERROR - Error in combined_search: 'CompoundSelect' object has no attribute 'count'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'count'
2025-01-21 20:10:09,281 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:09] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 20:10:18,935 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:18] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 20:10:18,939 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 20:10:18,939 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}]}, page=1, per_page=10
2025-01-21 20:10:18,942 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 20:10:18,944 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 20:10:19,508 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 20:10:19,517 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 20:10:19,623 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:10:19,713 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:10:19,718 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:19] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 20:10:30,126 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 20:10:30,128 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 20:10:30,129 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 20:10:30,133 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 20:10:30,359 - multi_filter_search - INFO - Total results before pagination: 9
2025-01-21 20:10:30,367 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 20:10:30,453 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:10:30,691 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 20:10:30,695 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:30] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 20:10:35,702 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:35] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 20:10:35,705 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 20:10:35,705 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 20:10:35,710 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 20:10:35,713 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 20:10:35,714 - multi_filter_search - ERROR - Error in multi_filter_search: 'CompoundSelect' object has no attribute 'count'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'count'
2025-01-21 20:10:35,715 - __main__ - ERROR - Error in combined_search: 'CompoundSelect' object has no attribute 'count'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'count'
2025-01-21 20:10:35,717 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:35] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 20:10:37,970 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 20:10:37,971 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}]}, page=1, per_page=10
2025-01-21 20:10:37,975 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 20:10:37,979 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 20:10:37,979 - multi_filter_search - ERROR - Error in multi_filter_search: 'CompoundSelect' object has no attribute 'count'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'count'
2025-01-21 20:10:37,981 - __main__ - ERROR - Error in combined_search: 'CompoundSelect' object has no attribute 'count'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'count'
2025-01-21 20:10:37,983 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 20:10:37] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:21:11,267 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:21:11] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:21:11,270 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:21:11,270 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:21:11,283 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:21:19,821 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(*) AS count_1 
FROM (SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2)) AS anon_1]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3142, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(*) AS count_1 
FROM (SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2)) AS anon_1]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-21 22:21:19,825 - __main__ - ERROR - Error in combined_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(*) AS count_1 
FROM (SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2)) AS anon_1]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3142, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(*) AS count_1 
FROM (SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2)) AS anon_1]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-21 22:21:19,828 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:21:19] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:21:25,698 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:21:25] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:21:25,702 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:21:25,702 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:21:25,706 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:21:26,588 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-21 22:21:26,594 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:21:26,672 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:21:26,739 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:21:26,745 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:21:26] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:21:36,836 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-21 22:21:36,836 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-21 22:21:36,837 - werkzeug - INFO -  * Restarting with stat
2025-01-21 22:21:37,073 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 22:21:37,081 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 22:21:42,819 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:21:42] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:21:42,822 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:21:42,822 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:21:42,857 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:21:44,411 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-21 22:21:44,418 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:21:44,485 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:21:44,559 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:21:44,566 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:21:44] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:22:11,620 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:22:11] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:22:11,625 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'in case', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:22:11,625 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'in case', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:22:11,629 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'in case') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'in case') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'in case') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'in case') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'in case') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%in case%')
2025-01-21 22:22:11,923 - multi_filter_search - INFO - Total results before pagination: 14
2025-01-21 22:22:11,929 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'in case') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%in case%')) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:22:12,011 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'in case', 'similarity_2': 0.3, 'lower_1': '%in case%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'in case', 'similarity_2': 0.3, 'lower_1': '%in case%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:22:12,197 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'in case', 'similarity_2': 0.3, 'lower_1': '%in case%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'in case', 'similarity_2': 0.3, 'lower_1': '%in case%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:22:12,203 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:22:12] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:22:50,102 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:22:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:22:50,107 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:22:50,107 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 22:22:50,110 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:22:50,113 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:22:50,518 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:22:50,526 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:22:50,592 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:22:50,660 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:22:50,666 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:22:50] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:22:52,732 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:22:52,733 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}]}, page=1, per_page=10
2025-01-21 22:22:52,737 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:22:52,740 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:22:53,128 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:22:53,138 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:22:53,232 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:22:53,297 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'incase', 'similarity_2': 0.3, 'lower_1': '%incase%', 'similarity_3': 'bob', 'similarity_4': 0.3, 'lower_2': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:22:53,302 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:22:53] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:23:51,225 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:23:51] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:23:51,227 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:23:51,228 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 22:23:51,231 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:23:51,514 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:23:51,519 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:23:51,586 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:23:51,650 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:23:51,654 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:23:51] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:23:56,827 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:23:56] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:23:56,830 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:23:56,830 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:23:56,834 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:23:56,836 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:23:57,574 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:23:57,581 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:23:57,648 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:23:57,732 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:23:57,737 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:23:57] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:23:58,459 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:23:58,459 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:23:58,463 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:23:58,466 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:23:59,146 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:23:59,152 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:23:59,219 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:23:59,285 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:23:59,291 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:23:59] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:23:59,750 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:23:59,750 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:23:59,756 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:23:59,760 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:00,414 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:00,423 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:00,536 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:00,601 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:00,608 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:00] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:00,989 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:00,989 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:24:00,993 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:24:00,997 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:01,424 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:01,432 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:01,496 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:01,561 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:01,565 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:01] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:02,013 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:02] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:24:02,016 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:02,016 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:24:02,021 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:24:02,024 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:02,443 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:02,451 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:02,513 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:02,816 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:02,822 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:02] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:03,202 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:03,202 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:24:03,206 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:24:03,210 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:03,633 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:03,640 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:03,921 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:03,985 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:03,991 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:03] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:04,368 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:04,368 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:24:04,372 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:24:04,375 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:04,914 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:04,923 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:04,985 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:05,048 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:05,054 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:05] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:05,454 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:05,454 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:24:05,459 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:24:05,463 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:05,962 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:05,968 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:06,056 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:06,129 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_2)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:06,134 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:06] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:07,229 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:07] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:24:07,233 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:07,233 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}]}, page=1, per_page=10
2025-01-21 22:24:07,237 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:24:07,239 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:07,626 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:07,633 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:07,722 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:07,786 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:07,791 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:07] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:08,535 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:08,535 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}]}, page=1, per_page=10
2025-01-21 22:24:08,540 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:24:08,543 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:08,976 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:08,985 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:09,107 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:09,175 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:09,180 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:09] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:09,565 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:09,566 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}]}, page=1, per_page=10
2025-01-21 22:24:09,570 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:24:09,574 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:24:10,025 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:24:10,034 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:10,156 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:10,242 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.attorney_name) LIKE lower(%(lower_1)s)) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_3)s) > %(similarity_4)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_2)s)) AS anon_3)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bob', 'similarity_2': 0.3, 'lower_1': '%bob%', 'similarity_3': 'incase', 'similarity_4': 0.3, 'lower_2': '%incase%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:10,244 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:10] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:24:39,363 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:24:39,366 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'jo biden', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:24:39,366 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'jo biden', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:24:39,371 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'jo biden') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'jo biden') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'jo biden') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'jo biden') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'jo biden') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%jo biden%')
2025-01-21 22:24:39,716 - multi_filter_search - INFO - Total results before pagination: 2
2025-01-21 22:24:39,723 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'jo biden') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%jo biden%')) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:24:39,785 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'jo biden', 'similarity_2': 0.3, 'lower_1': '%jo biden%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'jo biden', 'similarity_2': 0.3, 'lower_1': '%jo biden%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:40,038 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'jo biden', 'similarity_2': 0.3, 'lower_1': '%jo biden%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'jo biden', 'similarity_2': 0.3, 'lower_1': '%jo biden%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:24:40,044 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:24:40] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:26:03,420 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-21 22:26:03,421 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-21 22:26:03,421 - werkzeug - INFO -  * Restarting with stat
2025-01-21 22:26:03,649 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 22:26:03,654 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 22:26:11,093 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:26:11] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:26:11,097 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:26:11,097 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:26:11,134 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:26:13,158 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-21 22:26:13,166 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1)) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:26:13,364 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:26:13,459 - __main__ - ERROR - Error in combined_search: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.SyntaxError: subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 148, in multi_filter_search
    for row in final_results_query.all():
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) subquery has too many columns
LINE 3: WHERE casefile.serial_number IN (SELECT casefile.serial_numb...
                                     ^

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id, casefile.serial_number AS casefile_serial_number__1, casefile.registration_number AS casefile_registration_number__1, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_1)) ORDER BY casefileheader.filing_date DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%', 'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-01-21 22:26:13,460 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:26:13] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:33:40,147 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:33:40] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:33:40,207 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:33:40,207 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:33:40,216 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:33:40,220 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(*) AS count_1 
FROM (SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2)) AS anon_1]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3142, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(*) AS count_1 
FROM (SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2)) AS anon_1]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-21 22:33:40,223 - __main__ - ERROR - Error in combined_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(*) AS count_1 
FROM (SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2)) AS anon_1]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 121, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3142, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT count(*) AS count_1 
FROM (SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefileheader.mark_identification AS casefileheader_mark_identification, casefileheader.status_code AS casefileheader_status_code, casefileheader.filing_date AS casefileheader_filing_date, casefileheader.registration_date AS casefileheader_registration_date, casefileheader.attorney_name AS casefileheader_attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, %(similarity_1)s) > %(similarity_2)s OR lower(casefileheader.mark_identification) LIKE lower(%(lower_1)s)) AS anon_2)) AS anon_1]
[parameters: {'similarity_1': 'bull dog', 'similarity_2': 0.3, 'lower_1': '%bull dog%'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-21 22:33:40,227 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:33:40] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:40:39,414 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-21 22:40:39,483 - werkzeug - INFO -  * Restarting with stat
2025-01-21 22:40:39,797 - werkzeug - WARNING -  * Debugger is active!
2025-01-21 22:40:39,805 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-21 22:40:42,645 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:40:42] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:40:42,648 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:40:42,648 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:40:42,674 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:41:16,487 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:41:16] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:41:16,489 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:41:16,489 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:41:16,491 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:42:14,095 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 122, in multi_filter_search
    total_count = session.query(func.count(final_subquery.c.serial_number)).scalar() # This line changed
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-21 22:42:14,098 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 122, in multi_filter_search
    total_count = session.query(func.count(final_subquery.c.serial_number)).scalar() # This line changed
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-21 22:42:14,111 - __main__ - ERROR - Error in combined_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 122, in multi_filter_search
    total_count = session.query(func.count(final_subquery.c.serial_number)).scalar() # This line changed
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-21 22:42:14,114 - __main__ - ERROR - Error in combined_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 122, in multi_filter_search
    total_count = session.query(func.count(final_subquery.c.serial_number)).scalar() # This line changed
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-21 22:42:14,118 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:42:14] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:42:14,119 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:42:14] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:42:34,150 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:42:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:42:34,154 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:42:34,154 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:42:34,157 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:42:35,903 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-21 22:42:35,910 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:42:36,234 - multi_filter_search - INFO - Query executed in 2.08s, total processing time: 2.08s
2025-01-21 22:42:36,298 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:42:36] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:42:49,435 - __main__ - INFO - Fetching details for case: 73220202
2025-01-21 22:42:49,435 - __main__ - INFO - Database session established.
2025-01-21 22:42:49,662 - __main__ - INFO - Case query executed. Case found: True
2025-01-21 22:42:50,026 - __main__ - INFO - Header query executed. Header found: True
2025-01-21 22:42:50,104 - __main__ - INFO - Owners query executed. Owners found: 7
2025-01-21 22:42:50,258 - __main__ - INFO - Classifications query executed. Classifications found: 4
2025-01-21 22:42:50,390 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 1
2025-01-21 22:42:50,459 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-21 22:42:50,521 - __main__ - INFO - Design Searches query executed. Design Searches found: 4
2025-01-21 22:42:50,687 - __main__ - INFO - Event Statements query executed. Event Statements found: 40
2025-01-21 22:42:50,911 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-21 22:42:50,980 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-21 22:42:51,047 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-21 22:42:51,047 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-21 22:42:51,110 - __main__ - INFO - Database session closed.
2025-01-21 22:42:51,112 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:42:51] "GET /api/case/73220202 HTTP/1.1" 200 -
2025-01-21 22:43:09,166 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:43:09,169 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:43:09,170 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 22:43:09,173 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:43:09,176 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:43:09,786 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:43:09,794 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:43:10,507 - multi_filter_search - INFO - Query executed in 1.33s, total processing time: 1.34s
2025-01-21 22:43:10,569 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:10] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:43:23,715 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:43:23,719 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:43:23,719 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-21 22:43:23,723 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:43:23,727 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:43:24,467 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:43:24,477 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:43:24,860 - multi_filter_search - INFO - Query executed in 1.13s, total processing time: 1.14s
2025-01-21 22:43:24,990 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:24] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:43:27,103 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:43:27,103 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}]}, page=1, per_page=10
2025-01-21 22:43:27,107 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:43:27,111 - multi_filter_search - INFO - Generated query for strategy 'attorney_name': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.attorney_name, 'bob') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.attorney_name, 'bob') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')
2025-01-21 22:43:27,611 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:43:27,621 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_3) AND casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_4)) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:43:28,004 - multi_filter_search - INFO - Query executed in 0.89s, total processing time: 0.90s
2025-01-21 22:43:28,135 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:28] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:43:39,680 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:43:39,682 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bulldog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:43:39,683 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bulldog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:43:39,686 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bulldog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bulldog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bulldog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bulldog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bulldog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bulldog%')
2025-01-21 22:43:40,192 - multi_filter_search - INFO - Total results before pagination: 14
2025-01-21 22:43:40,200 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bulldog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bulldog%')) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:43:40,368 - multi_filter_search - INFO - Query executed in 0.68s, total processing time: 0.68s
2025-01-21 22:43:40,431 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:43:54,193 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:43:54,196 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:43:54,196 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-21 22:43:54,203 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:43:54,426 - multi_filter_search - INFO - Total results before pagination: 24
2025-01-21 22:43:54,433 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:43:54,521 - multi_filter_search - INFO - Query executed in 0.32s, total processing time: 0.32s
2025-01-21 22:43:54,584 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:43:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:07,461 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:07] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:07,466 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 2, 'per_page': 10}
2025-01-21 22:44:07,466 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=2, per_page=10
2025-01-21 22:44:07,468 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:44:08,027 - multi_filter_search - INFO - Total results before pagination: 24
2025-01-21 22:44:08,033 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-21 22:44:08,115 - multi_filter_search - INFO - Query executed in 0.65s, total processing time: 0.65s
2025-01-21 22:44:08,195 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:11,941 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 3, 'per_page': 10}
2025-01-21 22:44:11,941 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=3, per_page=10
2025-01-21 22:44:11,943 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:44:12,245 - multi_filter_search - INFO - Total results before pagination: 24
2025-01-21 22:44:12,251 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 20
2025-01-21 22:44:12,336 - multi_filter_search - INFO - Query executed in 0.39s, total processing time: 0.40s
2025-01-21 22:44:12,398 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:12] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:15,665 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:15] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:15,669 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 2, 'per_page': 10}
2025-01-21 22:44:15,669 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=2, per_page=10
2025-01-21 22:44:15,670 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:44:15,912 - multi_filter_search - INFO - Total results before pagination: 24
2025-01-21 22:44:15,919 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-21 22:44:16,011 - multi_filter_search - INFO - Query executed in 0.34s, total processing time: 0.34s
2025-01-21 22:44:16,088 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:16] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:17,194 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:44:17,195 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-21 22:44:17,196 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:44:17,485 - multi_filter_search - INFO - Total results before pagination: 24
2025-01-21 22:44:17,491 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:44:17,576 - multi_filter_search - INFO - Query executed in 0.38s, total processing time: 0.38s
2025-01-21 22:44:17,639 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:17] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:35,031 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:35] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:35,034 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:44:35,035 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:44:35,036 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:44:35,039 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:44:35,040 - multi_filter_search - ERROR - Error in multi_filter_search: 'CompoundSelect' object has no attribute 'with_entities'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 118, in multi_filter_search
    final_subquery = final_query.with_entities(CaseFile.serial_number).subquery() # This line changed
                     ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'with_entities'
2025-01-21 22:44:35,048 - __main__ - ERROR - Error in combined_search: 'CompoundSelect' object has no attribute 'with_entities'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 118, in multi_filter_search
    final_subquery = final_query.with_entities(CaseFile.serial_number).subquery() # This line changed
                     ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'with_entities'
2025-01-21 22:44:35,056 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:35] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-21 22:44:38,812 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:44:38,812 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'incase', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:44:38,814 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:44:38,817 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'incase') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'incase') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')
2025-01-21 22:44:39,119 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-21 22:44:39,125 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'incase') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%incase%')) AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:44:39,307 - multi_filter_search - INFO - Query executed in 0.49s, total processing time: 0.50s
2025-01-21 22:44:39,435 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:39] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:47,573 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:47,577 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:44:47,577 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:44:47,579 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:44:47,583 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-21 22:44:48,027 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:44:48,034 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:44:48,348 - multi_filter_search - INFO - Query executed in 0.76s, total processing time: 0.77s
2025-01-21 22:44:48,412 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:48] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:56,292 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:56] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:44:56,295 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'full nog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:44:56,296 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'full nog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:44:56,298 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:44:56,302 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'full nog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'full nog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'full nog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'full nog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'full nog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%full nog%')
2025-01-21 22:44:56,527 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-21 22:44:56,533 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'full nog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%full nog%')) AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:44:56,735 - multi_filter_search - INFO - Query executed in 0.43s, total processing time: 0.44s
2025-01-21 22:44:56,823 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:44:56] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:46:55,665 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:46:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:46:55,669 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'null dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:46:55,669 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'null dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:46:55,670 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-21 22:46:55,673 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'null dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'null dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%null dog%')
2025-01-21 22:46:56,030 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-21 22:46:56,036 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'null dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%null dog%')) AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:46:56,270 - multi_filter_search - INFO - Query executed in 0.60s, total processing time: 0.60s
2025-01-21 22:46:56,345 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:46:56] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:47:02,367 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:47:02] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:47:02,370 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'null dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:47:02,370 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'null dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:47:02,375 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'null dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'null dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%null dog%')
2025-01-21 22:47:02,732 - multi_filter_search - INFO - Total results before pagination: 8
2025-01-21 22:47:02,739 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'null dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%null dog%')) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:47:02,955 - multi_filter_search - INFO - Query executed in 0.58s, total processing time: 0.58s
2025-01-21 22:47:03,085 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:47:03] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:49:28,809 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:49:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:49:28,814 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'null dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:49:28,814 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'null dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:49:28,821 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'null dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'null dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'null dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%null dog%')
2025-01-21 22:49:29,069 - multi_filter_search - INFO - Total results before pagination: 8
2025-01-21 22:49:29,077 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'null dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%null dog%')) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:49:29,355 - multi_filter_search - INFO - Query executed in 0.53s, total processing time: 0.54s
2025-01-21 22:49:29,453 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:49:29] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:49:41,247 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:49:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:49:41,251 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'rull got', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:49:41,251 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'rull got', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:49:41,255 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'rull got') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'rull got') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'rull got') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'rull got') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'rull got') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%rull got%')
2025-01-21 22:49:41,567 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-21 22:49:41,575 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'rull got') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%rull got%')) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:49:41,761 - multi_filter_search - INFO - Query executed in 0.51s, total processing time: 0.51s
2025-01-21 22:49:41,937 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:49:41] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:49:54,057 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:49:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:49:54,061 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'rule dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:49:54,061 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'rule dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:49:54,064 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'rule dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'rule dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'rule dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'rule dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'rule dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%rule dog%')
2025-01-21 22:49:54,303 - multi_filter_search - INFO - Total results before pagination: 5
2025-01-21 22:49:54,310 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'rule dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%rule dog%')) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:49:54,519 - multi_filter_search - INFO - Query executed in 0.45s, total processing time: 0.46s
2025-01-21 22:49:54,590 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:49:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:50:06,097 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:50:06] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-21 22:50:06,100 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'rull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-21 22:50:06,101 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'rull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-21 22:50:06,104 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'rull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'rull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'rull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'rull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'rull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%rull dog%')
2025-01-21 22:50:06,445 - multi_filter_search - INFO - Total results before pagination: 5
2025-01-21 22:50:06,452 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'rull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%rull dog%')) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-21 22:50:06,626 - multi_filter_search - INFO - Query executed in 0.52s, total processing time: 0.53s
2025-01-21 22:50:06,687 - werkzeug - INFO - 127.0.0.1 - - [21/Jan/2025 22:50:06] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:40:07,204 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-22 09:40:07,205 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-22 09:40:07,205 - werkzeug - INFO -  * Restarting with stat
2025-01-22 09:40:07,448 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 09:40:07,458 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 09:40:19,516 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:40:19] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:40:19,520 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:40:19,520 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-22 09:40:19,559 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:40:21,476 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-22 09:40:21,483 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 09:40:21,720 - multi_filter_search - INFO - Query executed in 2.16s, total processing time: 2.20s
2025-01-22 09:40:21,862 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:40:21] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:40:58,185 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:40:58] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:40:58,189 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:40:58,190 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:40:58,194 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:40:58,198 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:40:58,433 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 09:40:58,441 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AND casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 09:40:58,697 - multi_filter_search - INFO - Query executed in 0.50s, total processing time: 0.51s
2025-01-22 09:40:58,759 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:40:58] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:41:03,848 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:41:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:41:03,852 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:41:03,852 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, page=1, per_page=10
2025-01-22 09:41:03,856 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:41:03,857 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:41:04,246 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 09:41:04,250 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefile.transaction_date, casefile.application_information_id, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_3) AND casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_4)) AS anon_2)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 09:41:04,470 - multi_filter_search - INFO - Query executed in 0.61s, total processing time: 0.62s
2025-01-22 09:41:04,532 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:41:04] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:41:11,456 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-22 09:41:11,456 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-22 09:41:11,457 - werkzeug - INFO -  * Restarting with stat
2025-01-22 09:41:11,684 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 09:41:11,689 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 09:41:32,870 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:41:32] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:41:32,874 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:41:32,874 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:41:32,915 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:41:32,918 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:41:32,919 - multi_filter_search - ERROR - Error in multi_filter_search: 'CompoundSelect' object has no attribute 'with_entities'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 118, in multi_filter_search
    final_subquery = final_query.with_entities(CaseFile.serial_number).subquery() # This line changed
                     ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'with_entities'
2025-01-22 09:41:32,924 - __main__ - ERROR - Error in combined_search: 'CompoundSelect' object has no attribute 'with_entities'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 118, in multi_filter_search
    final_subquery = final_query.with_entities(CaseFile.serial_number).subquery() # This line changed
                     ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'with_entities'
2025-01-22 09:41:32,930 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:41:32] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 09:43:35,350 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 09:43:35,419 - werkzeug - INFO -  * Restarting with stat
2025-01-22 09:43:35,735 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 09:43:35,740 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 09:47:53,726 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 09:47:53,788 - werkzeug - INFO -  * Restarting with stat
2025-01-22 09:47:54,113 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 09:47:54,117 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 09:47:59,638 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:47:59] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:47:59,642 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:47:59,642 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:47:59,673 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:47:59,677 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:47:59,677 - multi_filter_search - ERROR - Error in multi_filter_search: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x1091430b0; anon_1>. Use the plain select() object without calling .subquery() or .alias().
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 85, in build_query_recursive
    union_query = union_all(*serial_number_subqueries).subquery()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/_selectable_constructors.py", line 597, in union_all
    return CompoundSelect._create_union_all(*selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4457, in _create_union_all
    return CompoundSelect(_CompoundSelectKeyword.UNION_ALL, *selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4439, in __init__
    coercions.expect(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 424, in expect
    return impl._implicit_coercions(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 488, in _implicit_coercions
    self._raise_for_expected(element, argname, resolved)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 1385, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x1091430b0; anon_1>. Use the plain select() object without calling .subquery() or .alias().
2025-01-22 09:47:59,681 - __main__ - ERROR - Error in combined_search: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x1091430b0; anon_1>. Use the plain select() object without calling .subquery() or .alias().
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 85, in build_query_recursive
    union_query = union_all(*serial_number_subqueries).subquery()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/_selectable_constructors.py", line 597, in union_all
    return CompoundSelect._create_union_all(*selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4457, in _create_union_all
    return CompoundSelect(_CompoundSelectKeyword.UNION_ALL, *selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4439, in __init__
    coercions.expect(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 424, in expect
    return impl._implicit_coercions(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 488, in _implicit_coercions
    self._raise_for_expected(element, argname, resolved)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 1385, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x1091430b0; anon_1>. Use the plain select() object without calling .subquery() or .alias().
2025-01-22 09:47:59,681 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:47:59] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 09:48:29,214 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:48:29] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:48:29,219 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:48:29,219 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:48:29,223 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:48:29,224 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:48:31,017 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 09:48:31,023 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 09:48:31,212 - multi_filter_search - INFO - Query executed in 1.99s, total processing time: 1.99s
2025-01-22 09:48:31,276 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:48:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:48:32,930 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:48:32,930 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:48:32,934 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:48:32,935 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:48:32,936 - multi_filter_search - ERROR - Error in multi_filter_search: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x109244980; anon_1>. Use the plain select() object without calling .subquery() or .alias().
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 85, in build_query_recursive
    union_query = union_all(*serial_number_subqueries).subquery()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/_selectable_constructors.py", line 597, in union_all
    return CompoundSelect._create_union_all(*selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4457, in _create_union_all
    return CompoundSelect(_CompoundSelectKeyword.UNION_ALL, *selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4439, in __init__
    coercions.expect(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 424, in expect
    return impl._implicit_coercions(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 488, in _implicit_coercions
    self._raise_for_expected(element, argname, resolved)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 1385, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x109244980; anon_1>. Use the plain select() object without calling .subquery() or .alias().
2025-01-22 09:48:32,937 - __main__ - ERROR - Error in combined_search: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x109244980; anon_1>. Use the plain select() object without calling .subquery() or .alias().
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 85, in build_query_recursive
    union_query = union_all(*serial_number_subqueries).subquery()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/_selectable_constructors.py", line 597, in union_all
    return CompoundSelect._create_union_all(*selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4457, in _create_union_all
    return CompoundSelect(_CompoundSelectKeyword.UNION_ALL, *selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4439, in __init__
    coercions.expect(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 424, in expect
    return impl._implicit_coercions(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 488, in _implicit_coercions
    self._raise_for_expected(element, argname, resolved)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 1385, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x109244980; anon_1>. Use the plain select() object without calling .subquery() or .alias().
2025-01-22 09:48:32,938 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:48:32] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 09:48:38,681 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-22 09:48:38,681 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-22 09:48:38,682 - werkzeug - INFO -  * Restarting with stat
2025-01-22 09:48:38,900 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 09:48:38,904 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 09:48:41,672 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:48:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:48:41,677 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:48:41,677 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:48:41,715 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:48:41,719 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:48:41,720 - multi_filter_search - ERROR - Error in multi_filter_search: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x112142c90; anon_1>. Use the plain select() object without calling .subquery() or .alias().
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 85, in build_query_recursive
    union_query = union_all(*serial_number_subqueries).subquery()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/_selectable_constructors.py", line 597, in union_all
    return CompoundSelect._create_union_all(*selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4457, in _create_union_all
    return CompoundSelect(_CompoundSelectKeyword.UNION_ALL, *selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4439, in __init__
    coercions.expect(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 424, in expect
    return impl._implicit_coercions(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 488, in _implicit_coercions
    self._raise_for_expected(element, argname, resolved)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 1385, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x112142c90; anon_1>. Use the plain select() object without calling .subquery() or .alias().
2025-01-22 09:48:41,723 - __main__ - ERROR - Error in combined_search: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x112142c90; anon_1>. Use the plain select() object without calling .subquery() or .alias().
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 85, in build_query_recursive
    union_query = union_all(*serial_number_subqueries).subquery()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/_selectable_constructors.py", line 597, in union_all
    return CompoundSelect._create_union_all(*selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4457, in _create_union_all
    return CompoundSelect(_CompoundSelectKeyword.UNION_ALL, *selects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/selectable.py", line 4439, in __init__
    coercions.expect(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 424, in expect
    return impl._implicit_coercions(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 488, in _implicit_coercions
    self._raise_for_expected(element, argname, resolved)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 1385, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SELECT construct for inclusion in a UNION or other set construct expected, got <sqlalchemy.sql.selectable.Subquery at 0x112142c90; anon_1>. Use the plain select() object without calling .subquery() or .alias().
2025-01-22 09:48:41,724 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:48:41] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 09:50:01,807 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 09:50:01,877 - werkzeug - INFO -  * Restarting with stat
2025-01-22 09:50:02,201 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 09:50:02,206 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 09:50:03,741 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:50:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:50:03,744 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:50:03,744 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:50:03,783 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:50:03,787 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:50:03,787 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 88, in build_query_recursive
    combined_query = base_query(session).join(union_query, CaseFile.serial_number == union_query.c.serial_number)
                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 09:50:03,791 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 88, in build_query_recursive
    combined_query = base_query(session).join(union_query, CaseFile.serial_number == union_query.c.serial_number)
                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 09:50:03,793 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:50:03] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 09:50:13,843 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:50:13] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 09:50:13,846 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:50:13,846 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:50:13,850 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:50:13,851 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:50:13,851 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 88, in build_query_recursive
    combined_query = base_query(session).join(union_query, CaseFile.serial_number == union_query.c.serial_number)
                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 09:50:13,854 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 88, in build_query_recursive
    combined_query = base_query(session).join(union_query, CaseFile.serial_number == union_query.c.serial_number)
                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 09:50:13,858 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:50:13] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 09:50:16,317 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 09:50:16,317 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 09:50:16,321 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 09:50:16,322 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 09:50:16,323 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 88, in build_query_recursive
    combined_query = base_query(session).join(union_query, CaseFile.serial_number == union_query.c.serial_number)
                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 09:50:16,325 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 88, in build_query_recursive
    combined_query = base_query(session).join(union_query, CaseFile.serial_number == union_query.c.serial_number)
                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 09:50:16,328 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 09:50:16] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 10:57:47,154 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-22 10:57:47,155 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-22 10:57:47,156 - werkzeug - INFO -  * Restarting with stat
2025-01-22 10:57:47,400 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 10:57:47,406 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 10:58:03,598 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 10:58:03,652 - werkzeug - INFO -  * Restarting with stat
2025-01-22 10:58:03,948 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 10:58:03,953 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 10:58:11,041 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 10:58:11,099 - werkzeug - INFO -  * Restarting with stat
2025-01-22 10:58:11,822 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 10:58:11,827 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 10:58:16,891 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 10:58:16,957 - werkzeug - INFO -  * Restarting with stat
2025-01-22 10:58:17,183 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 10:58:17,187 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 10:58:20,404 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 10:58:20] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 10:58:20,409 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 10:58:20,409 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 10:58:20,445 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 10:58:20,448 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 10:58:20,448 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 88, in build_query_recursive
    combined_query = base_query(session).join(union_query, CaseFile.serial_number == union_query.c.serial_number)
                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 10:58:20,452 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 110, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 88, in build_query_recursive
    combined_query = base_query(session).join(union_query, CaseFile.serial_number == union_query.c.serial_number)
                                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 10:58:20,453 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 10:58:20] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:04:56,131 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 11:04:56,195 - werkzeug - INFO -  * Restarting with stat
2025-01-22 11:04:56,514 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 11:04:56,519 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 11:04:59,033 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:04:59] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:04:59,036 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:04:59,036 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:04:59,069 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:04:59,072 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:04:59,073 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 111, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 89, in build_query_recursive
    combined_query = base_query(session).join(union_subquery, CaseFile.serial_number == union_subquery.c.serial_number) # This line changed
                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:04:59,076 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 111, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 89, in build_query_recursive
    combined_query = base_query(session).join(union_subquery, CaseFile.serial_number == union_subquery.c.serial_number) # This line changed
                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:04:59,078 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:04:59] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:09:23,016 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:09:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:09:23,020 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:09:23,020 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:09:23,023 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:09:23,024 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:09:25,301 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:09:25,309 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:09:25,475 - multi_filter_search - INFO - Query executed in 2.45s, total processing time: 2.46s
2025-01-22 11:09:25,537 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:09:25] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:09:27,881 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:09:27,882 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:09:27,887 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:09:27,888 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:09:27,889 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 111, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 89, in build_query_recursive
    combined_query = base_query(session).join(union_subquery, CaseFile.serial_number == union_subquery.c.serial_number) # This line changed
                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:09:27,892 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 111, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 89, in build_query_recursive
    combined_query = base_query(session).join(union_subquery, CaseFile.serial_number == union_subquery.c.serial_number) # This line changed
                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:09:27,895 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:09:27] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:09:33,819 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 11:09:33,889 - werkzeug - INFO -  * Restarting with stat
2025-01-22 11:09:34,179 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 11:09:34,183 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 11:09:35,393 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:09:35] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:09:35,397 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:09:35,397 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:09:35,426 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:09:35,429 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:09:35,429 - multi_filter_search - ERROR - Error in multi_filter_search: Column expression, FROM clause, or other columns clause element expected, got <sqlalchemy.sql.selectable.Select object at 0x105b5f080> object resolved from <sqlalchemy.orm.query.Query object at 0x105b5ec30> object. To create a FROM clause from a <class 'sqlalchemy.sql.selectable.Select'> object, use the .subquery() method. (Background on this error at: https://sqlalche.me/e/20/89ve)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 96, in build_query_recursive
    combined_query = session.query(base_query_with_serial).join(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 275, in __init__
    self._set_entities(entities)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 288, in _set_entities
    coercions.expect(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 424, in expect
    return impl._implicit_coercions(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 488, in _implicit_coercions
    self._raise_for_expected(element, argname, resolved)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 1134, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: Column expression, FROM clause, or other columns clause element expected, got <sqlalchemy.sql.selectable.Select object at 0x105b5f080> object resolved from <sqlalchemy.orm.query.Query object at 0x105b5ec30> object. To create a FROM clause from a <class 'sqlalchemy.sql.selectable.Select'> object, use the .subquery() method. (Background on this error at: https://sqlalche.me/e/20/89ve)
2025-01-22 11:09:35,433 - __main__ - ERROR - Error in combined_search: Column expression, FROM clause, or other columns clause element expected, got <sqlalchemy.sql.selectable.Select object at 0x105b5f080> object resolved from <sqlalchemy.orm.query.Query object at 0x105b5ec30> object. To create a FROM clause from a <class 'sqlalchemy.sql.selectable.Select'> object, use the .subquery() method. (Background on this error at: https://sqlalche.me/e/20/89ve)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 96, in build_query_recursive
    combined_query = session.query(base_query_with_serial).join(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 275, in __init__
    self._set_entities(entities)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 288, in _set_entities
    coercions.expect(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 424, in expect
    return impl._implicit_coercions(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 488, in _implicit_coercions
    self._raise_for_expected(element, argname, resolved)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 1134, in _raise_for_expected
    return super()._raise_for_expected(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 695, in _raise_for_expected
    super()._raise_for_expected(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: Column expression, FROM clause, or other columns clause element expected, got <sqlalchemy.sql.selectable.Select object at 0x105b5f080> object resolved from <sqlalchemy.orm.query.Query object at 0x105b5ec30> object. To create a FROM clause from a <class 'sqlalchemy.sql.selectable.Select'> object, use the .subquery() method. (Background on this error at: https://sqlalche.me/e/20/89ve)
2025-01-22 11:09:35,434 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:09:35] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:12:17,716 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:12:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:12:17,720 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:12:17,721 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:12:17,724 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:12:17,725 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:12:19,674 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:12:19,679 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:12:19,851 - multi_filter_search - INFO - Query executed in 2.12s, total processing time: 2.13s
2025-01-22 11:12:19,914 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:12:19] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:12:26,210 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 11:12:26,268 - werkzeug - INFO -  * Restarting with stat
2025-01-22 11:12:26,562 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 11:12:26,566 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 11:12:28,529 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:12:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:12:28,533 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:12:28,534 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:12:28,572 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:12:28,575 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:12:28,575 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:12:28,578 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:12:28,580 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:12:28] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:12:47,396 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:12:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:12:47,399 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:12:47,399 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:12:47,403 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:12:47,405 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:12:47,405 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:12:47,408 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:12:47,411 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:12:47] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:12:48,727 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:12:48,728 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:12:48,731 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:12:48,732 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:12:50,428 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:12:50,434 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:12:50,736 - multi_filter_search - INFO - Query executed in 2.00s, total processing time: 2.01s
2025-01-22 11:12:50,798 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:12:50] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:15:36,826 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 11:15:36,899 - werkzeug - INFO -  * Restarting with stat
2025-01-22 11:15:37,192 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 11:15:37,196 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 11:15:38,688 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:15:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:15:38,691 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:15:38,691 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:15:38,721 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:15:38,723 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:15:40,646 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:15:40,652 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:15:40,867 - multi_filter_search - INFO - Query executed in 2.14s, total processing time: 2.18s
2025-01-22 11:15:40,928 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:15:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:15:42,505 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:15:42,505 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:15:42,509 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:15:42,510 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:15:42,511 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:15:42,516 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:15:42,519 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:15:42] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:16:27,784 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:16:27] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:16:27,788 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:16:27,788 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:16:27,792 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:16:27,793 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:16:27,794 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:16:27,796 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:16:27,799 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:16:27] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:16:29,119 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:16:29,119 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:16:29,122 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:16:29,124 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:16:29,610 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:16:29,617 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:16:29,939 - multi_filter_search - INFO - Query executed in 0.81s, total processing time: 0.82s
2025-01-22 11:16:30,002 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:16:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:16:31,632 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:16:31,633 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:16:31,637 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:16:31,638 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:16:31,638 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:16:31,642 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:16:31,645 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:16:31] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:16:37,396 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-22 11:16:37,396 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-22 11:16:37,396 - werkzeug - INFO -  * Restarting with stat
2025-01-22 11:16:37,620 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 11:16:37,624 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 11:16:41,208 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:16:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:16:41,210 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:16:41,211 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:16:41,229 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:16:41,231 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:16:41,231 - multi_filter_search - ERROR - Error in multi_filter_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:16:41,234 - __main__ - ERROR - Error in combined_search: serial_number
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1614, in __getattr__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'serial_number'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 120, in multi_filter_search
    final_query = build_query_recursive(filter_tree, session)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 97, in build_query_recursive
    union_subquery, base_query_with_serial_subquery.c.serial_number == union_subquery.c.serial_number
                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1616, in __getattr__
    raise AttributeError(key) from err
AttributeError: serial_number
2025-01-22 11:16:41,235 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:16:41] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-22 11:16:50,134 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:16:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:16:50,137 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:16:50,138 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:16:50,141 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:16:50,142 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:16:51,967 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:16:51,973 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:16:52,152 - multi_filter_search - INFO - Query executed in 2.01s, total processing time: 2.01s
2025-01-22 11:16:52,241 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:16:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:20:57,747 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-22 11:20:57,801 - werkzeug - INFO -  * Restarting with stat
2025-01-22 11:20:58,097 - werkzeug - WARNING -  * Debugger is active!
2025-01-22 11:20:58,101 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-22 11:21:01,837 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:21:01] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:21:01,840 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:21:01,841 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:21:01,877 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:21:01,880 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:21:03,746 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:21:03,752 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:21:03,995 - multi_filter_search - INFO - Query executed in 2.11s, total processing time: 2.15s
2025-01-22 11:21:04,139 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:21:04] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:21:43,525 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:21:43] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:21:43,529 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:21:43,529 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:21:43,535 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:21:43,536 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:21:43,869 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:21:43,876 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:21:44,268 - multi_filter_search - INFO - Query executed in 0.73s, total processing time: 0.74s
2025-01-22 11:21:44,331 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:21:44] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:21:54,799 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:21:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:21:54,803 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 2, 'per_page': 10}
2025-01-22 11:21:54,803 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=2, per_page=10
2025-01-22 11:21:54,807 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:21:54,808 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:21:55,150 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:21:55,156 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-22 11:21:55,374 - multi_filter_search - INFO - Query executed in 0.57s, total processing time: 0.57s
2025-01-22 11:21:55,438 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:21:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:21:58,859 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 3, 'per_page': 10}
2025-01-22 11:21:58,859 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=3, per_page=10
2025-01-22 11:21:58,863 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:21:58,864 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:21:59,131 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:21:59,136 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 20
2025-01-22 11:21:59,344 - multi_filter_search - INFO - Query executed in 0.48s, total processing time: 0.48s
2025-01-22 11:21:59,406 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:21:59] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:22:08,789 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:22:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:22:08,794 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 4, 'per_page': 10}
2025-01-22 11:22:08,794 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=4, per_page=10
2025-01-22 11:22:08,798 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:22:08,799 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:22:09,171 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:22:09,177 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 30
2025-01-22 11:22:09,353 - multi_filter_search - INFO - Query executed in 0.55s, total processing time: 0.56s
2025-01-22 11:22:09,415 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:22:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:22:42,770 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:22:42] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:22:42,774 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 3, 'per_page': 10}
2025-01-22 11:22:42,774 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=3, per_page=10
2025-01-22 11:22:42,778 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:22:42,779 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:22:43,116 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:22:43,121 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 20
2025-01-22 11:22:43,392 - multi_filter_search - INFO - Query executed in 0.61s, total processing time: 0.62s
2025-01-22 11:22:43,455 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:22:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:22:55,739 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:22:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:22:55,742 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:22:55,742 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:22:55,745 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:22:55,746 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:22:56,224 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:22:56,231 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) AND casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:22:56,408 - multi_filter_search - INFO - Query executed in 0.66s, total processing time: 0.67s
2025-01-22 11:22:56,557 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:22:56] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:23:00,488 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:23:00,489 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-22 11:23:00,493 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:23:00,494 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:23:00,878 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:23:00,883 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:23:01,378 - multi_filter_search - INFO - Query executed in 0.88s, total processing time: 0.89s
2025-01-22 11:23:01,438 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:23:01] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:23:13,728 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:23:13] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:23:13,732 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 2, 'per_page': 10}
2025-01-22 11:23:13,732 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=2, per_page=10
2025-01-22 11:23:13,737 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:23:13,738 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:23:14,075 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:23:14,081 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_1) OR casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_2) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-22 11:23:14,331 - multi_filter_search - INFO - Query executed in 0.59s, total processing time: 0.60s
2025-01-22 11:23:14,395 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:23:14] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:24:20,690 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:24:20] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:24:20,694 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:24:20,694 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, page=1, per_page=10
2025-01-22 11:24:20,699 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:24:20,701 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:24:21,310 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:24:21,317 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) OR casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:24:21,700 - multi_filter_search - INFO - Query executed in 1.00s, total processing time: 1.01s
2025-01-22 11:24:21,761 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:24:21] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:24:26,445 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:24:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:24:26,448 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, 'page': 2, 'per_page': 10}
2025-01-22 11:24:26,448 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, page=2, per_page=10
2025-01-22 11:24:26,452 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:24:26,453 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:24:26,903 - multi_filter_search - INFO - Total results before pagination: 39
2025-01-22 11:24:26,909 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) OR casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_3)) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-22 11:24:27,210 - multi_filter_search - INFO - Query executed in 0.76s, total processing time: 0.76s
2025-01-22 11:24:27,298 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:24:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:35:53,520 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:35:53] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-22 11:35:53,524 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, 'page': 1, 'per_page': 10}
2025-01-22 11:35:53,524 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-06-18', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, page=1, per_page=10
2025-01-22 11:35:53,528 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:35:53,529 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:35:53,534 - multi_filter_search - INFO - Generated query for strategy 'wordmark': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS similarity_score, CASE WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.8) THEN 'Very High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.6) THEN 'High' WHEN (similarity(casefileheader.mark_identification, 'bull dog') >= 0.4) THEN 'Medium' ELSE 'Low' END AS match_quality 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')
2025-01-22 11:35:53,535 - multi_filter_search - INFO - Generated query for strategy 'filing_date': SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18'
2025-01-22 11:35:53,937 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-22 11:35:53,946 - multi_filter_search - INFO - Final query SQL: SELECT casefile.serial_number, casefile.registration_number, casefileheader.mark_identification, casefileheader.status_code, casefileheader.filing_date, casefileheader.registration_date, casefileheader.attorney_name, casefile.serial_number AS serial_number__1, casefile.registration_number AS registration_number__1, casefileheader.mark_identification AS mark_identification__1, casefileheader.status_code AS status_code__1, casefileheader.filing_date AS filing_date__1, casefileheader.registration_date AS registration_date__1, casefileheader.attorney_name AS attorney_name__1 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_2.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) OR casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_3)) AS anon_1) AND casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-06-18') AS anon_6)) AS anon_4) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-22 11:35:54,315 - multi_filter_search - INFO - Query executed in 0.78s, total processing time: 0.79s
2025-01-22 11:35:54,378 - werkzeug - INFO - 127.0.0.1 - - [22/Jan/2025 11:35:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:37:51,561 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 11:37:51,561 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 11:37:51,562 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:37:51,799 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:37:51,806 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:38:13,676 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:38:13] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:38:13,679 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:38:13,679 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 11:38:13,682 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:38:15,792 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 11:38:15,793 - multi_filter_search - ERROR - Error in multi_filter_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 177, in multi_filter_search
    unioned_score_query.c.sn.label('sn'),
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-23 11:38:15,855 - __main__ - ERROR - Error in combined_search: 'Query' object has no attribute 'c'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 177, in multi_filter_search
    unioned_score_query.c.sn.label('sn'),
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Query' object has no attribute 'c'
2025-01-23 11:38:15,861 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:38:15] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 11:41:34,363 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-23 11:41:34,441 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:41:34,741 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:41:34,747 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:42:31,369 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-23 11:42:31,429 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:42:31,735 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:42:31,739 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:42:43,645 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:42:43] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:42:43,649 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:42:43,649 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 11:42:43,653 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:42:45,468 - multi_filter_search - ERROR - Error in multi_filter_search: Can't determine which FROM clause to join from, there are multiple FROMS which can join to this entity. Please use the .select_from() method to establish an explicit left side, as well as providing an explicit ON clause if not present already to help resolve the ambiguity.
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 215, in multi_filter_search
    rows = final_results_query.all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 703, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 316, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 4680, in visit_select
    compile_state = select_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 683, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1181, in create_for_statement
    self._setup_for_generate()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1216, in _setup_for_generate
    self._join(query._setup_joins, self._entities)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1859, in _join
    self._join_left_to_right(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1894, in _join_left_to_right
    ) = self._join_determine_implicit_left_side(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 2049, in _join_determine_implicit_left_side
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Can't determine which FROM clause to join from, there are multiple FROMS which can join to this entity. Please use the .select_from() method to establish an explicit left side, as well as providing an explicit ON clause if not present already to help resolve the ambiguity.
2025-01-23 11:42:45,542 - __main__ - ERROR - Error in combined_search: Can't determine which FROM clause to join from, there are multiple FROMS which can join to this entity. Please use the .select_from() method to establish an explicit left side, as well as providing an explicit ON clause if not present already to help resolve the ambiguity.
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 215, in multi_filter_search
    rows = final_results_query.all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 703, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 316, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 4680, in visit_select
    compile_state = select_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 683, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1181, in create_for_statement
    self._setup_for_generate()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1216, in _setup_for_generate
    self._join(query._setup_joins, self._entities)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1859, in _join
    self._join_left_to_right(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1894, in _join_left_to_right
    ) = self._join_determine_implicit_left_side(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 2049, in _join_determine_implicit_left_side
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Can't determine which FROM clause to join from, there are multiple FROMS which can join to this entity. Please use the .select_from() method to establish an explicit left side, as well as providing an explicit ON clause if not present already to help resolve the ambiguity.
2025-01-23 11:42:45,547 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:42:45] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 11:48:49,107 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-23 11:48:49,171 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:48:49,476 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:48:49,481 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:48:57,219 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 11:48:57,219 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 11:48:57,220 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:48:57,442 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:48:57,446 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:49:00,542 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:49:00] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:49:00,545 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:49:00,545 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 11:49:00,548 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:49:02,491 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 11:49:02,495 - multi_filter_search - ERROR - Error in multi_filter_search: Boolean value of this clause is not defined
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 239, in multi_filter_search
    if scoring_agg:
       ^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 748, in __bool__
    raise TypeError("Boolean value of this clause is not defined")
TypeError: Boolean value of this clause is not defined
2025-01-23 11:49:02,574 - __main__ - ERROR - Error in combined_search: Boolean value of this clause is not defined
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 239, in multi_filter_search
    if scoring_agg:
       ^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 748, in __bool__
    raise TypeError("Boolean value of this clause is not defined")
TypeError: Boolean value of this clause is not defined
2025-01-23 11:49:02,576 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:49:02] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 11:53:34,725 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-23 11:53:34,791 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:53:35,118 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:53:35,123 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:53:41,572 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:53:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:53:41,575 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:53:41,575 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 11:53:41,577 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:53:43,551 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 11:53:43,564 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 11:53:44,080 - multi_filter_search - ERROR - Error in multi_filter_search: Boolean value of this clause is not defined
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 273, in multi_filter_search
    if scoring_agg:
       ^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 748, in __bool__
    raise TypeError("Boolean value of this clause is not defined")
TypeError: Boolean value of this clause is not defined
2025-01-23 11:53:44,147 - __main__ - ERROR - Error in combined_search: Boolean value of this clause is not defined
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 273, in multi_filter_search
    if scoring_agg:
       ^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 748, in __bool__
    raise TypeError("Boolean value of this clause is not defined")
TypeError: Boolean value of this clause is not defined
2025-01-23 11:53:44,151 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:53:44] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 11:53:58,399 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-23 11:53:58,464 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:53:58,770 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:53:58,774 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:54:35,204 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-23 11:54:35,266 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:54:35,891 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:54:35,960 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:54:36,924 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:54:36] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:54:36,928 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:54:36,928 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 11:54:36,930 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:54:38,608 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 11:54:38,620 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 11:54:38,934 - multi_filter_search - ERROR - Error in multi_filter_search: Boolean value of this clause is not defined
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 273, in multi_filter_search
    if scoring_agg:
       ^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 748, in __bool__
    raise TypeError("Boolean value of this clause is not defined")
TypeError: Boolean value of this clause is not defined
2025-01-23 11:54:38,999 - __main__ - ERROR - Error in combined_search: Boolean value of this clause is not defined
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 273, in multi_filter_search
    if scoring_agg:
       ^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 748, in __bool__
    raise TypeError("Boolean value of this clause is not defined")
TypeError: Boolean value of this clause is not defined
2025-01-23 11:54:39,003 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:54:39] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 11:54:54,208 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-23 11:54:54,280 - werkzeug - INFO -  * Restarting with stat
2025-01-23 11:54:54,582 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 11:54:54,588 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 11:54:56,138 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:54:56] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:54:56,141 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:54:56,142 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': ' bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 11:54:56,144 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:54:58,301 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 11:54:58,313 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 11:54:58,716 - multi_filter_search - INFO - Query executed in 2.57s
2025-01-23 11:54:58,779 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:54:58] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:58:34,168 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:58:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:58:34,171 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'drive', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:58:34,171 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'drive', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 11:58:34,173 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:58:34,397 - multi_filter_search - INFO - Total results before pagination: 29
2025-01-23 11:58:34,407 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'drive') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'drive') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%drive%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'drive') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%drive%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 11:58:34,693 - multi_filter_search - INFO - Query executed in 0.52s
2025-01-23 11:58:34,755 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:58:34] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:58:53,031 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:58:53] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:58:53,034 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:58:53,034 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 11:58:53,035 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:58:53,262 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 11:58:53,273 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 11:58:53,577 - multi_filter_search - INFO - Query executed in 0.54s
2025-01-23 11:58:53,640 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:58:53] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:07,982 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:07] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:07,987 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:59:07,987 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 11:59:07,988 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:59:07,995 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 11:59:08,386 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 11:59:08,398 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 11:59:08,729 - multi_filter_search - INFO - Query executed in 0.74s
2025-01-23 11:59:08,812 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:11,078 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:59:11,079 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 11:59:11,079 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:59:11,080 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 11:59:11,351 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 11:59:11,361 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 11:59:11,745 - multi_filter_search - INFO - Query executed in 0.67s
2025-01-23 11:59:11,894 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:11] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:17,138 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:17,142 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 2, 'per_page': 10}
2025-01-23 11:59:17,143 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=2, per_page=10
2025-01-23 11:59:17,144 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:59:17,145 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 11:59:17,451 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 11:59:17,464 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-23 11:59:17,899 - multi_filter_search - INFO - Query executed in 0.76s
2025-01-23 11:59:18,037 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:18] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:26,593 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:26,596 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 3, 'per_page': 10}
2025-01-23 11:59:26,596 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=3, per_page=10
2025-01-23 11:59:26,596 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:59:26,597 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 11:59:26,880 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 11:59:26,891 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 20
2025-01-23 11:59:27,286 - multi_filter_search - INFO - Query executed in 0.69s
2025-01-23 11:59:27,349 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:40,901 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:40] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:40,905 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 2, 'per_page': 10}
2025-01-23 11:59:40,905 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=2, per_page=10
2025-01-23 11:59:40,906 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:59:40,906 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 11:59:41,131 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 11:59:41,143 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-23 11:59:41,515 - multi_filter_search - INFO - Query executed in 0.61s
2025-01-23 11:59:41,579 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:41] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:53,992 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:53] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 11:59:53,995 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 11:59:53,995 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 11:59:53,996 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 11:59:53,996 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 11:59:54,381 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 11:59:54,393 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 11:59:54,775 - multi_filter_search - INFO - Query executed in 0.78s
2025-01-23 11:59:54,907 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 11:59:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:16:19,383 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 12:16:19,507 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:16:19,860 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 12:16:19,874 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 12:16:37,040 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 12:16:37,113 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:16:37,415 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 12:16:37,419 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 12:16:41,473 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 12:16:41,548 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:16:41,831 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 12:16:41,836 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 12:16:45,885 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 12:16:45,953 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:16:46,197 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 12:16:46,201 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 12:17:48,883 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 12:17:48,938 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:17:49,258 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 12:17:49,263 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 12:18:15,021 - __main__ - INFO - Fetching details for case: 73199066
2025-01-23 12:18:15,022 - __main__ - INFO - Database session established.
2025-01-23 12:18:16,886 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 12:18:17,085 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 12:18:17,322 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-23 12:18:17,424 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-23 12:18:17,495 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-23 12:18:17,659 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 12:18:17,725 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 12:18:17,902 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-23 12:18:17,973 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 12:18:18,042 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 12:18:18,107 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 12:18:18,107 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 12:18:18,168 - __main__ - INFO - Database session closed.
2025-01-23 12:18:18,171 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:18:18] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-23 12:18:26,351 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:18:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:18:26,356 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'Max Vern', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:18:26,356 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'Max Vern', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 12:18:26,357 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:18:26,358 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 12:18:26,791 - multi_filter_search - INFO - Total results before pagination: 42
2025-01-23 12:18:26,806 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'Max Vern') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'Max Vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%Max Vern%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_6) OR casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'Max Vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%Max Vern%')) AS anon_7)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:18:27,470 - multi_filter_search - INFO - Query executed in 1.11s
2025-01-23 12:18:27,532 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:18:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:18:31,556 - __main__ - INFO - Fetching details for case: 73242226
2025-01-23 12:18:31,556 - __main__ - INFO - Database session established.
2025-01-23 12:18:31,676 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 12:18:31,741 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 12:18:31,808 - __main__ - INFO - Owners query executed. Owners found: 4
2025-01-23 12:18:31,877 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 12:18:32,005 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 1
2025-01-23 12:18:32,072 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-23 12:18:32,136 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 12:18:32,272 - __main__ - INFO - Event Statements query executed. Event Statements found: 23
2025-01-23 12:18:32,539 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 12:18:32,600 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 12:18:32,660 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 12:18:32,661 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 12:18:32,722 - __main__ - INFO - Database session closed.
2025-01-23 12:18:32,724 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:18:32] "GET /api/case/73242226 HTTP/1.1" 200 -
2025-01-23 12:18:39,836 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:18:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:18:39,840 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'Max Vern', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:18:39,840 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'attorney_name', 'query': 'Max Vern', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 12:18:39,841 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:18:39,841 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 12:18:40,401 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 12:18:40,416 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'Max Vern') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'Max Vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%Max Vern%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_6) AND casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'Max Vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%Max Vern%')) AS anon_7)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:18:40,968 - multi_filter_search - INFO - Query executed in 1.13s
2025-01-23 12:18:41,030 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:18:41] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:20:54,552 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:20:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:20:54,556 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'max vern', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:20:54,556 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'max vern', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 12:20:54,558 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 12:20:55,133 - multi_filter_search - INFO - Total results before pagination: 27
2025-01-23 12:20:55,144 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'max vern') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'max vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%max vern%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'max vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%max vern%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:20:55,657 - multi_filter_search - INFO - Query executed in 1.10s
2025-01-23 12:20:55,717 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:20:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:25:02,411 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 12:25:02,485 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:25:28,730 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 12:25:28,730 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 12:25:28,731 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:25:28,952 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 12:25:28,956 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 12:26:12,429 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 12:26:12,499 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:26:12,835 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 12:26:12,839 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 12:26:23,369 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:26:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:26:23,372 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'max vern', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:26:23,373 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'max vern', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 12:26:23,375 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 12:26:25,407 - multi_filter_search - INFO - Total results before pagination: 27
2025-01-23 12:26:25,420 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'max vern') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'max vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%max vern%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'max vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%max vern%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:26:25,787 - multi_filter_search - INFO - Query executed in 2.41s
2025-01-23 12:26:25,866 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:26:25] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:26:30,903 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:26:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:26:30,908 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'max vern', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:26:30,908 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'max vern', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 12:26:30,909 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 12:26:30,909 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:26:31,309 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 12:26:31,322 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'max vern') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'max vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%max vern%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'max vern') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%max vern%')) AS anon_6) AND casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:26:31,926 - multi_filter_search - INFO - Query executed in 1.02s
2025-01-23 12:26:32,011 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:26:32] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:29:28,901 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:29:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:29:28,904 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:29:28,904 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 12:29:28,905 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:29:29,248 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 12:29:29,260 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:29:29,598 - multi_filter_search - INFO - Query executed in 0.69s
2025-01-23 12:29:29,685 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:29:29] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:29:30,993 - __main__ - INFO - Fetching details for case: 73199066
2025-01-23 12:29:30,993 - __main__ - INFO - Database session established.
2025-01-23 12:29:31,231 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 12:29:31,300 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 12:29:31,399 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-23 12:29:31,474 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-23 12:29:31,697 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-23 12:29:31,769 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 12:29:31,832 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 12:29:32,420 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-23 12:29:32,512 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 12:29:32,579 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 12:29:32,942 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 12:29:32,943 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 12:29:33,019 - __main__ - INFO - Database session closed.
2025-01-23 12:29:33,020 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:29:33] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-23 12:29:44,607 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:29:44] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:29:44,611 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'international_class', 'query': '017', 'group': 'Classification', 'label': 'International Class'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:29:44,611 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'international_class', 'query': '017', 'group': 'Classification', 'label': 'International Class'}]}, page=1, per_page=10
2025-01-23 12:29:44,612 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:29:44,613 - multi_filter_search - INFO - Generated query for strategy 'international_class'.
2025-01-23 12:29:45,135 - multi_filter_search - INFO - Total results before pagination: 3
2025-01-23 12:29:45,147 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT classification.serial_number 
FROM classification 
WHERE classification.international_code = '017')) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:29:45,732 - multi_filter_search - INFO - Query executed in 1.12s
2025-01-23 12:29:45,861 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:29:45] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:29:59,784 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:29:59] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:29:59,787 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'international_class', 'query': '017', 'group': 'Classification', 'label': 'International Class'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:29:59,787 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'international_class', 'query': '017', 'group': 'Classification', 'label': 'International Class'}]}, page=1, per_page=10
2025-01-23 12:29:59,787 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:29:59,788 - multi_filter_search - INFO - Generated query for strategy 'international_class'.
2025-01-23 12:30:00,658 - multi_filter_search - INFO - Total results before pagination: 1282
2025-01-23 12:30:00,670 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT classification.serial_number 
FROM classification 
WHERE classification.international_code = '017')) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:30:01,072 - multi_filter_search - INFO - Query executed in 1.29s
2025-01-23 12:30:01,149 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:30:01] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:30:09,784 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:30:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:30:09,786 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'international_class', 'query': '017', 'group': 'Classification', 'label': 'International Class'}]}, 'page': 2, 'per_page': 10}
2025-01-23 12:30:09,787 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'international_class', 'query': '017', 'group': 'Classification', 'label': 'International Class'}]}, page=2, per_page=10
2025-01-23 12:30:09,787 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:30:09,788 - multi_filter_search - INFO - Generated query for strategy 'international_class'.
2025-01-23 12:30:10,177 - multi_filter_search - INFO - Total results before pagination: 1282
2025-01-23 12:30:10,188 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT classification.serial_number 
FROM classification 
WHERE classification.international_code = '017')) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-23 12:30:10,567 - multi_filter_search - INFO - Query executed in 0.78s
2025-01-23 12:30:10,634 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:30:10] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:30:15,152 - __main__ - INFO - Fetching details for case: 73264987
2025-01-23 12:30:15,152 - __main__ - INFO - Database session established.
2025-01-23 12:30:15,340 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 12:30:15,407 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 12:30:15,478 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-23 12:30:15,548 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 12:30:15,740 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 12:30:15,809 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 12:30:15,876 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 12:30:16,126 - __main__ - INFO - Event Statements query executed. Event Statements found: 18
2025-01-23 12:30:16,260 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 12:30:16,324 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 12:30:16,386 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 12:30:16,386 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 12:30:16,468 - __main__ - INFO - Database session closed.
2025-01-23 12:30:16,469 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:30:16] "GET /api/case/73264987 HTTP/1.1" 200 -
2025-01-23 12:39:31,577 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 12:39:31,668 - werkzeug - INFO -  * Restarting with stat
2025-01-23 12:39:32,002 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 12:39:32,006 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 12:39:34,906 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:39:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:39:34,909 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'international_class', 'query': '017', 'group': 'Classification', 'label': 'International Class'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:39:34,909 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'international_class', 'query': '017', 'group': 'Classification', 'label': 'International Class'}]}, page=1, per_page=10
2025-01-23 12:39:34,912 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:39:34,912 - multi_filter_search - INFO - Generated query for strategy 'international_class'.
2025-01-23 12:39:36,863 - multi_filter_search - INFO - Total results before pagination: 1282
2025-01-23 12:39:36,878 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT classification.serial_number 
FROM classification 
WHERE classification.international_code = '017')) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:39:37,256 - multi_filter_search - INFO - Query executed in 2.35s
2025-01-23 12:39:37,388 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:39:37] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:39:59,857 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:39:59] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:39:59,860 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'disclaimed', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:39:59,860 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'disclaimed', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 12:39:59,865 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 12:40:44,159 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:40:44] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:40:44,163 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'the term', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:40:44,163 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'the term', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 12:40:44,164 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 12:40:56,154 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:40:56] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:40:56,158 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:40:56,158 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 12:40:56,159 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:40:57,487 - multi_filter_search - INFO - Total results before pagination: 31
2025-01-23 12:40:57,497 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:40:58,717 - multi_filter_search - INFO - Query executed in 2.56s
2025-01-23 12:40:58,780 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:40:58] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:41:59,394 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:41:59] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:41:59,398 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'bull', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:41:59,398 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'bull', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 12:41:59,400 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 12:43:03,147 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:43:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:43:03,150 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'maiota', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:43:03,150 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'maiota', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 12:43:03,151 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:43:04,612 - multi_filter_search - INFO - Total results before pagination: 4
2025-01-23 12:43:04,623 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'maiota') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'maiota') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%maiota%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'maiota') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%maiota%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:43:05,594 - multi_filter_search - INFO - Query executed in 2.44s
2025-01-23 12:43:05,658 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:43:05] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:43:07,895 - __main__ - INFO - Fetching details for case: 73066900
2025-01-23 12:43:07,895 - __main__ - INFO - Database session established.
2025-01-23 12:43:08,165 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 12:43:08,243 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 12:43:08,372 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-23 12:43:08,488 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 12:43:08,691 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 12:43:08,798 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 12:43:08,884 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 12:43:09,215 - __main__ - INFO - Event Statements query executed. Event Statements found: 18
2025-01-23 12:43:09,287 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 12:43:09,350 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 12:43:09,419 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 12:43:09,419 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 12:43:09,498 - __main__ - INFO - Database session closed.
2025-01-23 12:43:09,500 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:43:09] "GET /api/case/73066900 HTTP/1.1" 200 -
2025-01-23 12:43:23,695 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:43:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:43:23,698 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'auto shop', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:43:23,698 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'auto shop', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 12:43:23,698 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:43:24,690 - multi_filter_search - INFO - Total results before pagination: 27
2025-01-23 12:43:24,701 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'auto shop') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'auto shop') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%auto shop%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'auto shop') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%auto shop%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:43:26,034 - multi_filter_search - INFO - Query executed in 2.34s
2025-01-23 12:43:26,100 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:43:26] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:43:30,931 - __main__ - INFO - Fetching details for case: 73227275
2025-01-23 12:43:30,931 - __main__ - INFO - Database session established.
2025-01-23 12:43:31,236 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 12:43:31,318 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 12:43:31,440 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-23 12:43:31,552 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 12:43:31,763 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 12:43:31,849 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-23 12:43:31,924 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 12:43:32,286 - __main__ - INFO - Event Statements query executed. Event Statements found: 19
2025-01-23 12:43:32,365 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 12:43:32,430 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 12:43:32,492 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 12:43:32,492 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 12:43:32,556 - __main__ - INFO - Database session closed.
2025-01-23 12:43:32,558 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:43:32] "GET /api/case/73227275 HTTP/1.1" 200 -
2025-01-23 12:43:49,137 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:43:49] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:43:49,140 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'design_code', 'query': '1000', 'group': 'Visual Characteristics', 'label': 'Design Code'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:43:49,140 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'design_code', 'query': '1000', 'group': 'Visual Characteristics', 'label': 'Design Code'}]}, page=1, per_page=10
2025-01-23 12:43:49,141 - multi_filter_search - INFO - Generated query for strategy 'design_code'.
2025-01-23 12:43:49,291 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 12:43:49,296 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE false) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:43:49,362 - multi_filter_search - INFO - Query executed in 0.22s
2025-01-23 12:43:49,588 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:43:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:44:15,793 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:44:15] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:44:15,797 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'drawing_code_type', 'query': '1000', 'group': 'Visual Characteristics', 'label': 'Drawing Code'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:44:15,797 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'drawing_code_type', 'query': '1000', 'group': 'Visual Characteristics', 'label': 'Drawing Code'}]}, page=1, per_page=10
2025-01-23 12:44:15,797 - multi_filter_search - INFO - Generated query for strategy 'drawing_code_type'.
2025-01-23 12:44:15,955 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 12:44:15,960 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE false) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:44:16,024 - multi_filter_search - INFO - Query executed in 0.23s
2025-01-23 12:44:16,526 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:44:16] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:44:31,785 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:44:31] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:44:31,790 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'drawing_code_type', 'query': '1', 'group': 'Visual Characteristics', 'label': 'Drawing Code'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:44:31,790 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'drawing_code_type', 'query': '1', 'group': 'Visual Characteristics', 'label': 'Drawing Code'}]}, page=1, per_page=10
2025-01-23 12:44:31,791 - multi_filter_search - INFO - Generated query for strategy 'drawing_code_type'.
2025-01-23 12:44:32,579 - multi_filter_search - INFO - Total results before pagination: 23215
2025-01-23 12:44:32,587 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE substr(CAST(casefileheader.mark_drawing_code AS VARCHAR), 1, 1) = '1') AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:44:33,686 - multi_filter_search - INFO - Query executed in 1.90s
2025-01-23 12:44:33,773 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:44:33] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:44:38,488 - __main__ - INFO - Fetching details for case: 73237272
2025-01-23 12:44:38,488 - __main__ - INFO - Database session established.
2025-01-23 12:44:38,617 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 12:44:38,698 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 12:44:38,870 - __main__ - INFO - Owners query executed. Owners found: 0
2025-01-23 12:44:39,049 - __main__ - INFO - Classifications query executed. Classifications found: 0
2025-01-23 12:44:39,121 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 12:44:39,229 - __main__ - INFO - Statements query executed. Statements found: 0
2025-01-23 12:44:39,298 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 12:44:39,695 - __main__ - INFO - Event Statements query executed. Event Statements found: 6
2025-01-23 12:44:39,778 - __main__ - INFO - Correspondents query executed. Correspondents found: 0
2025-01-23 12:44:39,919 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 12:44:39,987 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 12:44:39,988 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 12:44:40,049 - __main__ - INFO - Database session closed.
2025-01-23 12:44:40,050 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:44:40] "GET /api/case/73237272 HTTP/1.1" 200 -
2025-01-23 12:47:14,672 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:47:14] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:47:14,675 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:47:14,675 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 12:47:14,679 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 12:50:01,760 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:50:01] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:50:01,763 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'ato', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:50:01,763 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'ato', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 12:50:01,763 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 12:50:03,689 - multi_filter_search - INFO - Total results before pagination: 167
2025-01-23 12:50:03,703 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'ato') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'ato') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%ato%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'ato') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%ato%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 12:50:05,328 - multi_filter_search - INFO - Query executed in 3.56s
2025-01-23 12:50:05,389 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:50:05] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:50:15,751 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 12:50:15] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 12:50:15,754 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 12:50:15,754 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 12:50:15,755 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 12:59:16,244 - multi_filter_search - INFO - Total results before pagination: 36945
2025-01-23 12:59:16,263 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'bull') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'bull') * 100) AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'bull') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%bull%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'bull') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%bull%'))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'bull') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%bull%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'bull') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%bull%'))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:00:40,950 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:00:40] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:00:40,953 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:00:40,953 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 13:00:40,954 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:00:43,133 - multi_filter_search - INFO - Total results before pagination: 31
2025-01-23 13:00:43,144 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:00:45,123 - multi_filter_search - INFO - Query executed in 4.17s
2025-01-23 13:00:45,194 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:00:45] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:04:08,381 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:04:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:04:08,385 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull', 'label': 'Word Mark'}, {'strategy': 'registration_date', 'query': '1981-10-13', 'group': 'Date Filters', 'label': 'Registration Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:04:08,385 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull', 'label': 'Word Mark'}, {'strategy': 'registration_date', 'query': '1981-10-13', 'group': 'Date Filters', 'label': 'Registration Date'}]}, page=1, per_page=10
2025-01-23 13:04:08,388 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:04:08,393 - multi_filter_search - INFO - Generated query for strategy 'registration_date'.
2025-01-23 13:04:09,329 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 13:04:09,340 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1981-10-13') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:04:10,771 - multi_filter_search - INFO - Query executed in 2.39s
2025-01-23 13:04:10,833 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:04:10] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:04:15,205 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:04:15] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:04:15,208 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'registration_date', 'query': '1981-10-13', 'group': 'Date Filters', 'label': 'Registration Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:04:15,208 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'registration_date', 'query': '1981-10-13', 'group': 'Date Filters', 'label': 'Registration Date'}]}, page=1, per_page=10
2025-01-23 13:04:15,209 - multi_filter_search - INFO - Generated query for strategy 'registration_date'.
2025-01-23 13:04:15,434 - multi_filter_search - INFO - Total results before pagination: 61
2025-01-23 13:04:15,440 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.registration_date = '1981-10-13') AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:04:15,746 - multi_filter_search - INFO - Query executed in 0.54s
2025-01-23 13:04:15,808 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:04:15] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:04:19,046 - __main__ - INFO - Fetching details for case: 73266551
2025-01-23 13:04:19,046 - __main__ - INFO - Database session established.
2025-01-23 13:04:19,182 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 13:04:19,416 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 13:04:19,568 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-23 13:04:19,694 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 13:04:19,808 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 13:04:19,940 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 13:04:20,004 - __main__ - INFO - Design Searches query executed. Design Searches found: 5
2025-01-23 13:04:20,562 - __main__ - INFO - Event Statements query executed. Event Statements found: 35
2025-01-23 13:04:20,726 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 13:04:20,858 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 13:04:20,990 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 13:04:20,990 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 13:04:21,055 - __main__ - INFO - Database session closed.
2025-01-23 13:04:21,056 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:04:21] "GET /api/case/73266551 HTTP/1.1" 200 -
2025-01-23 13:08:17,894 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:08:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:08:17,898 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'phonetic', 'query': 'thyme', 'group': 'General Search', 'label': 'Phonetic'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:08:17,898 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'phonetic', 'query': 'thyme', 'group': 'General Search', 'label': 'Phonetic'}]}, page=1, per_page=10
2025-01-23 13:08:18,363 - multi_filter_search - INFO - Generated query for strategy 'phonetic'.
2025-01-23 13:08:18,886 - multi_filter_search - INFO - Total results before pagination: 93
2025-01-23 13:08:20,235 - multi_filter_search - INFO - Query executed in 2.34s
2025-01-23 13:08:20,460 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:08:20] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:08:25,301 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:08:25] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:08:25,305 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'phonetic', 'query': 'thyme', 'group': 'General Search', 'label': 'Phonetic'}]}, 'page': 2, 'per_page': 10}
2025-01-23 13:08:25,305 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'phonetic', 'query': 'thyme', 'group': 'General Search', 'label': 'Phonetic'}]}, page=2, per_page=10
2025-01-23 13:08:25,706 - multi_filter_search - INFO - Generated query for strategy 'phonetic'.
2025-01-23 13:08:25,939 - multi_filter_search - INFO - Total results before pagination: 93
2025-01-23 13:08:26,522 - multi_filter_search - INFO - Query executed in 1.22s
2025-01-23 13:08:26,584 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:08:26] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:08:28,996 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'phonetic', 'query': 'thyme', 'group': 'General Search', 'label': 'Phonetic'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:08:28,996 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'phonetic', 'query': 'thyme', 'group': 'General Search', 'label': 'Phonetic'}]}, page=1, per_page=10
2025-01-23 13:08:29,404 - multi_filter_search - INFO - Generated query for strategy 'phonetic'.
2025-01-23 13:08:29,626 - multi_filter_search - INFO - Total results before pagination: 93
2025-01-23 13:08:30,422 - multi_filter_search - INFO - Query executed in 1.43s
2025-01-23 13:08:30,486 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:08:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:09:44,357 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:09:44] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:09:44,361 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'Mr. Auto Insurance', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:09:44,361 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'Mr. Auto Insurance', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 13:09:44,363 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 13:09:50,277 - multi_filter_search - INFO - Total results before pagination: 57
2025-01-23 13:09:50,287 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number JOIN owner ON casefile.serial_number = owner.serial_number 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'Mr. Auto Insurance') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%Mr. Auto Insurance%'))) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:09:55,891 - multi_filter_search - INFO - Query executed in 11.53s
2025-01-23 13:09:55,953 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:09:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:10:00,618 - __main__ - INFO - Fetching details for case: 73227275
2025-01-23 13:10:00,618 - __main__ - INFO - Database session established.
2025-01-23 13:10:00,760 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 13:10:00,866 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 13:10:01,133 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-23 13:10:01,284 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 13:10:01,371 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 13:10:01,525 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-23 13:10:01,656 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 13:10:02,471 - __main__ - INFO - Event Statements query executed. Event Statements found: 19
2025-01-23 13:10:02,579 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 13:10:02,708 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 13:10:02,772 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 13:10:02,773 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 13:10:02,833 - __main__ - INFO - Database session closed.
2025-01-23 13:10:02,835 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:10:02] "GET /api/case/73227275 HTTP/1.1" 200 -
2025-01-23 13:13:57,701 - multi_filter_search - INFO - Total results before pagination: 36945
2025-01-23 13:13:57,716 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'the term') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'the term') * 100) AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'the term') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%the term%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'the term') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%the term%'))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'the term') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%the term%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'the term') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%the term%'))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:17:31,410 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:17:31,489 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:17:31,808 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:17:31,812 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:17:41,489 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:17:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:17:41,491 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'description_of_mark', 'query': 'auto', 'group': 'General Search', 'label': 'Description of Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:17:41,492 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'description_of_mark', 'query': 'auto', 'group': 'General Search', 'label': 'Description of Mark'}]}, page=1, per_page=10
2025-01-23 13:17:41,496 - multi_filter_search - INFO - Generated query for strategy 'description_of_mark'.
2025-01-23 13:17:44,719 - multi_filter_search - INFO - Total results before pagination: 2
2025-01-23 13:17:44,734 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefile.serial_number IN (SELECT casefilestatement.serial_number 
FROM casefilestatement 
WHERE casefilestatement.type_code = 'DM0000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(casefilestatement.statement_text) LIKE lower('%auto%')))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT casefilestatement.serial_number 
FROM casefilestatement 
WHERE casefilestatement.type_code = 'DM0000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(casefilestatement.statement_text) LIKE lower('%auto%')))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:17:55,223 - multi_filter_search - INFO - Query executed in 13.73s
2025-01-23 13:17:55,288 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:17:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:17:58,058 - __main__ - INFO - Fetching details for case: 73067007
2025-01-23 13:17:58,058 - __main__ - INFO - Database session established.
2025-01-23 13:17:58,321 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 13:17:58,418 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 13:17:58,591 - __main__ - INFO - Owners query executed. Owners found: 4
2025-01-23 13:17:58,725 - __main__ - INFO - Classifications query executed. Classifications found: 5
2025-01-23 13:17:58,809 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 13:17:58,973 - __main__ - INFO - Statements query executed. Statements found: 4
2025-01-23 13:17:59,054 - __main__ - INFO - Design Searches query executed. Design Searches found: 1
2025-01-23 13:17:59,424 - __main__ - INFO - Event Statements query executed. Event Statements found: 23
2025-01-23 13:17:59,539 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 13:17:59,772 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 13:17:59,840 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 13:17:59,841 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 13:17:59,904 - __main__ - INFO - Database session closed.
2025-01-23 13:17:59,906 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:17:59] "GET /api/case/73067007 HTTP/1.1" 200 -
2025-01-23 13:19:43,407 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:19:43,478 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:19:43,838 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:19:43,842 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:19:55,965 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:19:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:19:55,969 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:19:55,969 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 13:19:55,972 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 13:20:01,629 - multi_filter_search - INFO - Total results before pagination: 6
2025-01-23 13:20:01,641 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, owner 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%mr auto%')))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%mr auto%')))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:20:27,842 - multi_filter_search - INFO - Query executed in 31.87s
2025-01-23 13:20:27,914 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:20:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:20:34,168 - __main__ - INFO - Fetching details for case: 73228852
2025-01-23 13:20:34,168 - __main__ - INFO - Database session established.
2025-01-23 13:20:34,302 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 13:20:34,445 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 13:20:34,560 - __main__ - INFO - Owners query executed. Owners found: 10
2025-01-23 13:20:34,674 - __main__ - INFO - Classifications query executed. Classifications found: 37
2025-01-23 13:20:34,755 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 5
2025-01-23 13:20:34,972 - __main__ - INFO - Statements query executed. Statements found: 9
2025-01-23 13:20:35,046 - __main__ - INFO - Design Searches query executed. Design Searches found: 3
2025-01-23 13:20:35,496 - __main__ - INFO - Event Statements query executed. Event Statements found: 57
2025-01-23 13:20:35,587 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 13:20:35,651 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 13:20:35,744 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 13:20:35,744 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 13:20:36,018 - __main__ - INFO - Database session closed.
2025-01-23 13:20:36,020 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:20:36] "GET /api/case/73228852 HTTP/1.1" 200 -
2025-01-23 13:22:14,717 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:22:14,801 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:22:15,118 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:22:15,122 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:23:37,129 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:23:37,183 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:23:37,502 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:23:37,509 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:24:34,138 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:24:34,204 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:24:34,534 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:24:34,538 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:24:49,400 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:24:49] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:24:49,404 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:24:49,404 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 13:24:49,410 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 13:24:51,089 - multi_filter_search - INFO - Total results before pagination: 11
2025-01-23 13:24:51,095 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:24:51,264 - multi_filter_search - INFO - Query executed in 1.86s
2025-01-23 13:24:51,370 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:24:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:26:09,710 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:26:09,767 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:26:10,085 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:26:10,089 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:31:02,765 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:31:02,821 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:31:03,142 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:31:03,148 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:31:14,272 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:31:14,336 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:31:14,637 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:31:14,642 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:31:24,756 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:31:24,807 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:31:25,102 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:31:25,107 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:31:42,344 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:31:42,411 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:31:42,736 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:31:42,741 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:31:54,861 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:31:54,930 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:31:55,243 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:31:55,247 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:32:09,413 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:32:09,478 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:32:09,789 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:32:09,793 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:32:22,938 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:32:23,001 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:34:18,554 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 13:34:18,555 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 13:34:18,556 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:34:18,778 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:34:18,785 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:34:51,172 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:34:51,237 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:34:51,747 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:34:51,775 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:35:14,101 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:35:14,165 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:35:14,486 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:35:14,492 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:35:25,619 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:35:25,676 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:35:25,983 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:35:25,987 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:35:30,034 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:35:30,102 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:35:30,332 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:35:30,336 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:39:44,333 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:39:44,413 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:39:44,740 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:39:44,745 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:40:02,944 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:40:02,998 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:40:03,300 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:40:03,304 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:40:15,428 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:40:15,486 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:40:15,801 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:40:15,805 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:40:30,946 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:40:31,001 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:40:31,320 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:40:31,324 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:40:47,522 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:40:47,592 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:40:47,898 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:40:47,903 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:48:47,655 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:48:47,729 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:48:48,129 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:48:48,134 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:48:56,227 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:48:56,290 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:48:56,591 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:48:56,594 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:49:05,689 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:49:05,748 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:49:06,053 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:49:06,057 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:51:34,849 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:51:34,920 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:51:35,261 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:51:35,266 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:51:45,378 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:51:45,451 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:51:45,819 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:51:45,828 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:51:51,904 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:51:51,957 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:51:52,196 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:51:52,200 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:52:00,294 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:52:00,358 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:52:00,588 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:52:00,593 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:52:16,751 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:52:16,816 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:52:17,200 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:52:17,206 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:52:26,921 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:52:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:52:26,925 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'serial_number', 'query': '73227275', 'group': 'General Search', 'label': 'Serial Number'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:52:26,925 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'serial_number', 'query': '73227275', 'group': 'General Search', 'label': 'Serial Number'}]}, page=1, per_page=10
2025-01-23 13:52:26,928 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-23 13:52:28,705 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 13:52:28,712 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73227275') AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:52:28,793 - multi_filter_search - INFO - Query executed in 1.87s
2025-01-23 13:52:28,859 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:52:28] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:52:53,631 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:52:53,695 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:52:54,012 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:52:54,016 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:53:22,375 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:53:22,436 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:53:22,735 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:53:22,739 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:53:34,867 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:53:34,919 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:53:35,259 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:53:35,263 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:53:46,371 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 13:53:46,430 - werkzeug - INFO -  * Restarting with stat
2025-01-23 13:53:46,730 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 13:53:46,733 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 13:55:46,749 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:55:46] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:55:46,752 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'standard_character_claim', 'query': 'true', 'group': 'Visual Characteristics', 'label': 'Standard Character Claim'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:55:46,753 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'standard_character_claim', 'query': 'true', 'group': 'Visual Characteristics', 'label': 'Standard Character Claim'}]}, page=1, per_page=10
2025-01-23 13:55:46,755 - multi_filter_search - INFO - Generated query for strategy 'standard_character_claim'.
2025-01-23 13:55:48,347 - multi_filter_search - INFO - Total results before pagination: 464
2025-01-23 13:55:48,353 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.standard_characters_claimed_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:55:48,460 - multi_filter_search - INFO - Query executed in 1.71s
2025-01-23 13:55:48,523 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:55:48] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:56:08,686 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:56:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:56:08,690 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'standard_character_claim', 'query': 'true', 'group': 'Visual Characteristics', 'label': 'Standard Character Claim'}, {'strategy': 'wordmark', 'query': 'Moistureze', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:56:08,690 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'standard_character_claim', 'query': 'true', 'group': 'Visual Characteristics', 'label': 'Standard Character Claim'}, {'strategy': 'wordmark', 'query': 'Moistureze', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 13:56:08,691 - multi_filter_search - INFO - Generated query for strategy 'standard_character_claim'.
2025-01-23 13:56:08,692 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:56:08,966 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 13:56:08,979 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'Moistureze') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Moistureze') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Moistureze%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.standard_characters_claimed_in = true) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Moistureze') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Moistureze%')) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:56:09,315 - multi_filter_search - INFO - Query executed in 0.62s
2025-01-23 13:56:09,377 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:56:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:56:12,272 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'standard_character_claim', 'query': 'true', 'group': 'Visual Characteristics', 'label': 'Standard Character Claim'}, {'strategy': 'wordmark', 'query': 'Moistureze', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:56:12,272 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'standard_character_claim', 'query': 'true', 'group': 'Visual Characteristics', 'label': 'Standard Character Claim'}, {'strategy': 'wordmark', 'query': 'Moistureze', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 13:56:12,273 - multi_filter_search - INFO - Generated query for strategy 'standard_character_claim'.
2025-01-23 13:56:12,274 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:56:12,636 - multi_filter_search - INFO - Total results before pagination: 467
2025-01-23 13:56:12,648 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'Moistureze') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Moistureze') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Moistureze%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.standard_characters_claimed_in = true) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Moistureze') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Moistureze%')) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:56:12,979 - multi_filter_search - INFO - Query executed in 0.71s
2025-01-23 13:56:13,041 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:56:13] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:57:48,880 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:57:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:57:48,883 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:57:48,883 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 13:57:48,884 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:57:49,165 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 13:57:49,176 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:57:49,555 - multi_filter_search - INFO - Query executed in 0.67s
2025-01-23 13:57:49,618 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:57:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:00,103 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:00] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:00,106 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:58:00,106 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 13:58:00,107 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:58:00,111 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 13:58:00,354 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 13:58:00,368 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:58:00,690 - multi_filter_search - INFO - Query executed in 0.58s
2025-01-23 13:58:00,751 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:00] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:03,740 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:58:03,740 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 13:58:03,741 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:58:03,742 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 13:58:04,142 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 13:58:04,154 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:58:04,722 - multi_filter_search - INFO - Query executed in 0.98s
2025-01-23 13:58:04,785 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:04] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:17,850 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:17,853 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'full dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:58:17,854 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'full dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 13:58:17,855 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:58:18,299 - multi_filter_search - INFO - Total results before pagination: 17
2025-01-23 13:58:18,310 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'full dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'full dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%full dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'full dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%full dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:58:18,692 - multi_filter_search - INFO - Query executed in 0.84s
2025-01-23 13:58:18,828 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:18] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:27,224 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:27] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:27,227 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'full dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:58:27,227 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'filing_date', 'query': '1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}, {'strategy': 'wordmark', 'query': 'full dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 13:58:27,228 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 13:58:27,228 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:58:27,470 - multi_filter_search - INFO - Total results before pagination: 27
2025-01-23 13:58:27,482 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'full dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'full dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%full dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date = '1979-01-05') AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'full dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%full dog%')) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:58:27,799 - multi_filter_search - INFO - Query executed in 0.57s
2025-01-23 13:58:27,862 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:38,722 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:38,726 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'dull log', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:58:38,727 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'dull log', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 13:58:38,727 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:58:38,968 - multi_filter_search - INFO - Total results before pagination: 6
2025-01-23 13:58:38,979 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'dull log') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'dull log') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%dull log%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'dull log') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%dull log%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 13:58:39,321 - multi_filter_search - INFO - Query executed in 0.59s
2025-01-23 13:58:39,384 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:39] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:46,622 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:46] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:46,626 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'dull log', 'label': 'Word Mark'}, {'strategy': 'phonetic', 'query': 'dull log', 'group': 'General Search', 'label': 'Phonetic'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:58:46,627 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'dull log', 'label': 'Word Mark'}, {'strategy': 'phonetic', 'query': 'dull log', 'group': 'General Search', 'label': 'Phonetic'}]}, page=1, per_page=10
2025-01-23 13:58:46,628 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 13:58:46,829 - multi_filter_search - INFO - Generated query for strategy 'phonetic'.
2025-01-23 13:58:47,140 - multi_filter_search - INFO - Total results before pagination: 4
2025-01-23 13:58:48,417 - multi_filter_search - INFO - Query executed in 1.79s
2025-01-23 13:58:48,479 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:48] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:55,205 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 13:58:55,208 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'phonetic', 'query': 'dull log', 'group': 'General Search', 'label': 'Phonetic'}]}, 'page': 1, 'per_page': 10}
2025-01-23 13:58:55,208 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'phonetic', 'query': 'dull log', 'group': 'General Search', 'label': 'Phonetic'}]}, page=1, per_page=10
2025-01-23 13:58:55,620 - multi_filter_search - INFO - Generated query for strategy 'phonetic'.
2025-01-23 13:58:55,773 - multi_filter_search - INFO - Total results before pagination: 175
2025-01-23 13:58:56,273 - multi_filter_search - INFO - Query executed in 1.06s
2025-01-23 13:58:56,351 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 13:58:56] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 14:03:38,100 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 14:03:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 14:03:38,104 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 14:03:38,104 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 14:03:38,109 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 14:10:22,698 - multi_filter_search - INFO - Total results before pagination: 36945
2025-01-23 14:10:22,716 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 14:27:30,314 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, %(coalesce_1)s) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, greatest(similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_2)s), %(similarity_1)s) * %(similarity_2)s, similarity(coalesce(casefilestatement.statement_text, %(coalesce_3)s), %(similarity_3)s) * %(similarity_4)s) AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = %(type_code_1)s AND (similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_2)s), %(similarity_1)s) * %(similarity_2)s > %(param_1)s OR lower(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_4)s)) LIKE lower(%(lower_1)s)) OR casefilestatement.type_code = %(type_code_2)s AND (similarity(coalesce(casefilestatement.statement_text, %(coalesce_3)s), %(similarity_3)s) * %(similarity_4)s > %(param_2)s OR lower(coalesce(casefilestatement.statement_text, %(coalesce_5)s)) LIKE lower(%(lower_2)s))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = %(type_code_3)s AND (similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_6)s), %(similarity_5)s) * %(similarity_6)s > %(param_3)s OR lower(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_7)s)) LIKE lower(%(lower_3)s)) OR casefilestatement.type_code = %(type_code_4)s AND (similarity(coalesce(casefilestatement.statement_text, %(coalesce_8)s), %(similarity_7)s) * %(similarity_8)s > %(param_4)s OR lower(coalesce(casefilestatement.statement_text, %(coalesce_9)s)) LIKE lower(%(lower_4)s))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC 
 LIMIT %(param_5)s OFFSET %(param_6)s]
[parameters: {'coalesce_1': 0, 'coalesce_2': '', 'similarity_1': 'auto', 'similarity_2': 100, 'coalesce_3': '', 'similarity_3': 'auto', 'similarity_4': 100, 'type_code_1': 'D00000', 'param_1': 30, 'coalesce_4': '', 'lower_1': '%auto%', 'type_code_2': 'D10000', 'param_2': 30, 'coalesce_5': '', 'lower_2': '%auto%', 'type_code_3': 'D00000', 'coalesce_6': '', 'similarity_5': 'auto', 'similarity_6': 100, 'param_3': 30, 'coalesce_7': '', 'lower_3': '%auto%', 'type_code_4': 'D10000', 'coalesce_8': '', 'similarity_7': 'auto', 'similarity_8': 100, 'param_4': 30, 'coalesce_9': '', 'lower_4': '%auto%', 'param_5': 10, 'param_6': 0}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 269, in multi_filter_search
    rows = final_results_query.all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, %(coalesce_1)s) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, greatest(similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_2)s), %(similarity_1)s) * %(similarity_2)s, similarity(coalesce(casefilestatement.statement_text, %(coalesce_3)s), %(similarity_3)s) * %(similarity_4)s) AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = %(type_code_1)s AND (similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_2)s), %(similarity_1)s) * %(similarity_2)s > %(param_1)s OR lower(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_4)s)) LIKE lower(%(lower_1)s)) OR casefilestatement.type_code = %(type_code_2)s AND (similarity(coalesce(casefilestatement.statement_text, %(coalesce_3)s), %(similarity_3)s) * %(similarity_4)s > %(param_2)s OR lower(coalesce(casefilestatement.statement_text, %(coalesce_5)s)) LIKE lower(%(lower_2)s))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = %(type_code_3)s AND (similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_6)s), %(similarity_5)s) * %(similarity_6)s > %(param_3)s OR lower(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_7)s)) LIKE lower(%(lower_3)s)) OR casefilestatement.type_code = %(type_code_4)s AND (similarity(coalesce(casefilestatement.statement_text, %(coalesce_8)s), %(similarity_7)s) * %(similarity_8)s > %(param_4)s OR lower(coalesce(casefilestatement.statement_text, %(coalesce_9)s)) LIKE lower(%(lower_4)s))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC 
 LIMIT %(param_5)s OFFSET %(param_6)s]
[parameters: {'coalesce_1': 0, 'coalesce_2': '', 'similarity_1': 'auto', 'similarity_2': 100, 'coalesce_3': '', 'similarity_3': 'auto', 'similarity_4': 100, 'type_code_1': 'D00000', 'param_1': 30, 'coalesce_4': '', 'lower_1': '%auto%', 'type_code_2': 'D10000', 'param_2': 30, 'coalesce_5': '', 'lower_2': '%auto%', 'type_code_3': 'D00000', 'coalesce_6': '', 'similarity_5': 'auto', 'similarity_6': 100, 'param_3': 30, 'coalesce_7': '', 'lower_3': '%auto%', 'type_code_4': 'D10000', 'coalesce_8': '', 'similarity_7': 'auto', 'similarity_8': 100, 'param_4': 30, 'coalesce_9': '', 'lower_4': '%auto%', 'param_5': 10, 'param_6': 0}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-23 14:27:30,336 - __main__ - ERROR - Error in combined_search: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, %(coalesce_1)s) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, greatest(similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_2)s), %(similarity_1)s) * %(similarity_2)s, similarity(coalesce(casefilestatement.statement_text, %(coalesce_3)s), %(similarity_3)s) * %(similarity_4)s) AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = %(type_code_1)s AND (similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_2)s), %(similarity_1)s) * %(similarity_2)s > %(param_1)s OR lower(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_4)s)) LIKE lower(%(lower_1)s)) OR casefilestatement.type_code = %(type_code_2)s AND (similarity(coalesce(casefilestatement.statement_text, %(coalesce_3)s), %(similarity_3)s) * %(similarity_4)s > %(param_2)s OR lower(coalesce(casefilestatement.statement_text, %(coalesce_5)s)) LIKE lower(%(lower_2)s))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = %(type_code_3)s AND (similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_6)s), %(similarity_5)s) * %(similarity_6)s > %(param_3)s OR lower(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_7)s)) LIKE lower(%(lower_3)s)) OR casefilestatement.type_code = %(type_code_4)s AND (similarity(coalesce(casefilestatement.statement_text, %(coalesce_8)s), %(similarity_7)s) * %(similarity_8)s > %(param_4)s OR lower(coalesce(casefilestatement.statement_text, %(coalesce_9)s)) LIKE lower(%(lower_4)s))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC 
 LIMIT %(param_5)s OFFSET %(param_6)s]
[parameters: {'coalesce_1': 0, 'coalesce_2': '', 'similarity_1': 'auto', 'similarity_2': 100, 'coalesce_3': '', 'similarity_3': 'auto', 'similarity_4': 100, 'type_code_1': 'D00000', 'param_1': 30, 'coalesce_4': '', 'lower_1': '%auto%', 'type_code_2': 'D10000', 'param_2': 30, 'coalesce_5': '', 'lower_2': '%auto%', 'type_code_3': 'D00000', 'coalesce_6': '', 'similarity_5': 'auto', 'similarity_6': 100, 'param_3': 30, 'coalesce_7': '', 'lower_3': '%auto%', 'type_code_4': 'D10000', 'coalesce_8': '', 'similarity_7': 'auto', 'similarity_8': 100, 'param_4': 30, 'coalesce_9': '', 'lower_4': '%auto%', 'param_5': 10, 'param_6': 0}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 269, in multi_filter_search
    rows = final_results_query.all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2699, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, %(coalesce_1)s) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, greatest(similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_2)s), %(similarity_1)s) * %(similarity_2)s, similarity(coalesce(casefilestatement.statement_text, %(coalesce_3)s), %(similarity_3)s) * %(similarity_4)s) AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = %(type_code_1)s AND (similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_2)s), %(similarity_1)s) * %(similarity_2)s > %(param_1)s OR lower(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_4)s)) LIKE lower(%(lower_1)s)) OR casefilestatement.type_code = %(type_code_2)s AND (similarity(coalesce(casefilestatement.statement_text, %(coalesce_3)s), %(similarity_3)s) * %(similarity_4)s > %(param_2)s OR lower(coalesce(casefilestatement.statement_text, %(coalesce_5)s)) LIKE lower(%(lower_2)s))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = %(type_code_3)s AND (similarity(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_6)s), %(similarity_5)s) * %(similarity_6)s > %(param_3)s OR lower(coalesce(SUBSTRING(casefilestatement.statement_text FROM '"([^"]+)"'), %(coalesce_7)s)) LIKE lower(%(lower_3)s)) OR casefilestatement.type_code = %(type_code_4)s AND (similarity(coalesce(casefilestatement.statement_text, %(coalesce_8)s), %(similarity_7)s) * %(similarity_8)s > %(param_4)s OR lower(coalesce(casefilestatement.statement_text, %(coalesce_9)s)) LIKE lower(%(lower_4)s))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC 
 LIMIT %(param_5)s OFFSET %(param_6)s]
[parameters: {'coalesce_1': 0, 'coalesce_2': '', 'similarity_1': 'auto', 'similarity_2': 100, 'coalesce_3': '', 'similarity_3': 'auto', 'similarity_4': 100, 'type_code_1': 'D00000', 'param_1': 30, 'coalesce_4': '', 'lower_1': '%auto%', 'type_code_2': 'D10000', 'param_2': 30, 'coalesce_5': '', 'lower_2': '%auto%', 'type_code_3': 'D00000', 'coalesce_6': '', 'similarity_5': 'auto', 'similarity_6': 100, 'param_3': 30, 'coalesce_7': '', 'lower_3': '%auto%', 'type_code_4': 'D10000', 'coalesce_8': '', 'similarity_7': 'auto', 'similarity_8': 100, 'param_4': 30, 'coalesce_9': '', 'lower_4': '%auto%', 'param_5': 10, 'param_6': 0}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-23 14:27:30,340 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 14:27:30] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 15:54:40,506 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 15:54:40,506 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 15:54:40,507 - werkzeug - INFO -  * Restarting with stat
2025-01-23 15:54:40,733 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 15:54:40,742 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 15:54:48,167 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 15:54:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 15:54:48,178 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 15:54:48,178 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 15:54:48,180 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 16:02:28,697 - multi_filter_search - INFO - Total results before pagination: 36945
2025-01-23 16:02:28,712 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 16:10:32,898 - multi_filter_search - INFO - Query executed in 944.72s
2025-01-23 16:10:32,962 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 16:10:32] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 16:17:29,953 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 16:17:30,022 - werkzeug - INFO -  * Restarting with stat
2025-01-23 16:17:30,330 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 16:17:30,334 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 16:17:32,776 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 16:17:32] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 16:17:32,779 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 16:17:32,779 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 16:17:32,786 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 16:17:34,072 - multi_filter_search - INFO - Total results before pagination: 12
2025-01-23 16:17:34,089 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE casefilestatement.type_code = 'D00000' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR casefilestatement.type_code = 'D10000' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 16:17:34,319 - multi_filter_search - INFO - Query executed in 1.54s
2025-01-23 16:17:34,381 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 16:17:34] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 16:30:32,124 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 16:30:32] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 16:30:32,127 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'hello', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 16:30:32,127 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'hello', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 16:30:32,130 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 16:30:32,356 - multi_filter_search - INFO - Total results before pagination: 14
2025-01-23 16:30:32,367 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hello') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 16:30:32,624 - multi_filter_search - INFO - Query executed in 0.50s
2025-01-23 16:30:32,686 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 16:30:32] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:23:47,040 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 17:23:47,118 - werkzeug - INFO -  * Restarting with stat
2025-01-23 17:23:47,441 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 17:23:47,446 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 17:23:56,887 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:23:56] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:23:56,890 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'hello', 'label': 'Word Mark'}, {'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:23:56,890 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'hello', 'label': 'Word Mark'}, {'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 17:23:56,894 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 17:23:56,897 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 17:23:58,270 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 17:23:58,287 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hello') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_4.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'D0' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR substr(casefilestatement.type_code, 1, 2) = 'D1' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_4 
WHERE casefile.serial_number IN (SELECT anon_4.sn 
FROM (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'D0' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR substr(casefilestatement.type_code, 1, 2) = 'D1' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_4)) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT anon_6.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_7) OR casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_9.sn 
FROM (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'D0' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR substr(casefilestatement.type_code, 1, 2) = 'D1' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_9)) AS anon_8)) AS anon_6) AS anon_5) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 17:23:58,881 - multi_filter_search - INFO - Query executed in 1.99s
2025-01-23 17:23:58,947 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:23:58] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:49:28,727 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 17:49:28,727 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 17:49:28,727 - werkzeug - INFO -  * Restarting with stat
2025-01-23 17:49:28,960 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 17:49:28,965 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 17:49:30,177 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:49:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:49:30,183 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:49:30,184 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 17:49:30,184 - multi_filter_search - WARNING - Unknown strategy: attorney
2025-01-23 17:49:30,186 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:49:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:49:31,597 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:49:31,598 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 17:49:31,598 - multi_filter_search - WARNING - Unknown strategy: attorney
2025-01-23 17:49:31,598 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:49:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:49:41,337 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:49:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:49:41,340 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:49:41,340 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 17:49:41,344 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 17:49:42,655 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 17:49:42,667 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'bob') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 17:49:42,992 - multi_filter_search - INFO - Query executed in 1.65s
2025-01-23 17:49:43,052 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:49:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:50:17,790 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:50:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:50:17,793 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:50:17,793 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 17:50:17,795 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 17:50:18,088 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 17:50:18,099 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'bob') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 17:50:18,502 - multi_filter_search - INFO - Query executed in 0.71s
2025-01-23 17:50:18,563 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:50:18] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:54:08,117 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:54:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:54:08,122 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:54:08,122 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 17:54:08,126 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 17:54:08,381 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 17:54:08,396 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'bob') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 17:54:08,787 - multi_filter_search - INFO - Query executed in 0.66s
2025-01-23 17:54:08,849 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:54:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:54:13,196 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:54:13] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:54:13,200 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'foreign_priority', 'query': 'huh', 'group': 'Filing Basis', 'label': 'Foreign Priority Claim (44(d))'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:54:13,200 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'foreign_priority', 'query': 'huh', 'group': 'Filing Basis', 'label': 'Foreign Priority Claim (44(d))'}]}, page=1, per_page=10
2025-01-23 17:54:13,201 - multi_filter_search - INFO - Generated query for strategy 'foreign_priority'.
2025-01-23 17:54:13,361 - multi_filter_search - INFO - Total results before pagination: 449
2025-01-23 17:54:13,367 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_basis_current_44d_in = true OR casefileheader.amended_to_44d_application_in = true OR casefileheader.filing_basis_filed_as_44d_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 17:54:13,472 - multi_filter_search - INFO - Query executed in 0.27s
2025-01-23 17:54:13,531 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:54:13] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:54:33,641 - __main__ - INFO - Fetching details for case: 73266964
2025-01-23 17:54:33,642 - __main__ - INFO - Database session established.
2025-01-23 17:54:33,769 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 17:54:33,842 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 17:54:33,921 - __main__ - INFO - Owners query executed. Owners found: 4
2025-01-23 17:54:34,007 - __main__ - INFO - Classifications query executed. Classifications found: 9
2025-01-23 17:54:34,077 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 17:54:34,150 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 17:54:34,216 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 17:54:34,408 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-23 17:54:34,478 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 17:54:34,543 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 17:54:34,607 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 17:54:34,608 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 17:54:34,667 - __main__ - INFO - Database session closed.
2025-01-23 17:54:34,669 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:54:34] "GET /api/case/73266964 HTTP/1.1" 200 -
2025-01-23 17:54:44,580 - __main__ - INFO - Fetching details for case: 73266426
2025-01-23 17:54:44,580 - __main__ - INFO - Database session established.
2025-01-23 17:54:44,701 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 17:54:44,768 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 17:54:44,843 - __main__ - INFO - Owners query executed. Owners found: 6
2025-01-23 17:54:44,914 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-23 17:54:44,975 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 17:54:45,072 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 17:54:45,155 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 17:54:45,395 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-23 17:54:45,465 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 17:54:45,526 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 17:54:45,587 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 17:54:45,587 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 17:54:45,647 - __main__ - INFO - Database session closed.
2025-01-23 17:54:45,647 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:54:45] "GET /api/case/73266426 HTTP/1.1" 200 -
2025-01-23 17:55:08,723 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:55:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:55:08,727 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'current_44d', 'query': 'true', 'group': 'Application Status', 'label': 'Current 44(d)'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:55:08,727 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'current_44d', 'query': 'true', 'group': 'Application Status', 'label': 'Current 44(d)'}]}, page=1, per_page=10
2025-01-23 17:55:08,727 - multi_filter_search - WARNING - Unknown strategy: current_44d
2025-01-23 17:55:08,728 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:55:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:55:50,157 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:55:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:55:50,160 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'amended_44e_application', 'query': 'true', 'group': 'Application Status', 'label': 'Amended 44(e) Application'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:55:50,160 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'amended_44e_application', 'query': 'true', 'group': 'Application Status', 'label': 'Amended 44(e) Application'}]}, page=1, per_page=10
2025-01-23 17:55:50,160 - multi_filter_search - WARNING - Unknown strategy: amended_44e_application
2025-01-23 17:55:50,160 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:55:50] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:55:51,885 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'amended_44e_application', 'query': 'true', 'group': 'Application Status', 'label': 'Amended 44(e) Application'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:55:51,885 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'amended_44e_application', 'query': 'true', 'group': 'Application Status', 'label': 'Amended 44(e) Application'}]}, page=1, per_page=10
2025-01-23 17:55:51,885 - multi_filter_search - WARNING - Unknown strategy: amended_44e_application
2025-01-23 17:55:51,886 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:55:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:56:03,461 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:56:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:56:03,465 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'amended_66a_application', 'query': 'true', 'group': 'Application Status', 'label': 'Amended 66(a) Application'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:56:03,465 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'amended_66a_application', 'query': 'true', 'group': 'Application Status', 'label': 'Amended 66(a) Application'}]}, page=1, per_page=10
2025-01-23 17:56:03,465 - multi_filter_search - WARNING - Unknown strategy: amended_66a_application
2025-01-23 17:56:03,465 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:56:03] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:56:19,063 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:56:19] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:56:19,066 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'current_66a', 'query': 'true', 'group': 'Application Status', 'label': 'Current 66(a)'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:56:19,067 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'current_66a', 'query': 'true', 'group': 'Application Status', 'label': 'Current 66(a)'}]}, page=1, per_page=10
2025-01-23 17:56:19,067 - multi_filter_search - WARNING - Unknown strategy: current_66a
2025-01-23 17:56:19,067 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:56:19] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:56:26,274 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:56:26] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:56:26,276 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'current_no_basis', 'query': 'true', 'group': 'Application Status', 'label': 'Current No Basis'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:56:26,277 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'current_no_basis', 'query': 'true', 'group': 'Application Status', 'label': 'Current No Basis'}]}, page=1, per_page=10
2025-01-23 17:56:26,277 - multi_filter_search - WARNING - Unknown strategy: current_no_basis
2025-01-23 17:56:26,277 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:56:26] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:57:37,774 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:57:37] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:57:37,778 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'current_no_basis', 'query': 'true', 'group': 'Application Status', 'label': 'Current No Basis'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:57:37,778 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'current_no_basis', 'query': 'true', 'group': 'Application Status', 'label': 'Current No Basis'}]}, page=1, per_page=10
2025-01-23 17:57:37,779 - multi_filter_search - WARNING - Unknown strategy: current_no_basis
2025-01-23 17:57:37,781 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:57:37] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:57:54,053 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:57:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:57:54,057 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'no_current_basis', 'query': 'true', 'group': 'Application Status', 'label': 'No Current Basis'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:57:54,057 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'no_current_basis', 'query': 'true', 'group': 'Application Status', 'label': 'No Current Basis'}]}, page=1, per_page=10
2025-01-23 17:57:54,059 - multi_filter_search - INFO - Generated query for strategy 'no_current_basis'.
2025-01-23 17:57:54,212 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 17:57:54,217 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_current_no_basis_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 17:57:54,301 - multi_filter_search - INFO - Query executed in 0.24s
2025-01-23 17:57:54,363 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:57:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:58:06,308 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:58:06] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 17:58:06,311 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'no_initial_basis', 'query': 'true', 'group': 'Application Status', 'label': 'No Initial Basis'}]}, 'page': 1, 'per_page': 10}
2025-01-23 17:58:06,311 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'no_initial_basis', 'query': 'true', 'group': 'Application Status', 'label': 'No Initial Basis'}]}, page=1, per_page=10
2025-01-23 17:58:06,312 - multi_filter_search - INFO - Generated query for strategy 'no_initial_basis'.
2025-01-23 17:58:06,517 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 17:58:06,523 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.without_basis_currently_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 17:58:06,606 - multi_filter_search - INFO - Query executed in 0.30s
2025-01-23 17:58:06,668 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 17:58:06] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:00:30,193 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:00:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:00:30,196 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'foreign_priority', 'query': 'j', 'group': 'Filing Basis', 'label': 'Foreign Priority Claim (44(d))'}]}, 'page': 1, 'per_page': 10}
2025-01-23 18:00:30,196 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'foreign_priority', 'query': 'j', 'group': 'Filing Basis', 'label': 'Foreign Priority Claim (44(d))'}]}, page=1, per_page=10
2025-01-23 18:00:30,197 - multi_filter_search - INFO - Generated query for strategy 'foreign_priority'.
2025-01-23 18:00:30,356 - multi_filter_search - INFO - Total results before pagination: 449
2025-01-23 18:00:30,362 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_basis_current_44d_in = true OR casefileheader.amended_to_44d_application_in = true OR casefileheader.filing_basis_filed_as_44d_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 18:00:30,457 - multi_filter_search - INFO - Query executed in 0.26s
2025-01-23 18:00:30,520 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:00:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:00:54,153 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:00:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:00:54,156 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'foreign_registration', 'query': 'true', 'group': 'Filing Basis', 'label': 'Foreign Registration (44(e))'}]}, 'page': 1, 'per_page': 10}
2025-01-23 18:00:54,157 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'foreign_registration', 'query': 'true', 'group': 'Filing Basis', 'label': 'Foreign Registration (44(e))'}]}, page=1, per_page=10
2025-01-23 18:00:54,157 - multi_filter_search - INFO - Generated query for strategy 'foreign_registration'.
2025-01-23 18:00:54,325 - multi_filter_search - INFO - Total results before pagination: 2478
2025-01-23 18:00:54,330 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_basis_filed_as_44e_in = true OR casefileheader.amended_to_44e_application_in = true OR casefileheader.filing_basis_current_44e_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 18:00:54,447 - multi_filter_search - INFO - Query executed in 0.29s
2025-01-23 18:00:54,507 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:00:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:00:56,157 - __main__ - INFO - Fetching details for case: 73266460
2025-01-23 18:00:56,157 - __main__ - INFO - Database session established.
2025-01-23 18:00:56,282 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 18:00:56,346 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 18:00:56,417 - __main__ - INFO - Owners query executed. Owners found: 6
2025-01-23 18:00:56,488 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 18:00:56,550 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 18:00:56,615 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-23 18:00:56,677 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 18:00:56,842 - __main__ - INFO - Event Statements query executed. Event Statements found: 33
2025-01-23 18:00:56,906 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 18:00:56,966 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 18:00:57,026 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 18:00:57,026 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 18:00:57,086 - __main__ - INFO - Database session closed.
2025-01-23 18:00:57,087 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:00:57] "GET /api/case/73266460 HTTP/1.1" 200 -
2025-01-23 18:01:31,275 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:01:31] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:01:31,279 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'extension_protection', 'query': 'true', 'group': 'Filing Basis', 'label': 'Extension of Protection (66(a))'}]}, 'page': 1, 'per_page': 10}
2025-01-23 18:01:31,279 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'extension_protection', 'query': 'true', 'group': 'Filing Basis', 'label': 'Extension of Protection (66(a))'}]}, page=1, per_page=10
2025-01-23 18:01:31,280 - multi_filter_search - INFO - Generated query for strategy 'extension_protection'.
2025-01-23 18:01:31,441 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 18:01:31,447 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_basis_filed_as_66a_in = true OR casefileheader.filing_basis_current_66a_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 18:01:31,536 - multi_filter_search - INFO - Query executed in 0.26s
2025-01-23 18:01:31,598 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:01:31] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:06:23,930 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:06:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:06:23,933 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'foreign_registration', 'query': 'true', 'group': 'Filing Basis', 'label': 'Foreign Registration (44(e))'}]}, 'page': 1, 'per_page': 10}
2025-01-23 18:06:23,933 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'foreign_registration', 'query': 'true', 'group': 'Filing Basis', 'label': 'Foreign Registration (44(e))'}]}, page=1, per_page=10
2025-01-23 18:06:23,935 - multi_filter_search - INFO - Generated query for strategy 'foreign_registration'.
2025-01-23 18:06:24,142 - multi_filter_search - INFO - Total results before pagination: 2478
2025-01-23 18:06:24,149 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_basis_filed_as_44e_in = true OR casefileheader.amended_to_44e_application_in = true OR casefileheader.filing_basis_current_44e_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 18:06:24,264 - multi_filter_search - INFO - Query executed in 0.33s
2025-01-23 18:06:24,325 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:06:24] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:09:23,339 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:09:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 18:09:23,342 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'foreign_priority', 'query': 'true', 'group': 'Filing Basis', 'label': 'Foreign Priority Claim (44(d))'}]}, 'page': 1, 'per_page': 10}
2025-01-23 18:09:23,342 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'foreign_priority', 'query': 'true', 'group': 'Filing Basis', 'label': 'Foreign Priority Claim (44(d))'}]}, page=1, per_page=10
2025-01-23 18:09:23,344 - multi_filter_search - INFO - Generated query for strategy 'foreign_priority'.
2025-01-23 18:09:23,512 - multi_filter_search - INFO - Total results before pagination: 449
2025-01-23 18:09:23,519 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_basis_current_44d_in = true OR casefileheader.amended_to_44d_application_in = true OR casefileheader.filing_basis_filed_as_44d_in = true) AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 18:09:23,625 - multi_filter_search - INFO - Query executed in 0.28s
2025-01-23 18:09:23,687 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 18:09:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 19:39:30,256 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 19:39:30,256 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 19:39:30,257 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:39:30,495 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:39:30,503 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 19:39:46,838 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 19:39:46] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 19:39:46,842 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 19:39:46,842 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 19:39:46,846 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 19:39:48,229 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 19:39:48,240 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 19:39:48,625 - multi_filter_search - INFO - Query executed in 1.78s
2025-01-23 19:39:48,686 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 19:39:48] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 19:40:35,754 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 19:40:35] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 19:40:35,758 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1958-01-01 - 1979-03-01', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 19:40:35,759 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1958-01-01 - 1979-03-01', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 19:40:35,759 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 19:40:35,763 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 19:40:36,241 - multi_filter_search - INFO - Total results before pagination: 10
2025-01-23 19:40:36,252 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1958-01-01' AND '1979-03-01') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 19:40:36,653 - multi_filter_search - INFO - Query executed in 0.89s
2025-01-23 19:40:36,715 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 19:40:36] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 19:50:56,536 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 19:50:56,588 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:50:56,903 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:50:56,908 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 19:54:40,712 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 19:54:40,777 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:54:41,079 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:54:41,084 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 19:56:25,178 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 19:56:25,260 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:56:25,563 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:56:25,568 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 19:56:29,634 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 19:56:29,703 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:56:29,936 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:56:29,940 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 19:56:38,028 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 19:56:38,098 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:56:38,342 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:56:38,346 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 19:56:39,356 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 19:56:39,402 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:56:39,632 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:56:39,637 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 19:56:44,702 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 19:56:44,766 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:56:44,998 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:56:45,002 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 19:59:27,957 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 19:59:28,029 - werkzeug - INFO -  * Restarting with stat
2025-01-23 19:59:28,331 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 19:59:28,339 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 20:14:57,793 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 20:14:57] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 20:14:57,796 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '9', 'group': 'General Search', 'label': 'Serial Number'}]}, 'page': 1, 'per_page': 10}
2025-01-23 20:14:57,797 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '9', 'group': 'General Search', 'label': 'Serial Number'}]}, page=1, per_page=10
2025-01-23 20:14:57,800 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-23 20:14:58,967 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 20:14:58,974 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '9') AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 20:14:59,040 - multi_filter_search - INFO - Query executed in 1.24s
2025-01-23 20:14:59,100 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 20:14:59] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 20:17:40,221 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 20:17:40] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 20:17:40,225 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'attorney_name', 'query': 'hello', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'no_current_basis', 'query': 'true', 'group': 'Filing Basis', 'label': 'No Current Basis'}]}, 'page': 1, 'per_page': 10}
2025-01-23 20:17:40,225 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'attorney_name', 'query': 'hello', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'no_current_basis', 'query': 'true', 'group': 'Filing Basis', 'label': 'No Current Basis'}]}, page=1, per_page=10
2025-01-23 20:17:40,226 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 20:17:40,227 - multi_filter_search - INFO - Generated query for strategy 'no_current_basis'.
2025-01-23 20:17:40,542 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 20:17:40,555 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'hello') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'hello') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%hello%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'hello') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%hello%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_current_no_basis_in = true) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 20:17:40,793 - multi_filter_search - INFO - Query executed in 0.57s
2025-01-23 20:17:40,862 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 20:17:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 20:17:43,199 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'hello', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'no_current_basis', 'query': 'true', 'group': 'Filing Basis', 'label': 'No Current Basis'}]}, 'page': 1, 'per_page': 10}
2025-01-23 20:17:43,200 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'attorney_name', 'query': 'hello', 'group': 'General Search', 'label': 'Attorney Name'}, {'strategy': 'no_current_basis', 'query': 'true', 'group': 'Filing Basis', 'label': 'No Current Basis'}]}, page=1, per_page=10
2025-01-23 20:17:43,201 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 20:17:43,201 - multi_filter_search - INFO - Generated query for strategy 'no_current_basis'.
2025-01-23 20:17:43,348 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 20:17:43,359 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'hello') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'hello') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%hello%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'hello') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%hello%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_current_no_basis_in = true) AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 20:17:43,568 - multi_filter_search - INFO - Query executed in 0.37s
2025-01-23 20:17:43,630 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 20:17:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:38:47,120 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:38:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:38:47,124 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:38:47,124 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 21:38:47,127 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:38:47,399 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 21:38:47,410 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:38:47,675 - multi_filter_search - INFO - Query executed in 0.55s
2025-01-23 21:38:47,736 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:38:47] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:39:06,229 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:39:06] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:39:06,233 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:39:06,234 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 21:39:06,235 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:39:06,240 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:39:06,508 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 21:39:06,523 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:39:07,025 - multi_filter_search - INFO - Query executed in 0.79s
2025-01-23 21:39:07,088 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:39:07] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:39:13,132 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:39:13] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:39:13,135 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:39:13,135 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 21:39:13,136 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:39:13,136 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:39:13,383 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 21:39:13,394 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:39:13,886 - multi_filter_search - INFO - Query executed in 0.75s
2025-01-23 21:39:13,949 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:39:13] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:42:03,526 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:42:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:42:03,531 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:42:03,531 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, page=1, per_page=10
2025-01-23 21:42:03,534 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:42:03,534 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:42:03,782 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 21:42:03,793 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_6) AND casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_7)) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:42:04,179 - multi_filter_search - INFO - Query executed in 0.65s
2025-01-23 21:42:04,241 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:42:04] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:42:16,217 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:42:16] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:42:16,221 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:42:16,221 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 21:42:16,222 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:42:16,223 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:42:16,224 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 21:42:16,671 - multi_filter_search - INFO - Total results before pagination: 2
2025-01-23 21:42:16,689 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'bob') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_8)) AS anon_6) OR casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_9)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:42:17,389 - multi_filter_search - INFO - Query executed in 1.17s
2025-01-23 21:42:17,450 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:42:17] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:42:35,396 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:42:35] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:42:35,401 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:42:35,401 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 21:42:35,402 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:42:35,402 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:42:35,404 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:42:36,434 - multi_filter_search - INFO - Total results before pagination: 7
2025-01-23 21:42:36,442 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, owner 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%mr auto%')))) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_8)) AS anon_6) OR casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%mr auto%')))) AS anon_9)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:42:40,633 - multi_filter_search - INFO - Query executed in 5.23s
2025-01-23 21:42:40,694 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:42:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:42:45,342 - __main__ - INFO - Fetching details for case: 71492700
2025-01-23 21:42:45,343 - __main__ - INFO - Database session established.
2025-01-23 21:42:45,467 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 21:42:45,532 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 21:42:45,608 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-23 21:42:45,688 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 21:42:45,754 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 21:42:45,826 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 21:42:45,887 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 21:42:46,085 - __main__ - INFO - Event Statements query executed. Event Statements found: 17
2025-01-23 21:42:46,153 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 21:42:46,218 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 21:42:46,280 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 21:42:46,281 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 21:42:46,340 - __main__ - INFO - Database session closed.
2025-01-23 21:42:46,341 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:42:46] "GET /api/case/71492700 HTTP/1.1" 200 -
2025-01-23 21:43:05,142 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:05] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:43:05,147 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:43:05,147 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}]}, page=1, per_page=10
2025-01-23 21:43:05,147 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:43:05,148 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:43:05,149 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:43:06,029 - multi_filter_search - INFO - Total results before pagination: 7
2025-01-23 21:43:06,045 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, owner 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%mr auto%')))) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_8) AND casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_9)) AS anon_7) OR casefile.serial_number IN (SELECT anon_10.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'mr auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%mr auto%')))) AS anon_10)) AS anon_6)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:43:09,513 - multi_filter_search - INFO - Query executed in 4.37s
2025-01-23 21:43:09,575 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:43:25,615 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:25] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:43:25,619 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:43:25,619 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 21:43:25,620 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:43:25,620 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:43:25,622 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:43:25,623 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 21:43:26,611 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 21:43:26,616 - multi_filter_search - ERROR - Error in multi_filter_search: 'CompoundSelect' object has no attribute 'union_all'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 208, in multi_filter_search
    unioned_select = unioned_select.union_all(selectable)
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'union_all'
2025-01-23 21:43:26,680 - __main__ - ERROR - Error in combined_search: 'CompoundSelect' object has no attribute 'union_all'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 208, in multi_filter_search
    unioned_select = unioned_select.union_all(selectable)
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'union_all'
2025-01-23 21:43:26,684 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:26] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 21:43:38,493 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:43:38,497 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:43:38,498 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 21:43:38,499 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:43:38,499 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:43:38,500 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:43:38,501 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 21:43:39,616 - multi_filter_search - INFO - Total results before pagination: 8
2025-01-23 21:43:39,618 - multi_filter_search - ERROR - Error in multi_filter_search: 'CompoundSelect' object has no attribute 'union_all'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 208, in multi_filter_search
    unioned_select = unioned_select.union_all(selectable)
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'union_all'
2025-01-23 21:43:39,681 - __main__ - ERROR - Error in combined_search: 'CompoundSelect' object has no attribute 'union_all'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 208, in multi_filter_search
    unioned_select = unioned_select.union_all(selectable)
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'union_all'
2025-01-23 21:43:39,686 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:39] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 21:43:47,655 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:43:47,658 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:43:47,658 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'mr auto', 'group': 'General Search', 'label': "Owner's Name"}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 21:43:47,659 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:43:47,660 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:43:47,662 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:43:47,663 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 21:43:48,729 - multi_filter_search - INFO - Total results before pagination: 8
2025-01-23 21:43:48,734 - multi_filter_search - ERROR - Error in multi_filter_search: 'CompoundSelect' object has no attribute 'union_all'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 208, in multi_filter_search
    unioned_select = unioned_select.union_all(selectable)
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'union_all'
2025-01-23 21:43:48,798 - __main__ - ERROR - Error in combined_search: 'CompoundSelect' object has no attribute 'union_all'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 208, in multi_filter_search
    unioned_select = unioned_select.union_all(selectable)
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'CompoundSelect' object has no attribute 'union_all'
2025-01-23 21:43:48,805 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:48] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-23 21:43:50,520 - __main__ - INFO - Fetching details for case: 71235488
2025-01-23 21:43:50,521 - __main__ - INFO - Database session established.
2025-01-23 21:43:50,645 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 21:43:50,706 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 21:43:50,774 - __main__ - INFO - Owners query executed. Owners found: 7
2025-01-23 21:43:50,840 - __main__ - INFO - Classifications query executed. Classifications found: 10
2025-01-23 21:43:50,902 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 1
2025-01-23 21:43:50,971 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-23 21:43:51,036 - __main__ - INFO - Design Searches query executed. Design Searches found: 6
2025-01-23 21:43:51,209 - __main__ - INFO - Event Statements query executed. Event Statements found: 41
2025-01-23 21:43:51,275 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 21:43:51,335 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 21:43:51,397 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 21:43:51,397 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 21:43:51,457 - __main__ - INFO - Database session closed.
2025-01-23 21:43:51,458 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:43:51] "GET /api/case/71235488 HTTP/1.1" 200 -
2025-01-23 21:44:03,927 - __main__ - INFO - Fetching details for case: 71235558
2025-01-23 21:44:03,927 - __main__ - INFO - Database session established.
2025-01-23 21:44:04,050 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 21:44:04,110 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 21:44:04,181 - __main__ - INFO - Owners query executed. Owners found: 7
2025-01-23 21:44:04,250 - __main__ - INFO - Classifications query executed. Classifications found: 6
2025-01-23 21:44:04,314 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 1
2025-01-23 21:44:04,380 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-23 21:44:04,444 - __main__ - INFO - Design Searches query executed. Design Searches found: 7
2025-01-23 21:44:04,604 - __main__ - INFO - Event Statements query executed. Event Statements found: 43
2025-01-23 21:44:04,672 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 21:44:04,732 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 21:44:04,793 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 21:44:04,794 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 21:44:04,855 - __main__ - INFO - Database session closed.
2025-01-23 21:44:04,856 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:44:04] "GET /api/case/71235558 HTTP/1.1" 200 -
2025-01-23 21:44:12,269 - __main__ - INFO - Fetching details for case: 71492700
2025-01-23 21:44:12,270 - __main__ - INFO - Database session established.
2025-01-23 21:44:12,391 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 21:44:12,451 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 21:44:12,526 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-23 21:44:12,602 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 21:44:12,663 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-23 21:44:12,729 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 21:44:12,792 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-23 21:44:12,973 - __main__ - INFO - Event Statements query executed. Event Statements found: 17
2025-01-23 21:44:13,039 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 21:44:13,101 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 21:44:13,162 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 21:44:13,162 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 21:44:13,222 - __main__ - INFO - Database session closed.
2025-01-23 21:44:13,223 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:44:13] "GET /api/case/71492700 HTTP/1.1" 200 -
2025-01-23 21:45:07,725 - __main__ - INFO - Fetching details for case: 73228852
2025-01-23 21:45:07,726 - __main__ - INFO - Database session established.
2025-01-23 21:45:07,851 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 21:45:07,918 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 21:45:07,996 - __main__ - INFO - Owners query executed. Owners found: 10
2025-01-23 21:45:08,071 - __main__ - INFO - Classifications query executed. Classifications found: 37
2025-01-23 21:45:08,133 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 5
2025-01-23 21:45:08,199 - __main__ - INFO - Statements query executed. Statements found: 9
2025-01-23 21:45:08,262 - __main__ - INFO - Design Searches query executed. Design Searches found: 3
2025-01-23 21:45:08,425 - __main__ - INFO - Event Statements query executed. Event Statements found: 57
2025-01-23 21:45:08,491 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 21:45:08,551 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 21:45:08,610 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 21:45:08,610 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 21:45:08,670 - __main__ - INFO - Database session closed.
2025-01-23 21:45:08,671 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:45:08] "GET /api/case/73228852 HTTP/1.1" 200 -
2025-01-23 21:46:50,735 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:46:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:46:50,738 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:46:50,738 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 21:46:50,740 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:46:50,998 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 21:46:51,008 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:46:51,413 - multi_filter_search - INFO - Query executed in 0.68s
2025-01-23 21:46:51,474 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:46:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:08,683 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:08] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:08,687 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:47:08,687 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 21:47:08,687 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:47:08,688 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:47:08,964 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 21:47:08,975 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:47:09,436 - multi_filter_search - INFO - Query executed in 0.75s
2025-01-23 21:47:09,500 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:09] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:11,572 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:47:11,572 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, page=1, per_page=10
2025-01-23 21:47:11,573 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:47:11,573 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:47:11,892 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 21:47:11,905 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_6) AND casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_7)) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:47:12,406 - multi_filter_search - INFO - Query executed in 0.83s
2025-01-23 21:47:12,467 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:12] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:14,036 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:14] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:14,040 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:47:14,040 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 21:47:14,040 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:47:14,041 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:47:14,264 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 21:47:14,276 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:47:14,658 - multi_filter_search - INFO - Query executed in 0.62s
2025-01-23 21:47:14,718 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:14] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:15,734 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:47:15,734 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 21:47:15,735 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:47:15,735 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:47:15,968 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 21:47:15,980 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:47:16,399 - multi_filter_search - INFO - Query executed in 0.67s
2025-01-23 21:47:16,463 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:16] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:28,245 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:28,248 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 2, 'per_page': 10}
2025-01-23 21:47:28,248 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=2, per_page=10
2025-01-23 21:47:28,249 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:47:28,249 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:47:28,527 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 21:47:28,539 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-23 21:47:28,892 - multi_filter_search - INFO - Query executed in 0.64s
2025-01-23 21:47:28,953 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:28] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:33,066 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:47:33,066 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 21:47:33,067 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:47:33,067 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:47:33,315 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 21:47:33,325 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:47:33,707 - multi_filter_search - INFO - Query executed in 0.64s
2025-01-23 21:47:33,768 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:33] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:55,532 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:55,537 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:47:55,537 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 21:47:55,537 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:47:55,538 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:47:55,539 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:47:56,335 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-23 21:47:56,351 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, owner 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_8)) AS anon_6) AND casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_9)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:47:57,155 - multi_filter_search - INFO - Query executed in 1.62s
2025-01-23 21:47:57,216 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:47:57] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:47:58,993 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:47:58,993 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 21:47:58,994 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:47:58,994 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:47:58,995 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:47:59,715 - multi_filter_search - INFO - Total results before pagination: 345
2025-01-23 21:47:59,731 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, owner 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_8)) AS anon_6) OR casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_9)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:49:28,639 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:49:28] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:49:28,643 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:49:28,643 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, page=1, per_page=10
2025-01-23 21:49:28,645 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:49:28,645 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:49:29,473 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 21:49:29,486 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_6) AND casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_7)) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:49:30,032 - multi_filter_search - INFO - Query executed in 1.39s
2025-01-23 21:49:30,097 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:49:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:49:40,273 - multi_filter_search - INFO - Query executed in 101.28s
2025-01-23 21:49:40,335 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:49:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:49:50,256 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:49:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:49:50,259 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:49:50,260 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 21:49:50,260 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:49:50,260 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:49:50,261 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:49:51,126 - multi_filter_search - INFO - Total results before pagination: 345
2025-01-23 21:49:51,141 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, owner 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_8)) AS anon_6) OR casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_9)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:50:38,204 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:50:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:50:38,208 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:50:38,208 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 21:50:38,211 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:50:39,254 - multi_filter_search - INFO - Total results before pagination: 344
2025-01-23 21:50:39,259 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, owner 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:51:02,397 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 21:51:02,397 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 21:51:02,397 - werkzeug - INFO -  * Restarting with stat
2025-01-23 21:51:02,631 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 21:51:02,638 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 21:51:09,094 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:51:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:51:09,096 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:51:09,096 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 21:51:09,101 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 21:51:11,716 - multi_filter_search - INFO - Total results before pagination: 344
2025-01-23 21:51:11,731 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, owner 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT owner.serial_number 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%')))) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:51:24,163 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:51:24] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:51:24,169 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:51:24,169 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 21:51:24,171 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:51:26,667 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 21:51:26,677 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:51:27,998 - multi_filter_search - INFO - Query executed in 3.83s
2025-01-23 21:51:28,209 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:51:28] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:53:38,915 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:53:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:53:38,918 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:53:38,918 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 21:53:38,919 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:53:38,923 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:53:39,480 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 21:53:39,491 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:53:40,095 - multi_filter_search - INFO - Query executed in 1.18s
2025-01-23 21:53:40,159 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:53:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:53:41,941 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:53:41,941 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 21:53:41,942 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:53:41,942 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:53:42,757 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 21:53:42,769 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:53:43,374 - multi_filter_search - INFO - Query executed in 1.43s
2025-01-23 21:53:43,447 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:53:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:53:56,037 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:53:56] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:53:56,040 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:53:56,040 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 21:53:56,041 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:53:56,042 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:53:56,043 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 21:53:56,786 - multi_filter_search - INFO - Total results before pagination: 2
2025-01-23 21:53:56,800 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'bob') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_8)) AS anon_6) OR casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_9)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:53:57,913 - multi_filter_search - INFO - Query executed in 1.87s
2025-01-23 21:53:57,979 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:53:57] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:54:04,875 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:54:04] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:54:04,878 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 21:54:04,878 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 21:54:04,879 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 21:54:04,879 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 21:54:04,880 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 21:54:05,592 - multi_filter_search - INFO - Total results before pagination: 2
2025-01-23 21:54:05,607 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'bob') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_8)) AS anon_6) OR casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_9)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 21:54:06,822 - multi_filter_search - INFO - Query executed in 1.94s
2025-01-23 21:54:06,887 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:54:06] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 21:57:30,604 - multi_filter_search - INFO - Query executed in 381.51s
2025-01-23 21:57:30,671 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 21:57:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:12:30,470 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-23 22:12:30,545 - werkzeug - INFO -  * Restarting with stat
2025-01-23 22:12:30,894 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 22:12:30,899 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 22:12:33,155 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:12:33] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:12:33,159 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:12:33,159 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'attorney_name', 'query': 'bob', 'group': 'General Search', 'label': 'Attorney Name'}]}, page=1, per_page=10
2025-01-23 22:12:33,161 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 22:12:33,164 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 22:12:33,165 - multi_filter_search - INFO - Generated query for strategy 'attorney_name'.
2025-01-23 22:12:34,591 - multi_filter_search - INFO - Total results before pagination: 2
2025-01-23 22:12:34,608 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.attorney_name, 'bob') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_8)) AS anon_6) OR casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.attorney_name, 'bob') > 0.3 OR lower(casefileheader.attorney_name) LIKE lower('%bob%')) AS anon_9)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:12:35,205 - multi_filter_search - INFO - Query executed in 2.05s
2025-01-23 22:12:35,267 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:12:35] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:12:45,177 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:12:45] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:12:45,180 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:12:45,180 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 22:12:45,182 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 22:12:46,060 - multi_filter_search - INFO - Total results before pagination: 344
2025-01-23 22:12:46,073 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:12:49,439 - multi_filter_search - INFO - Query executed in 4.26s
2025-01-23 22:12:49,501 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:12:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:13:00,325 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 22:13:00,325 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 22:13:00,326 - werkzeug - INFO -  * Restarting with stat
2025-01-23 22:13:00,562 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 22:13:00,567 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 22:13:08,462 - __main__ - INFO - Fetching details for case: 73263776
2025-01-23 22:13:08,462 - __main__ - INFO - Database session established.
2025-01-23 22:13:09,599 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 22:13:09,686 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 22:13:09,770 - __main__ - INFO - Owners query executed. Owners found: 6
2025-01-23 22:13:09,858 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 22:13:09,930 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-23 22:13:10,011 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 22:13:10,075 - __main__ - INFO - Design Searches query executed. Design Searches found: 1
2025-01-23 22:13:10,242 - __main__ - INFO - Event Statements query executed. Event Statements found: 45
2025-01-23 22:13:10,311 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 22:13:10,375 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 22:13:10,435 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 22:13:10,435 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 22:13:10,495 - __main__ - INFO - Database session closed.
2025-01-23 22:13:10,496 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:13:10] "GET /api/case/73263776 HTTP/1.1" 200 -
2025-01-23 22:13:17,647 - __main__ - INFO - Fetching details for case: 73263776
2025-01-23 22:13:17,648 - __main__ - INFO - Database session established.
2025-01-23 22:13:17,768 - __main__ - INFO - Case query executed. Case found: True
2025-01-23 22:13:17,832 - __main__ - INFO - Header query executed. Header found: True
2025-01-23 22:13:17,906 - __main__ - INFO - Owners query executed. Owners found: 6
2025-01-23 22:13:17,974 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-23 22:13:18,037 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-23 22:13:18,107 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-23 22:13:18,171 - __main__ - INFO - Design Searches query executed. Design Searches found: 1
2025-01-23 22:13:18,312 - __main__ - INFO - Event Statements query executed. Event Statements found: 45
2025-01-23 22:13:18,376 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-23 22:13:18,436 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-23 22:13:18,497 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-23 22:13:18,497 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-23 22:13:18,558 - __main__ - INFO - Database session closed.
2025-01-23 22:13:18,560 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:13:18] "GET /api/case/73263776 HTTP/1.1" 200 -
2025-01-23 22:13:23,382 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:13:23] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:13:23,384 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:13:23,385 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 22:13:23,386 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 22:13:24,357 - multi_filter_search - INFO - Total results before pagination: 344
2025-01-23 22:13:24,372 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:13:27,840 - multi_filter_search - INFO - Query executed in 4.45s
2025-01-23 22:13:27,901 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:13:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:14:58,521 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:14:58] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:14:58,524 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:14:58,524 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'disclaimer_statements', 'query': 'auto', 'group': 'General Search', 'label': 'Disclaimer Statements'}]}, page=1, per_page=10
2025-01-23 22:14:58,526 - multi_filter_search - INFO - Generated query for strategy 'disclaimer_statements'.
2025-01-23 22:14:58,733 - multi_filter_search - INFO - Total results before pagination: 12
2025-01-23 22:14:58,747 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'D0' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR substr(casefilestatement.type_code, 1, 2) = 'D1' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'D0' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR substr(casefilestatement.type_code, 1, 2) = 'D1' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT casefilestatement.serial_number AS sn, greatest(similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100, similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100) AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'D0' AND (similarity(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), ''), 'auto') * 100 > 30 OR lower(coalesce(substring(casefilestatement.statement_text, '"([^"]+)"'), '')) LIKE lower('%auto%')) OR substr(casefilestatement.type_code, 1, 2) = 'D1' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'auto') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%auto%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:14:59,181 - multi_filter_search - INFO - Query executed in 0.66s
2025-01-23 22:14:59,243 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:14:59] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:15:16,687 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:15:16] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:15:16,690 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:15:16,690 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 22:15:16,692 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 22:15:17,445 - multi_filter_search - INFO - Total results before pagination: 344
2025-01-23 22:15:17,457 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:15:20,553 - multi_filter_search - INFO - Query executed in 3.86s
2025-01-23 22:15:20,612 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:15:20] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:26:53,799 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-23 22:26:53,800 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-23 22:26:53,800 - werkzeug - INFO -  * Restarting with stat
2025-01-23 22:26:54,054 - werkzeug - WARNING -  * Debugger is active!
2025-01-23 22:26:54,061 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-23 22:27:12,390 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:12] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:27:12,395 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:27:12,395 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}]}, page=1, per_page=10
2025-01-23 22:27:12,397 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 22:27:14,213 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-23 22:27:14,225 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:27:14,623 - multi_filter_search - INFO - Query executed in 2.23s
2025-01-23 22:27:14,684 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:14] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:27:40,758 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:40] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:27:40,761 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:27:40,762 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 22:27:40,763 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 22:27:40,769 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 22:27:41,082 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-23 22:27:41,094 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) AND casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:27:41,496 - multi_filter_search - INFO - Query executed in 0.73s
2025-01-23 22:27:41,605 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:41] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:27:42,780 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:27:42,780 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 22:27:42,782 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 22:27:42,782 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 22:27:43,057 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 22:27:43,067 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:27:43,396 - multi_filter_search - INFO - Query executed in 0.62s
2025-01-23 22:27:43,471 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:43] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:27:45,110 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 2, 'per_page': 10}
2025-01-23 22:27:45,110 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=2, per_page=10
2025-01-23 22:27:45,111 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 22:27:45,111 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 22:27:45,386 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 22:27:45,397 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 10
2025-01-23 22:27:45,755 - multi_filter_search - INFO - Query executed in 0.64s
2025-01-23 22:27:45,816 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:45] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:27:48,756 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:27:48,761 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:27:48,761 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, page=1, per_page=10
2025-01-23 22:27:48,761 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 22:27:48,762 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 22:27:49,010 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 22:27:49,024 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_6)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:27:49,539 - multi_filter_search - INFO - Query executed in 0.78s
2025-01-23 22:27:49,601 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:27:51,276 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:27:51,276 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}]}, page=1, per_page=10
2025-01-23 22:27:51,277 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 22:27:51,277 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 22:27:51,582 - multi_filter_search - INFO - Total results before pagination: 26
2025-01-23 22:27:51,594 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_6) OR casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_7)) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:27:51,999 - multi_filter_search - INFO - Query executed in 0.72s
2025-01-23 22:27:52,060 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:27:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:28:06,025 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:28:06] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-23 22:28:06,030 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 10}
2025-01-23 22:28:06,030 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Word Mark'}, {'strategy': 'filing_date', 'query': '1979-01-05 - 1979-01-05', 'group': 'Date Filters', 'label': 'Filing Date'}]}, {'strategy': 'owner_name', 'query': 'auto', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=10
2025-01-23 22:28:06,031 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-23 22:28:06,031 - multi_filter_search - INFO - Generated query for strategy 'filing_date'.
2025-01-23 22:28:06,033 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-23 22:28:06,847 - multi_filter_search - INFO - Total results before pagination: 345
2025-01-23 22:28:06,865 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_4.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_4 
WHERE casefile.serial_number IN (SELECT anon_4.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_4)) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT anon_6.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_8) AND casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefileheader.filing_date BETWEEN '1979-01-05' AND '1979-01-05') AS anon_9)) AS anon_7) OR casefile.serial_number IN (SELECT anon_10.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_11.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'auto') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'auto') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%auto%'))) AS anon_11)) AS anon_10)) AS anon_6) AS anon_5) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-23 22:28:11,046 - multi_filter_search - INFO - Query executed in 5.02s
2025-01-23 22:28:11,109 - werkzeug - INFO - 127.0.0.1 - - [23/Jan/2025 22:28:11] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:16:22,017 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-24 08:16:22,017 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-24 08:16:22,017 - werkzeug - INFO -  * Restarting with stat
2025-01-24 08:16:22,254 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 08:16:22,261 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 08:25:05,688 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:25:05] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:25:05,693 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'hi', 'group': 'General Search', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 10}
2025-01-24 08:25:05,693 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'hi', 'group': 'General Search', 'label': 'Wordmark'}]}, page=1, per_page=10
2025-01-24 08:25:05,699 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 08:25:05,700 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 08:25:05,708 - multi_filter_search - ERROR - Error in multi_filter_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 176, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3142, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-24 08:25:05,715 - __main__ - ERROR - Error in combined_search: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 353, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 176, in multi_filter_search
    total_count = final_query.count()
                  ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 3142, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2831, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2804, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "localhost" (127.0.0.1), port 15432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-24 08:25:05,718 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:25:05] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-24 08:25:17,576 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:25:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:25:17,579 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'hi', 'group': 'General Search', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 10}
2025-01-24 08:25:17,579 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'hi', 'group': 'General Search', 'label': 'Wordmark'}]}, page=1, per_page=10
2025-01-24 08:25:17,580 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 08:25:17,581 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 08:25:19,065 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 08:25:19,080 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_6) AND casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_7)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 10 OFFSET 0
2025-01-24 08:25:19,528 - multi_filter_search - INFO - Query executed in 1.95s
2025-01-24 08:25:19,586 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:25:19] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:29:15,776 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:29:15] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:29:15,781 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 40}
2025-01-24 08:29:15,781 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=40
2025-01-24 08:29:15,785 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 08:29:16,136 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-24 08:29:16,146 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 40 OFFSET 0
2025-01-24 08:29:16,411 - multi_filter_search - INFO - Query executed in 0.63s
2025-01-24 08:29:16,473 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:29:16] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:29:22,658 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:29:22] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:29:22,661 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 40}
2025-01-24 08:29:22,661 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=40
2025-01-24 08:29:22,662 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 08:29:22,916 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 08:29:22,926 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 40 OFFSET 0
2025-01-24 08:29:23,287 - multi_filter_search - INFO - Query executed in 0.63s
2025-01-24 08:29:23,349 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:29:23] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:30:05,866 - __main__ - INFO - Fetching details for case: 73121459
2025-01-24 08:30:05,867 - __main__ - INFO - Database session established.
2025-01-24 08:30:06,006 - __main__ - INFO - Case query executed. Case found: True
2025-01-24 08:30:06,079 - __main__ - INFO - Header query executed. Header found: True
2025-01-24 08:30:06,204 - __main__ - INFO - Owners query executed. Owners found: 1
2025-01-24 08:30:06,399 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-24 08:30:06,467 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-24 08:30:06,552 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-24 08:30:06,619 - __main__ - INFO - Design Searches query executed. Design Searches found: 3
2025-01-24 08:30:06,782 - __main__ - INFO - Event Statements query executed. Event Statements found: 18
2025-01-24 08:30:06,914 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-24 08:30:06,975 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-24 08:30:07,038 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-24 08:30:07,040 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-24 08:30:07,101 - __main__ - INFO - Database session closed.
2025-01-24 08:30:07,102 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:30:07] "GET /api/case/73121459 HTTP/1.1" 200 -
2025-01-24 08:44:17,247 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:44:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 08:44:17,251 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-24 08:44:17,252 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 08:44:17,254 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 08:44:17,532 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 08:44:17,544 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 08:44:17,925 - multi_filter_search - INFO - Query executed in 0.67s
2025-01-24 08:44:17,987 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 08:44:17] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:15:28,303 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-24 12:15:28,304 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-24 12:15:28,304 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:15:28,749 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:15:28,759 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:15:55,202 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:15:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:15:55,206 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-24 12:15:55,206 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:15:55,208 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:15:56,542 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-24 12:15:56,555 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:15:56,855 - multi_filter_search - INFO - Query executed in 1.65s
2025-01-24 12:15:56,916 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:15:56] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:16:01,974 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:16:01] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:16:01,977 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'export_type': 'current_page', 'page': 1, 'per_page': 60}
2025-01-24 12:16:01,977 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:16:01,978 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:16:02,232 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-24 12:16:02,241 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:16:02,640 - multi_filter_search - INFO - Query executed in 0.66s
2025-01-24 12:16:02,705 - __main__ - ERROR - Error in export_search: No module named 'openpyxl'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 395, in export_search
    with pd.ExcelWriter(output, engine='openpyxl') as writer:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 57, in __init__
    from openpyxl.workbook import Workbook
ModuleNotFoundError: No module named 'openpyxl'
2025-01-24 12:16:02,710 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:16:02] "[35m[1mPOST /api/export_search HTTP/1.1[0m" 500 -
2025-01-24 12:17:41,259 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-24 12:17:41,259 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-24 12:17:41,260 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:17:41,631 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:17:41,637 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:17:44,603 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:17:44] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:17:44,606 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'export_type': 'current_page', 'page': 1, 'per_page': 60}
2025-01-24 12:17:44,606 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:17:44,608 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:17:45,940 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-24 12:17:45,944 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:17:46,235 - multi_filter_search - INFO - Query executed in 1.63s
2025-01-24 12:17:46,441 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:17:46] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:20:19,780 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:20:19,878 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:20:20,422 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:20:20,427 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:20:44,347 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:20:44] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:20:44,350 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hello', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-24 12:20:44,351 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hello', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:20:44,354 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:20:45,708 - multi_filter_search - INFO - Total results before pagination: 14
2025-01-24 12:20:45,721 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hello') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:20:46,027 - multi_filter_search - INFO - Query executed in 1.68s
2025-01-24 12:20:46,090 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:20:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:20:51,704 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:20:51] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:20:51,707 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-24 12:20:51,707 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:20:51,708 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:20:51,969 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:20:51,979 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:20:52,377 - multi_filter_search - INFO - Query executed in 0.67s
2025-01-24 12:20:52,439 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:20:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:20:57,932 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:20:57] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:20:57,935 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-24 12:20:57,935 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-24 12:20:57,936 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:20:58,168 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:20:58,186 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-24 12:20:58,605 - multi_filter_search - INFO - Query executed in 0.67s
2025-01-24 12:20:58,795 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:20:58] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:23:48,662 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:23:48] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:23:48,668 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 2, 'per_page': 60}
2025-01-24 12:23:48,669 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=2, per_page=60
2025-01-24 12:23:48,672 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:23:48,903 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:23:48,915 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 60
2025-01-24 12:23:49,165 - multi_filter_search - INFO - Query executed in 0.50s
2025-01-24 12:23:49,230 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:23:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:23:51,368 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 3, 'per_page': 60}
2025-01-24 12:23:51,368 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=3, per_page=60
2025-01-24 12:23:51,370 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:23:51,604 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:23:51,615 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 120
2025-01-24 12:23:51,987 - multi_filter_search - INFO - Query executed in 0.62s
2025-01-24 12:23:52,049 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:23:52] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:23:53,819 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:23:53] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:23:53,822 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 4, 'per_page': 60}
2025-01-24 12:23:53,822 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=4, per_page=60
2025-01-24 12:23:53,823 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:23:54,063 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:23:54,074 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 180
2025-01-24 12:23:54,403 - multi_filter_search - INFO - Query executed in 0.58s
2025-01-24 12:23:54,466 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:23:54] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:23:56,518 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 5, 'per_page': 60}
2025-01-24 12:23:56,519 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=5, per_page=60
2025-01-24 12:23:56,520 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:23:56,743 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:23:56,753 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 240
2025-01-24 12:23:56,992 - multi_filter_search - INFO - Query executed in 0.47s
2025-01-24 12:23:57,056 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:23:57] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:23:59,829 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:23:59] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:23:59,832 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 6, 'per_page': 60}
2025-01-24 12:23:59,832 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=6, per_page=60
2025-01-24 12:23:59,833 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:24:00,182 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:24:00,193 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 300
2025-01-24 12:24:00,483 - multi_filter_search - INFO - Query executed in 0.65s
2025-01-24 12:24:00,548 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:24:00] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:24:06,891 - __main__ - INFO - Fetching details for case: 73153033
2025-01-24 12:24:06,892 - __main__ - INFO - Database session established.
2025-01-24 12:24:07,020 - __main__ - INFO - Case query executed. Case found: True
2025-01-24 12:24:07,089 - __main__ - INFO - Header query executed. Header found: True
2025-01-24 12:24:07,167 - __main__ - INFO - Owners query executed. Owners found: 4
2025-01-24 12:24:07,284 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-24 12:24:07,350 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-24 12:24:07,418 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-24 12:24:07,484 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-24 12:24:07,652 - __main__ - INFO - Event Statements query executed. Event Statements found: 19
2025-01-24 12:24:07,723 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-24 12:24:07,787 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-24 12:24:07,852 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-24 12:24:07,852 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-24 12:24:07,914 - __main__ - INFO - Database session closed.
2025-01-24 12:24:07,916 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:24:07] "GET /api/case/73153033 HTTP/1.1" 200 -
2025-01-24 12:24:24,116 - __main__ - INFO - Fetching details for case: 73156490
2025-01-24 12:24:24,117 - __main__ - INFO - Database session established.
2025-01-24 12:24:24,239 - __main__ - INFO - Case query executed. Case found: True
2025-01-24 12:24:24,306 - __main__ - INFO - Header query executed. Header found: True
2025-01-24 12:24:24,378 - __main__ - INFO - Owners query executed. Owners found: 4
2025-01-24 12:24:24,467 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-24 12:24:24,529 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-24 12:24:24,596 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-24 12:24:24,658 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-24 12:24:24,807 - __main__ - INFO - Event Statements query executed. Event Statements found: 22
2025-01-24 12:24:24,875 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-24 12:24:24,938 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-24 12:24:24,999 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-24 12:24:25,000 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-24 12:24:25,060 - __main__ - INFO - Database session closed.
2025-01-24 12:24:25,061 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:24:25] "GET /api/case/73156490 HTTP/1.1" 200 -
2025-01-24 12:35:57,134 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:35:57,232 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:35:57,771 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:35:57,777 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:36:16,484 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:36:16] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:36:16,488 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 6, 'per_page': 60}
2025-01-24 12:36:16,488 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-24 12:36:16,492 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:36:17,931 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:36:17,941 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-24 12:36:18,398 - multi_filter_search - INFO - Query executed in 1.91s
2025-01-24 12:36:18,589 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:36:18] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:38:22,698 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:38:22,842 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:38:23,356 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:38:23,361 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:38:53,736 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:38:53] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:38:53,740 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 6, 'per_page': 60}
2025-01-24 12:38:53,740 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-24 12:38:53,743 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:38:55,042 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:38:55,055 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-24 12:38:55,475 - multi_filter_search - INFO - Query executed in 1.74s
2025-01-24 12:38:55,659 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:38:55] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:39:52,829 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:39:52] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:39:52,834 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-24 12:39:52,835 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:39:52,837 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:39:53,142 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:39:53,153 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:39:53,508 - multi_filter_search - INFO - Query executed in 0.67s
2025-01-24 12:39:53,573 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:39:53] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:39:55,098 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:39:55] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:39:55,102 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-24 12:39:55,102 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-24 12:39:55,102 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:39:55,337 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:39:55,349 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-24 12:39:55,742 - multi_filter_search - INFO - Query executed in 0.64s
2025-01-24 12:39:55,882 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:39:55] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:41:18,701 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:41:18,813 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:41:19,350 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:41:19,355 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:41:20,832 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-24 12:41:20,832 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-24 12:41:20,832 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:41:21,231 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:41:21,236 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:41:31,011 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:41:31] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:41:31,015 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-24 12:41:31,015 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:41:31,017 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:41:32,924 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:41:32,935 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:41:33,308 - multi_filter_search - INFO - Query executed in 2.29s
2025-01-24 12:41:33,371 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:41:33] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-24 12:41:34,901 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:41:34] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:41:34,904 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-24 12:41:34,904 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-24 12:41:34,905 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:41:35,135 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:41:35,143 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-24 12:41:35,555 - multi_filter_search - INFO - Query executed in 0.65s
2025-01-24 12:41:35,732 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:41:35] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:43:09,217 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:43:09,325 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:43:09,815 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:43:09,821 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:43:47,351 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:43:47] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:43:47,355 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-24 12:43:47,355 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-24 12:43:47,359 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:43:48,668 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:43:48,680 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-24 12:43:49,170 - multi_filter_search - INFO - Query executed in 1.81s
2025-01-24 12:43:49,924 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:43:49] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:45:37,699 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:45:37,873 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:45:38,436 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:45:38,441 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:45:56,814 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:45:56,905 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:45:57,483 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:45:57,488 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:47:00,750 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:47:00] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:47:00,754 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-24 12:47:00,754 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-24 12:47:00,758 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:47:02,754 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:47:02,765 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-24 12:47:03,402 - multi_filter_search - INFO - Query executed in 2.65s
2025-01-24 12:47:04,264 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:47:04] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:48:47,781 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:48:47,944 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:48:48,558 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:48:48,564 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:49:20,724 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:49:20] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:49:20,727 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-24 12:49:20,727 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-24 12:49:20,731 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:49:22,053 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:49:22,067 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-24 12:49:22,491 - multi_filter_search - INFO - Query executed in 1.76s
2025-01-24 12:49:23,160 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:49:23] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:51:13,414 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:51:13,598 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:51:14,210 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:51:14,215 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:51:25,501 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:51:25] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:51:25,508 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'current_page', 'page': 1, 'per_page': 60}
2025-01-24 12:51:25,508 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:51:25,526 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:51:26,872 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:51:26,883 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:51:27,297 - multi_filter_search - INFO - Query executed in 1.79s
2025-01-24 12:51:27,641 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:51:27] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:51:42,671 - __main__ - INFO - Fetching details for case: 73121459
2025-01-24 12:51:42,672 - __main__ - INFO - Database session established.
2025-01-24 12:51:43,590 - __main__ - INFO - Case query executed. Case found: True
2025-01-24 12:51:43,728 - __main__ - INFO - Header query executed. Header found: True
2025-01-24 12:51:43,807 - __main__ - INFO - Owners query executed. Owners found: 1
2025-01-24 12:51:43,928 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-24 12:51:43,994 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-24 12:51:44,114 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-24 12:51:44,180 - __main__ - INFO - Design Searches query executed. Design Searches found: 3
2025-01-24 12:51:44,406 - __main__ - INFO - Event Statements query executed. Event Statements found: 18
2025-01-24 12:51:44,482 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-24 12:51:44,546 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-24 12:51:44,697 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-24 12:51:44,697 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-24 12:51:44,757 - __main__ - INFO - Database session closed.
2025-01-24 12:51:44,759 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:51:44] "GET /api/case/73121459 HTTP/1.1" 200 -
2025-01-24 12:52:11,247 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:52:11,427 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:52:11,990 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:52:11,995 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-24 12:52:20,442 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:52:20] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-24 12:52:20,444 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'current_page', 'page': 1, 'per_page': 60}
2025-01-24 12:52:20,444 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-24 12:52:20,449 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-24 12:52:21,707 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-24 12:52:21,719 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-24 12:52:22,029 - multi_filter_search - INFO - Query executed in 1.59s
2025-01-24 12:52:22,353 - werkzeug - INFO - 127.0.0.1 - - [24/Jan/2025 12:52:22] "POST /api/export_search HTTP/1.1" 200 -
2025-01-24 12:52:32,398 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-24 12:52:32,575 - werkzeug - INFO -  * Restarting with stat
2025-01-24 12:52:33,222 - werkzeug - WARNING -  * Debugger is active!
2025-01-24 12:52:33,227 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-25 14:39:29,420 - werkzeug - WARNING -  * Debugger is active!
2025-01-25 14:39:29,427 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-25 20:04:01,800 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:04:01] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:04:01,805 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 20:04:01,805 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-25 20:04:01,811 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 20:04:03,303 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-25 20:04:03,316 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 20:04:03,584 - multi_filter_search - INFO - Query executed in 1.78s
2025-01-25 20:04:03,646 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:04:03] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:04:05,788 - __main__ - INFO - Fetching details for case: 73199066
2025-01-25 20:04:05,788 - __main__ - INFO - Database session established.
2025-01-25 20:04:05,909 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 20:04:05,983 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 20:04:06,072 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-25 20:04:06,147 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-25 20:04:06,214 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 20:04:06,358 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-25 20:04:06,424 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 20:04:06,681 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-25 20:04:06,759 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 20:04:06,826 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 20:04:06,890 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 20:04:06,891 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 20:04:06,952 - __main__ - INFO - Database session closed.
2025-01-25 20:04:06,953 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:04:06] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-25 20:04:10,943 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:04:10] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:04:10,943 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:04:10] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:04:10,967 - __main__ - INFO - Received combined_search request: {'conditions': [{'strategy': 'attorney_name', 'query': 'Max Vern', 'operator': 'OR'}], 'page': 1, 'per_page': 20}
2025-01-25 20:04:10,967 - __main__ - WARNING - Received empty filter tree.
2025-01-25 20:04:10,967 - __main__ - INFO - Received combined_search request: {'conditions': [{'strategy': 'attorney_name', 'query': 'Max Vern', 'operator': 'OR'}], 'page': 1, 'per_page': 20}
2025-01-25 20:04:10,967 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:04:10] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:04:10,967 - __main__ - WARNING - Received empty filter tree.
2025-01-25 20:04:10,968 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:04:10] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:06:08,911 - __main__ - INFO - Fetching details for case: 73199066
2025-01-25 20:06:08,912 - __main__ - INFO - Database session established.
2025-01-25 20:06:09,043 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 20:06:09,107 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 20:06:09,178 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-25 20:06:09,246 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-25 20:06:09,306 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 20:06:09,370 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-25 20:06:09,433 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 20:06:09,567 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-25 20:06:09,631 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 20:06:09,692 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 20:06:09,752 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 20:06:09,752 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 20:06:09,811 - __main__ - INFO - Database session closed.
2025-01-25 20:06:09,811 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:06:09] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-25 20:06:53,470 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/update_dmetaphone.py', reloading
2025-01-25 20:06:54,300 - werkzeug - WARNING -  * Debugger is active!
2025-01-25 20:06:54,310 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-25 20:12:06,403 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:12:06] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:12:06,408 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 20:12:06,408 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-25 20:12:06,412 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 20:12:07,766 - multi_filter_search - INFO - Total results before pagination: 16
2025-01-25 20:12:07,779 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 20:12:08,113 - multi_filter_search - INFO - Query executed in 1.71s
2025-01-25 20:12:08,174 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:12:08] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:12:09,217 - __main__ - INFO - Fetching details for case: 72055975
2025-01-25 20:12:09,218 - __main__ - INFO - Database session established.
2025-01-25 20:12:09,338 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 20:12:09,403 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 20:12:09,483 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 20:12:09,554 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-25 20:12:09,617 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-25 20:12:09,691 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-25 20:12:09,753 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-25 20:12:09,904 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-25 20:12:09,974 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 20:12:10,039 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 20:12:10,103 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 20:12:10,103 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 20:12:10,194 - __main__ - INFO - Database session closed.
2025-01-25 20:12:10,195 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:12:10] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-25 20:12:11,571 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:12:11] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:12:11,572 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:12:11] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:12:11,579 - __main__ - INFO - Received combined_search request: {'conditions': [{'strategy': 'attorney_name', 'query': 'Christina Davidson Trimmer', 'operator': 'OR'}], 'page': 1, 'per_page': 20}
2025-01-25 20:12:11,579 - __main__ - INFO - Received combined_search request: {'conditions': [{'strategy': 'attorney_name', 'query': 'Christina Davidson Trimmer', 'operator': 'OR'}], 'page': 1, 'per_page': 20}
2025-01-25 20:12:11,579 - __main__ - WARNING - Received empty filter tree.
2025-01-25 20:12:11,580 - __main__ - WARNING - Received empty filter tree.
2025-01-25 20:12:11,580 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:12:11] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:12:11,580 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:12:11] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:12:39,192 - __main__ - INFO - Fetching details for case: 73199066
2025-01-25 20:12:39,192 - __main__ - INFO - Database session established.
2025-01-25 20:12:39,315 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 20:12:39,377 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 20:12:39,453 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-25 20:12:39,521 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-25 20:12:39,582 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 20:12:39,651 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-25 20:12:39,712 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 20:12:39,862 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-25 20:12:39,930 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 20:12:40,000 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 20:12:40,062 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 20:12:40,063 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 20:12:40,123 - __main__ - INFO - Database session closed.
2025-01-25 20:12:40,125 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:12:40] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-25 20:13:04,745 - __main__ - INFO - Fetching details for case: 73199066
2025-01-25 20:13:04,747 - __main__ - INFO - Database session established.
2025-01-25 20:13:04,874 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 20:13:04,938 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 20:13:05,019 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-25 20:13:05,088 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-25 20:13:05,151 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 20:13:05,218 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-25 20:13:05,282 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 20:13:05,422 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-25 20:13:05,487 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 20:13:05,549 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 20:13:05,612 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 20:13:05,613 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 20:13:05,672 - __main__ - INFO - Database session closed.
2025-01-25 20:13:05,673 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:13:05] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-25 20:51:45,572 - __main__ - INFO - Fetching details for case: 73199066
2025-01-25 20:51:45,573 - __main__ - INFO - Database session established.
2025-01-25 20:51:45,814 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 20:51:45,879 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 20:51:45,951 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-25 20:51:46,032 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-25 20:51:46,114 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 20:51:46,402 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-25 20:51:46,489 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 20:51:46,633 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-25 20:51:46,697 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 20:51:46,863 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 20:51:46,948 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 20:51:46,948 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 20:51:47,034 - __main__ - INFO - Database session closed.
2025-01-25 20:51:47,037 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:51:47] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-25 20:52:30,085 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:52:30] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:52:30,088 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}]}, 'page': 1, 'per_page': 60}
2025-01-25 20:52:30,088 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}]}, page=1, per_page=60
2025-01-25 20:52:30,089 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 20:52:30,234 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-25 20:52:30,239 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73086231') AS anon_3)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 20:52:30,340 - multi_filter_search - INFO - Query executed in 0.25s
2025-01-25 20:52:30,402 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:52:30] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 20:52:31,625 - __main__ - INFO - Fetching details for case: 73086231
2025-01-25 20:52:31,625 - __main__ - INFO - Database session established.
2025-01-25 20:52:31,748 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 20:52:31,811 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 20:52:31,885 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 20:52:31,953 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 20:52:32,015 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 20:52:32,080 - __main__ - INFO - Statements query executed. Statements found: 7
2025-01-25 20:52:32,143 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 20:52:32,280 - __main__ - INFO - Event Statements query executed. Event Statements found: 23
2025-01-25 20:52:32,346 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 20:52:32,407 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 20:52:32,467 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 20:52:32,467 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 20:52:32,527 - __main__ - INFO - Database session closed.
2025-01-25 20:52:32,528 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 20:52:32] "GET /api/case/73086231 HTTP/1.1" 200 -
2025-01-25 21:20:21,023 - __main__ - INFO - Fetching details for case: 73086231
2025-01-25 21:20:21,024 - __main__ - INFO - Database session established.
2025-01-25 21:20:21,166 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 21:20:21,231 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 21:20:21,304 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 21:20:21,374 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 21:20:21,436 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 21:20:21,503 - __main__ - INFO - Statements query executed. Statements found: 7
2025-01-25 21:20:21,564 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 21:20:21,743 - __main__ - INFO - Event Statements query executed. Event Statements found: 23
2025-01-25 21:20:21,808 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 21:20:21,871 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 21:20:21,930 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 21:20:21,930 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 21:20:21,989 - __main__ - INFO - Database session closed.
2025-01-25 21:20:21,990 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 21:20:21] "GET /api/case/73086231 HTTP/1.1" 200 -
2025-01-25 21:43:17,943 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-25 21:43:17,943 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-25 21:43:17,944 - werkzeug - INFO -  * Restarting with stat
2025-01-25 21:43:18,374 - werkzeug - WARNING -  * Debugger is active!
2025-01-25 21:43:18,389 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-25 21:43:24,687 - __main__ - INFO - Fetching details for case: 73086231
2025-01-25 21:43:24,688 - __main__ - INFO - Database session established.
2025-01-25 21:43:27,843 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 21:43:27,979 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 21:43:28,055 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 21:43:28,423 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 21:43:28,783 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 21:43:28,856 - __main__ - INFO - Statements query executed. Statements found: 7
2025-01-25 21:43:29,191 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 21:43:30,434 - __main__ - INFO - Event Statements query executed. Event Statements found: 23
2025-01-25 21:43:30,899 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 21:43:30,962 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 21:43:31,023 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 21:43:31,024 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 21:43:31,060 - __main__ - INFO - Fetching details for case: 73086231
2025-01-25 21:43:31,060 - __main__ - INFO - Database session established.
2025-01-25 21:43:31,082 - __main__ - INFO - Database session closed.
2025-01-25 21:43:31,083 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 21:43:31] "GET /api/case/73086231 HTTP/1.1" 200 -
2025-01-25 21:43:33,473 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 21:43:38,580 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 21:43:38,952 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 21:43:39,033 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 21:43:40,320 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-25 21:43:40,967 - __main__ - INFO - Statements query executed. Statements found: 7
2025-01-25 21:43:42,268 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 21:43:42,882 - __main__ - INFO - Event Statements query executed. Event Statements found: 23
2025-01-25 21:43:42,948 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 21:43:43,010 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 21:43:43,072 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 21:43:43,072 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 21:43:43,133 - __main__ - INFO - Database session closed.
2025-01-25 21:43:43,136 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 21:43:43] "GET /api/case/73086231 HTTP/1.1" 200 -
2025-01-25 22:13:54,847 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:13:54] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 22:13:54,852 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}, {'strategy': 'serial_number', 'query': '73092348', 'group': 'General Search', 'label': 'Serial Number'}]}, 'page': 1, 'per_page': 60}
2025-01-25 22:13:54,852 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}, {'strategy': 'serial_number', 'query': '73092348', 'group': 'General Search', 'label': 'Serial Number'}]}, page=1, per_page=60
2025-01-25 22:13:54,855 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:13:54,855 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:13:55,047 - multi_filter_search - INFO - Total results before pagination: 2
2025-01-25 22:13:55,049 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73086231') AS anon_3) OR casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73092348') AS anon_4)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 22:13:55,199 - multi_filter_search - INFO - Query executed in 0.35s
2025-01-25 22:13:55,260 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:13:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 22:13:56,964 - __main__ - INFO - Fetching details for case: 73092348
2025-01-25 22:13:56,964 - __main__ - INFO - Database session established.
2025-01-25 22:13:57,086 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 22:13:57,209 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 22:13:57,297 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-25 22:13:57,371 - __main__ - INFO - Classifications query executed. Classifications found: 4
2025-01-25 22:13:57,435 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-25 22:13:57,504 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-25 22:13:57,566 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 22:13:57,775 - __main__ - INFO - Event Statements query executed. Event Statements found: 57
2025-01-25 22:13:57,840 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 22:13:57,900 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 22:13:57,960 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 22:13:57,961 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 22:13:58,022 - __main__ - INFO - Database session closed.
2025-01-25 22:13:58,024 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:13:58] "GET /api/case/73092348 HTTP/1.1" 200 -
2025-01-25 22:27:19,593 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:27:19] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 22:27:19,598 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}, {'strategy': 'serial_number', 'query': '73092348', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73054795', 'group': 'General Search', 'label': 'Serial Number'}]}, 'page': 1, 'per_page': 60}
2025-01-25 22:27:19,598 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}, {'strategy': 'serial_number', 'query': '73092348', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73054795', 'group': 'General Search', 'label': 'Serial Number'}]}, page=1, per_page=60
2025-01-25 22:27:19,600 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:27:19,600 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:27:19,601 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:27:19,813 - multi_filter_search - INFO - Total results before pagination: 3
2025-01-25 22:27:19,821 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73086231') AS anon_4) OR casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73092348') AS anon_5)) AS anon_3) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73054795') AS anon_6)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 22:27:20,026 - multi_filter_search - INFO - Query executed in 0.43s
2025-01-25 22:27:20,089 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:27:20] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 22:27:21,768 - __main__ - INFO - Fetching details for case: 73054795
2025-01-25 22:27:21,768 - __main__ - INFO - Database session established.
2025-01-25 22:27:21,892 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 22:27:21,956 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 22:27:22,030 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 22:27:22,098 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 22:27:22,160 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-25 22:27:22,226 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-25 22:27:22,288 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 22:27:22,441 - __main__ - INFO - Event Statements query executed. Event Statements found: 20
2025-01-25 22:27:22,508 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 22:27:22,570 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 22:27:22,630 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 22:27:22,630 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 22:27:22,690 - __main__ - INFO - Database session closed.
2025-01-25 22:27:22,691 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:27:22] "GET /api/case/73054795 HTTP/1.1" 200 -
2025-01-25 22:36:55,612 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:36:55] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 22:36:55,615 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}, {'strategy': 'serial_number', 'query': '73092348', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73054795', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73169531', 'group': 'General Search', 'label': 'Serial Number'}]}, 'page': 1, 'per_page': 60}
2025-01-25 22:36:55,615 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}, {'strategy': 'serial_number', 'query': '73092348', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73054795', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73169531', 'group': 'General Search', 'label': 'Serial Number'}]}, page=1, per_page=60
2025-01-25 22:36:55,616 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:36:55,617 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:36:55,618 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:36:55,619 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:36:55,822 - multi_filter_search - INFO - Total results before pagination: 4
2025-01-25 22:36:55,826 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73086231') AS anon_5) OR casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73092348') AS anon_6)) AS anon_4) OR casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73054795') AS anon_7)) AS anon_3) OR casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73169531') AS anon_8)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 22:36:56,020 - multi_filter_search - INFO - Query executed in 0.41s
2025-01-25 22:36:56,082 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:36:56] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 22:36:58,353 - __main__ - INFO - Fetching details for case: 73169531
2025-01-25 22:36:58,353 - __main__ - INFO - Database session established.
2025-01-25 22:36:58,476 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 22:36:58,540 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 22:36:58,610 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-25 22:36:58,682 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 22:36:58,744 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-25 22:36:58,809 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-25 22:36:58,899 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 22:36:59,115 - __main__ - INFO - Event Statements query executed. Event Statements found: 24
2025-01-25 22:36:59,238 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 22:36:59,298 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 22:36:59,357 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 22:36:59,357 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 22:36:59,417 - __main__ - INFO - Database session closed.
2025-01-25 22:36:59,418 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:36:59] "GET /api/case/73169531 HTTP/1.1" 200 -
2025-01-25 22:39:47,828 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:39:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 22:39:47,832 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}, {'strategy': 'serial_number', 'query': '73092348', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73054795', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73169531', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73170333', 'group': 'General Search', 'label': 'Serial Number'}]}, 'page': 1, 'per_page': 60}
2025-01-25 22:39:47,832 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'operator': 'OR', 'operands': [{'strategy': 'serial_number', 'query': '73086231', 'group': 'General Search', 'label': 'Serial Number'}, {'strategy': 'serial_number', 'query': '73092348', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73054795', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73169531', 'group': 'General Search', 'label': 'Serial Number'}]}, {'strategy': 'serial_number', 'query': '73170333', 'group': 'General Search', 'label': 'Serial Number'}]}, page=1, per_page=60
2025-01-25 22:39:47,834 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:39:47,834 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:39:47,836 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:39:47,836 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:39:47,837 - multi_filter_search - INFO - Generated query for strategy 'serial_number'.
2025-01-25 22:39:48,134 - multi_filter_search - INFO - Total results before pagination: 5
2025-01-25 22:39:48,141 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_1.serial_number 
FROM (SELECT anon_2.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73086231') AS anon_6) OR casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73092348') AS anon_7)) AS anon_5) OR casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73054795') AS anon_8)) AS anon_4) OR casefile.serial_number IN (SELECT anon_9.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73169531') AS anon_9)) AS anon_3) OR casefile.serial_number IN (SELECT anon_10.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number = '73170333') AS anon_10)) AS anon_2) AS anon_1) ORDER BY casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 22:39:48,325 - multi_filter_search - INFO - Query executed in 0.49s
2025-01-25 22:39:48,387 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:39:48] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 22:39:50,307 - __main__ - INFO - Fetching details for case: 73170333
2025-01-25 22:39:50,309 - __main__ - INFO - Database session established.
2025-01-25 22:39:50,435 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 22:39:50,503 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 22:39:50,581 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 22:39:50,654 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 22:39:50,715 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-25 22:39:50,779 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-25 22:39:50,841 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 22:39:51,010 - __main__ - INFO - Event Statements query executed. Event Statements found: 20
2025-01-25 22:39:51,075 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 22:39:51,134 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 22:39:51,195 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 22:39:51,195 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 22:39:51,254 - __main__ - INFO - Database session closed.
2025-01-25 22:39:51,255 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 22:39:51] "GET /api/case/73170333 HTTP/1.1" 200 -
2025-01-25 23:07:45,178 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-25 23:07:45,281 - werkzeug - INFO -  * Restarting with stat
2025-01-25 23:07:45,886 - werkzeug - WARNING -  * Debugger is active!
2025-01-25 23:07:45,892 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-25 23:07:53,012 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_engine.py', reloading
2025-01-25 23:07:53,101 - werkzeug - INFO -  * Restarting with stat
2025-01-25 23:07:53,520 - werkzeug - WARNING -  * Debugger is active!
2025-01-25 23:07:53,524 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-25 23:09:50,766 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_engine.py', reloading
2025-01-25 23:09:50,843 - werkzeug - INFO -  * Restarting with stat
2025-01-25 23:09:51,387 - werkzeug - WARNING -  * Debugger is active!
2025-01-25 23:09:51,391 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-25 23:10:03,274 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:10:03] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:10:03,278 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:10:03,278 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, page=1, per_page=60
2025-01-25 23:10:03,283 - multi_filter_search - INFO - Generated query for strategy 'pseudo_mark'.
2025-01-25 23:10:04,580 - multi_filter_search - INFO - Total results before pagination: 5
2025-01-25 23:10:04,594 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:10:04,764 - multi_filter_search - INFO - Query executed in 1.49s
2025-01-25 23:10:04,823 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:10:04] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:11:37,671 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_engine.py', reloading
2025-01-25 23:11:37,797 - werkzeug - INFO -  * Restarting with stat
2025-01-25 23:11:38,405 - werkzeug - WARNING -  * Debugger is active!
2025-01-25 23:11:38,412 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-25 23:13:32,591 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:13:32] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:13:32,594 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': '14', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:13:32,594 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': '14', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-25 23:13:32,597 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:13:33,973 - multi_filter_search - INFO - Total results before pagination: 5
2025-01-25 23:13:33,989 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, '14') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, '14') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%14%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, '14') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%14%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:13:34,452 - multi_filter_search - INFO - Query executed in 1.86s
2025-01-25 23:13:34,517 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:13:34] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:13:47,278 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:13:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:13:47,282 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': '14', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:13:47,282 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': '14', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-25 23:13:47,283 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:13:47,283 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:13:47,587 - multi_filter_search - INFO - Total results before pagination: 5
2025-01-25 23:13:47,599 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, '14') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, '14') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%14%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'fourteen') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, '14') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%14%')) AS anon_6) OR casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_7)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:13:48,073 - multi_filter_search - INFO - Query executed in 0.79s
2025-01-25 23:13:48,134 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:13:48] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:13:53,233 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:13:53] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:13:53,236 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:13:53,236 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-25 23:13:53,237 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:13:53,444 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-25 23:13:53,454 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'fourteen') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:13:53,596 - multi_filter_search - INFO - Query executed in 0.36s
2025-01-25 23:13:53,657 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:13:53] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:14:01,143 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:14:01] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:14:01,146 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'foortien', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:14:01,146 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'foortien', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-25 23:14:01,147 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:14:01,587 - multi_filter_search - INFO - Total results before pagination: 4
2025-01-25 23:14:01,598 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'foortien') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'foortien') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%foortien%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'foortien') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%foortien%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:14:02,098 - multi_filter_search - INFO - Query executed in 0.95s
2025-01-25 23:14:02,160 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:14:02] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:14:09,699 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:14:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:14:09,703 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:14:09,703 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, page=1, per_page=60
2025-01-25 23:14:09,705 - multi_filter_search - INFO - Generated query for strategy 'pseudo_mark'.
2025-01-25 23:14:09,866 - multi_filter_search - INFO - Total results before pagination: 5
2025-01-25 23:14:09,878 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:14:10,061 - multi_filter_search - INFO - Query executed in 0.36s
2025-01-25 23:14:10,123 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:14:10] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:14:16,938 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:14:16] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:14:16,941 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'foreteen', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:14:16,941 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'foreteen', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-25 23:14:16,942 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:14:17,161 - multi_filter_search - INFO - Total results before pagination: 5
2025-01-25 23:14:17,171 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'foreteen') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'foreteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%foreteen%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'foreteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%foreteen%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:14:17,436 - multi_filter_search - INFO - Query executed in 0.49s
2025-01-25 23:14:17,497 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:14:17] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:17:00,456 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:17:00] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:17:00,459 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}, {'strategy': 'pseudo_mark', 'query': 'fourteen', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:17:00,459 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}, {'strategy': 'pseudo_mark', 'query': 'fourteen', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, page=1, per_page=60
2025-01-25 23:17:00,459 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:17:00,461 - multi_filter_search - INFO - Generated query for strategy 'pseudo_mark'.
2025-01-25 23:17:00,733 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-25 23:17:00,748 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'fourteen') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_4.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_4 
WHERE casefile.serial_number IN (SELECT anon_4.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_4)) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT anon_6.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_7) OR casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_9.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_9)) AS anon_8)) AS anon_6) AS anon_5) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:17:01,108 - multi_filter_search - INFO - Query executed in 0.65s
2025-01-25 23:17:01,169 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:17:01] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:17:22,443 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:17:22] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:17:22,446 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}, {'strategy': 'pseudo_mark', 'query': 'fourteen', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:17:22,446 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}, {'strategy': 'pseudo_mark', 'query': 'fourteen', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, page=1, per_page=60
2025-01-25 23:17:22,447 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:17:22,449 - multi_filter_search - INFO - Generated query for strategy 'pseudo_mark'.
2025-01-25 23:17:22,702 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-25 23:17:22,719 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'fourteen') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_4.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_4 
WHERE casefile.serial_number IN (SELECT anon_4.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_4)) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT anon_6.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_7) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_9.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_9)) AS anon_8)) AS anon_6) AS anon_5) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:17:22,900 - multi_filter_search - INFO - Query executed in 0.45s
2025-01-25 23:17:22,963 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:17:22] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:17:26,192 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}, {'strategy': 'pseudo_mark', 'query': 'fourteen', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, 'page': 1, 'per_page': 60}
2025-01-25 23:17:26,192 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'fourteen', 'label': 'Wordmark'}, {'strategy': 'pseudo_mark', 'query': 'fourteen', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, page=1, per_page=60
2025-01-25 23:17:26,193 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-25 23:17:26,194 - multi_filter_search - INFO - Generated query for strategy 'pseudo_mark'.
2025-01-25 23:17:26,467 - multi_filter_search - INFO - Total results before pagination: 1
2025-01-25 23:17:26,482 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'fourteen') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_4.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_4 
WHERE casefile.serial_number IN (SELECT anon_4.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_4)) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT anon_6.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'fourteen') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%fourteen%')) AS anon_7) OR casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_9.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), 'fourteen') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%fourteen%'))) AS anon_9)) AS anon_8)) AS anon_6) AS anon_5) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-25 23:17:27,002 - multi_filter_search - INFO - Query executed in 0.81s
2025-01-25 23:17:27,064 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:17:27] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-25 23:18:17,957 - __main__ - INFO - Fetching details for case: 73054795
2025-01-25 23:18:17,958 - __main__ - INFO - Database session established.
2025-01-25 23:18:18,086 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 23:18:18,157 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 23:18:18,236 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 23:18:18,320 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 23:18:18,384 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-25 23:18:18,456 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-25 23:18:18,527 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 23:18:18,679 - __main__ - INFO - Event Statements query executed. Event Statements found: 20
2025-01-25 23:18:18,744 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 23:18:18,807 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 23:18:18,875 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 23:18:18,875 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 23:18:18,943 - __main__ - INFO - Database session closed.
2025-01-25 23:18:18,946 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:18:18] "GET /api/case/73054795 HTTP/1.1" 200 -
2025-01-25 23:19:19,186 - __main__ - INFO - Fetching details for case: 73054795
2025-01-25 23:19:19,186 - __main__ - INFO - Database session established.
2025-01-25 23:19:19,317 - __main__ - INFO - Case query executed. Case found: True
2025-01-25 23:19:19,385 - __main__ - INFO - Header query executed. Header found: True
2025-01-25 23:19:19,479 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-25 23:19:19,546 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-25 23:19:19,608 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-25 23:19:19,680 - __main__ - INFO - Statements query executed. Statements found: 3
2025-01-25 23:19:19,743 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-25 23:19:19,869 - __main__ - INFO - Event Statements query executed. Event Statements found: 20
2025-01-25 23:19:19,937 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-25 23:19:20,002 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-25 23:19:20,066 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-25 23:19:20,066 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-25 23:19:20,137 - __main__ - INFO - Database session closed.
2025-01-25 23:19:20,138 - werkzeug - INFO - 127.0.0.1 - - [25/Jan/2025 23:19:20] "GET /api/case/73054795 HTTP/1.1" 200 -
2025-01-26 12:01:32,856 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-26 12:01:32,856 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-26 12:01:32,857 - werkzeug - INFO -  * Restarting with stat
2025-01-26 12:01:33,292 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 12:01:33,299 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 12:01:45,345 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:01:45] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:01:45,348 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 12:01:45,348 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 12:01:45,350 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:01:46,710 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:01:46,722 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 12:01:47,166 - multi_filter_search - INFO - Query executed in 1.82s
2025-01-26 12:01:47,229 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:01:47] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:01:52,547 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:01:52] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-26 12:01:52,550 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-26 12:01:52,551 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-26 12:01:52,551 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:01:52,842 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:01:52,851 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-26 12:01:53,431 - multi_filter_search - INFO - Query executed in 0.88s
2025-01-26 12:01:54,177 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:01:54] "POST /api/export_search HTTP/1.1" 200 -
2025-01-26 12:08:09,236 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:08:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:08:09,240 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'davids autoworks', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 12:08:09,241 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'davids autoworks', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 12:08:09,244 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:08:10,002 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-26 12:08:10,013 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'davids autoworks') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'davids autoworks') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%davids autoworks%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'davids autoworks') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%davids autoworks%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 12:08:10,235 - multi_filter_search - INFO - Query executed in 0.99s
2025-01-26 12:08:10,296 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:08:10] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:08:21,670 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:08:21] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:08:21,674 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'autoworks', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 12:08:21,675 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'autoworks', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 12:08:21,675 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:08:21,893 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-26 12:08:21,901 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'autoworks') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'autoworks') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%autoworks%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'autoworks') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%autoworks%')) AS anon_5)) AS anon_4) AS anon_3) ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 12:08:22,083 - multi_filter_search - INFO - Query executed in 0.41s
2025-01-26 12:08:22,145 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:08:22] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:33:35,815 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 12:33:35,999 - werkzeug - INFO -  * Restarting with stat
2025-01-26 12:33:36,579 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 12:33:36,588 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 12:33:39,472 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:33:39] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:33:39,476 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'autoworks', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 12:33:39,476 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'autoworks', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 12:33:39,479 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:33:40,880 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-26 12:33:40,882 - multi_filter_search - ERROR - Error in multi_filter_search: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with CaseFile.serial_number has an attribute 'filter'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 1498, in __getattr__
    return getattr(self.comparator, key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Comparator' object has no attribute 'filter'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1332, in __getattr__
    return self._fallback_getattr(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/properties.py", line 472, in _fallback_getattr
    return getattr(self.__clause_element__(), key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 1500, in __getattr__
    raise AttributeError(
AttributeError: Neither 'AnnotatedColumn' object nor 'Comparator' object has an attribute 'filter'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 245, in multi_filter_search
    .filter(func.coalesce(scoring_agg.c.combined_score, 0) >= 30) # enforce minimum score
     ^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with CaseFile.serial_number has an attribute 'filter'
2025-01-26 12:33:40,953 - __main__ - ERROR - Error in combined_search: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with CaseFile.serial_number has an attribute 'filter'
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 1498, in __getattr__
    return getattr(self.comparator, key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Comparator' object has no attribute 'filter'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1332, in __getattr__
    return self._fallback_getattr(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/properties.py", line 472, in _fallback_getattr
    return getattr(self.__clause_element__(), key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 1500, in __getattr__
    raise AttributeError(
AttributeError: Neither 'AnnotatedColumn' object nor 'Comparator' object has an attribute 'filter'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 357, in combined_search
    results = multi_filter_search(
              ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py", line 245, in multi_filter_search
    .filter(func.coalesce(scoring_agg.c.combined_score, 0) >= 30) # enforce minimum score
     ^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with CaseFile.serial_number has an attribute 'filter'
2025-01-26 12:33:40,962 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:33:40] "[35m[1mPOST /api/combined_search HTTP/1.1[0m" 500 -
2025-01-26 12:34:56,181 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 12:34:56,279 - werkzeug - INFO -  * Restarting with stat
2025-01-26 12:34:56,871 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 12:34:56,876 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 12:34:58,766 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:34:58] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:34:58,769 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'autoworks', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 12:34:58,769 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'autoworks', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 12:34:58,771 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:35:00,377 - multi_filter_search - INFO - Total results before pagination: 0
2025-01-26 12:35:00,389 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'autoworks') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'autoworks') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%autoworks%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'autoworks') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%autoworks%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 30 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 12:35:00,564 - multi_filter_search - INFO - Query executed in 1.80s
2025-01-26 12:35:00,625 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:00] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:35:07,036 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:07] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:35:07,039 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 12:35:07,039 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 12:35:07,040 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:35:07,301 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:35:07,310 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 30 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 12:35:07,650 - multi_filter_search - INFO - Query executed in 0.61s
2025-01-26 12:35:07,714 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:07] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:35:15,040 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:15] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-26 12:35:15,043 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-26 12:35:15,043 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-26 12:35:15,044 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:35:15,276 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:35:15,285 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 30 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-26 12:35:15,636 - multi_filter_search - INFO - Query executed in 0.59s
2025-01-26 12:35:15,974 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:15] "POST /api/export_search HTTP/1.1" 200 -
2025-01-26 12:35:40,239 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:40] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:35:40,244 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 2, 'per_page': 60}
2025-01-26 12:35:40,244 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=2, per_page=60
2025-01-26 12:35:40,246 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:35:40,969 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:35:40,979 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 30 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 60
2025-01-26 12:35:41,282 - multi_filter_search - INFO - Query executed in 1.04s
2025-01-26 12:35:41,342 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:41] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:35:58,286 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:58] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:35:58,290 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 12:35:58,290 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 12:35:58,291 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:35:58,513 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:35:58,524 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 30 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 12:35:58,806 - multi_filter_search - INFO - Query executed in 0.52s
2025-01-26 12:35:58,872 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:35:58] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:36:29,597 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 12:36:29,773 - werkzeug - INFO -  * Restarting with stat
2025-01-26 12:36:30,339 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 12:36:30,344 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 12:36:31,839 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:36:31] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:36:31,842 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 12:36:31,843 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 12:36:31,846 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:36:33,178 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:36:33,191 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 20 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 12:36:33,562 - multi_filter_search - INFO - Query executed in 1.72s
2025-01-26 12:36:33,626 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:36:33] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:36:35,155 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:36:35] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-26 12:36:35,157 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-26 12:36:35,158 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-26 12:36:35,159 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:36:35,401 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:36:35,418 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 20 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-26 12:36:35,815 - multi_filter_search - INFO - Query executed in 0.66s
2025-01-26 12:36:36,228 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:36:36] "POST /api/export_search HTTP/1.1" 200 -
2025-01-26 12:36:47,174 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:36:47] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:36:47,178 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 2, 'per_page': 60}
2025-01-26 12:36:47,178 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=2, per_page=60
2025-01-26 12:36:47,179 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:36:47,944 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:36:47,954 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 20 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 60
2025-01-26 12:36:48,309 - multi_filter_search - INFO - Query executed in 1.13s
2025-01-26 12:36:48,371 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:36:48] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:36:51,192 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 3, 'per_page': 60}
2025-01-26 12:36:51,193 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=3, per_page=60
2025-01-26 12:36:51,194 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 12:36:51,411 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 12:36:51,422 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 20 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 120
2025-01-26 12:36:51,734 - multi_filter_search - INFO - Query executed in 0.54s
2025-01-26 12:36:51,797 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 12:36:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 12:37:39,827 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 12:37:39,991 - werkzeug - INFO -  * Restarting with stat
2025-01-26 12:37:40,575 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 12:37:40,582 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 12:37:55,813 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 12:37:55,898 - werkzeug - INFO -  * Restarting with stat
2025-01-26 12:37:56,447 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 12:37:56,452 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:06:51,831 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:06:51] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:06:51,834 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:06:51,835 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:06:51,839 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:06:54,656 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 13:06:54,666 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:06:55,096 - multi_filter_search - INFO - Query executed in 3.26s
2025-01-26 13:06:55,351 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:06:55] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:07:14,144 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:07:14] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:07:14,148 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:07:14,148 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:07:14,149 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:07:14,396 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 13:07:14,406 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:07:14,846 - multi_filter_search - INFO - Query executed in 0.70s
2025-01-26 13:07:14,911 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:07:14] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:07:51,313 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:07:51] "OPTIONS /api/export_search HTTP/1.1" 200 -
2025-01-26 13:07:51,316 - __main__ - INFO - Received export_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'export_type': 'full', 'page': 1, 'per_page': 60}
2025-01-26 13:07:51,316 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=500
2025-01-26 13:07:51,317 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:07:51,559 - multi_filter_search - INFO - Total results before pagination: 914
2025-01-26 13:07:51,576 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 500 OFFSET 0
2025-01-26 13:07:51,976 - multi_filter_search - INFO - Query executed in 0.66s
2025-01-26 13:07:52,354 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:07:52] "POST /api/export_search HTTP/1.1" 200 -
2025-01-26 13:10:54,432 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 13:10:54,613 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:10:55,213 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:10:55,220 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:11:27,601 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:11:27] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:11:27,605 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:11:27,605 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:11:27,608 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:11:29,216 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:11:29,516 - multi_filter_search - INFO - Query executed in 1.91s
2025-01-26 13:11:29,580 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:11:29] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:11:33,033 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:11:33] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:11:33,036 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:11:33,037 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:11:33,037 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:11:33,374 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:11:33,667 - multi_filter_search - INFO - Query executed in 0.63s
2025-01-26 13:11:33,729 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:11:33] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:11:41,826 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:11:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:11:41,829 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'hello', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:11:41,829 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'hello', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:11:41,830 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:11:41,830 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:11:42,426 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hello') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_6) AND casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_7)) AS anon_5) AS anon_4) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:11:42,826 - multi_filter_search - INFO - Query executed in 1.00s
2025-01-26 13:11:42,889 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:11:42] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:11:45,346 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'hello', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:11:45,346 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'wordmark', 'query': 'hi', 'label': 'Wordmark'}, {'strategy': 'wordmark', 'query': 'hello', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:11:45,347 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:11:45,347 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:11:45,908 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hi') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'hello') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hi') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hi%')) AS anon_6) OR casefile.serial_number IN (SELECT anon_7.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'hello') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%hello%')) AS anon_7)) AS anon_5) AS anon_4) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:11:46,515 - multi_filter_search - INFO - Query executed in 1.17s
2025-01-26 13:11:46,578 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:11:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:11:51,353 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 13:11:51,450 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:11:52,003 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:11:52,008 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:13:43,268 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:13:43] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:13:43,271 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:13:43,271 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=60
2025-01-26 13:13:43,274 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-26 13:13:46,949 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') * 100 > 30 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:13:49,320 - multi_filter_search - INFO - Query executed in 6.05s
2025-01-26 13:13:49,383 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:13:49] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:13:53,574 - __main__ - INFO - Fetching details for case: 73225191
2025-01-26 13:13:53,574 - __main__ - INFO - Database session established.
2025-01-26 13:13:53,702 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 13:13:53,780 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 13:13:53,854 - __main__ - INFO - Owners query executed. Owners found: 9
2025-01-26 13:13:53,926 - __main__ - INFO - Classifications query executed. Classifications found: 19
2025-01-26 13:13:53,991 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 13:13:54,111 - __main__ - INFO - Statements query executed. Statements found: 5
2025-01-26 13:13:54,180 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-26 13:13:54,369 - __main__ - INFO - Event Statements query executed. Event Statements found: 28
2025-01-26 13:13:54,438 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 13:13:54,502 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 13:13:54,569 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 13:13:54,570 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 13:13:54,633 - __main__ - INFO - Database session closed.
2025-01-26 13:13:54,635 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:13:54] "GET /api/case/73225191 HTTP/1.1" 200 -
2025-01-26 13:19:59,903 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-26 13:20:00,055 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:20:00,775 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:20:00,781 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:20:16,093 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 13:20:16,195 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:20:16,766 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:20:16,770 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:20:58,033 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:20:58] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:20:58,037 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:20:58,037 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}]}, page=1, per_page=60
2025-01-26 13:20:58,044 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-26 13:21:01,122 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_6)) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:21:02,855 - multi_filter_search - INFO - Query executed in 4.82s
2025-01-26 13:21:02,917 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:21:02] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:22:43,258 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:22:43] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:22:43,263 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}, {'strategy': 'wordmark', 'query': 'Lucille Roberts', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:22:43,264 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}, {'strategy': 'wordmark', 'query': 'Lucille Roberts', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:22:43,274 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-26 13:22:43,275 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:22:44,654 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'Lucille Roberts') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Lucille Roberts') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Lucille Roberts%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_7)) AS anon_6) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Lucille Roberts') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Lucille Roberts%')) AS anon_8)) AS anon_5) AS anon_4) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:22:46,383 - multi_filter_search - INFO - Query executed in 3.12s
2025-01-26 13:22:46,444 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:22:46] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:23:02,537 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:23:02] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:23:02,543 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}, {'strategy': 'wordmark', 'query': 'Lucille Roberts', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:23:02,543 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}, {'strategy': 'wordmark', 'query': 'Lucille Roberts', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:23:02,544 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-26 13:23:02,544 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:23:03,902 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'Lucille Roberts') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Lucille Roberts') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Lucille Roberts%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_7)) AS anon_6) AND casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Lucille Roberts') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Lucille Roberts%')) AS anon_8)) AS anon_5) AS anon_4) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:23:05,122 - multi_filter_search - INFO - Query executed in 2.58s
2025-01-26 13:23:05,184 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:23:05] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:23:09,769 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:23:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:23:09,772 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'OR', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}, {'strategy': 'wordmark', 'query': 'Lucille Roberts', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:23:09,772 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'OR', 'operands': [{'strategy': 'owner_name', 'query': 'bob', 'group': 'General Search', 'label': "Owner's Name"}, {'strategy': 'wordmark', 'query': 'Lucille Roberts', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 13:23:09,774 - multi_filter_search - INFO - Generated query for strategy 'owner_name'.
2025-01-26 13:23:09,774 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 13:23:11,207 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_2 UNION ALL SELECT anon_3.sn AS sn, anon_3.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'Lucille Roberts') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Lucille Roberts') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Lucille Roberts%')) AS anon_3) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT owner.serial_number AS sn, similarity(coalesce(owner.party_name, ''), 'bob') * 100 AS score 
FROM owner 
WHERE owner.party_name IS NOT NULL AND (similarity(coalesce(owner.party_name, ''), 'bob') > 0.3 OR lower(coalesce(owner.party_name, '')) LIKE lower('%bob%'))) AS anon_7)) AS anon_6) OR casefile.serial_number IN (SELECT anon_8.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'Lucille Roberts') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%Lucille Roberts%')) AS anon_8)) AS anon_5) AS anon_4) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:23:12,498 - multi_filter_search - INFO - Query executed in 2.73s
2025-01-26 13:23:12,559 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:23:12] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:23:22,305 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/multi_filter_search.py', reloading
2025-01-26 13:23:22,431 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:23:23,052 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:23:23,065 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:24:09,761 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:24:09] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:24:09,764 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:24:09,765 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, page=1, per_page=60
2025-01-26 13:24:09,769 - multi_filter_search - INFO - Generated query for strategy 'pseudo_mark'.
2025-01-26 13:24:11,071 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, anon_3.score AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number, (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_3 
WHERE casefile.serial_number IN (SELECT anon_3.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_3)) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_4.serial_number 
FROM (SELECT anon_5.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_7.sn 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_7)) AS anon_6)) AS anon_5) AS anon_4) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:24:11,257 - multi_filter_search - INFO - Query executed in 1.49s
2025-01-26 13:24:11,319 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:24:11] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:27:20,370 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-26 13:27:20,479 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:27:21,119 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:27:21,124 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:28:38,796 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:28:38] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:28:38,800 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:28:38,800 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, page=1, per_page=60
2025-01-26 13:28:38,803 - multi_filter_search - INFO - Generated query for strategy 'pseudo_mark'.
2025-01-26 13:28:40,111 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefilestatement.serial_number AS serial_number 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_6)) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:28:40,247 - multi_filter_search - INFO - Query executed in 1.45s
2025-01-26 13:28:40,308 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:28:40] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:28:49,800 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/search_strategies.py', reloading
2025-01-26 13:28:49,931 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:28:50,559 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:28:50,565 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:41:18,664 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-26 13:41:18,778 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:41:19,379 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:41:19,384 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:42:41,963 - werkzeug - INFO -  * Detected change in '/Users/davidzachariah/Desktop/trademarks/backend/app.py', reloading
2025-01-26 13:42:42,053 - werkzeug - INFO -  * Restarting with stat
2025-01-26 13:42:42,619 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 13:42:42,624 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 13:49:34,601 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:49:34] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 13:49:34,604 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 13:49:34,604 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'pseudo_mark', 'query': '14', 'group': 'General Search', 'label': 'Pseudo Mark'}]}, page=1, per_page=60
2025-01-26 13:49:34,607 - multi_filter_search - INFO - Generated query for strategy 'pseudo_mark'.
2025-01-26 13:49:35,909 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefilestatement.serial_number AS sn, similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 AS score 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_6.serial_number 
FROM (SELECT casefilestatement.serial_number AS serial_number 
FROM casefilestatement 
WHERE substr(casefilestatement.type_code, 1, 2) = 'PM' AND (similarity(coalesce(casefilestatement.statement_text, ''), '14') * 100 > 30 OR lower(coalesce(casefilestatement.statement_text, '')) LIKE lower('%14%'))) AS anon_6)) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 13:49:36,111 - multi_filter_search - INFO - Query executed in 1.51s
2025-01-26 13:49:36,172 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 13:49:36] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 19:55:34,538 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-26 19:55:34,538 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-26 19:55:34,539 - werkzeug - INFO -  * Restarting with stat
2025-01-26 19:55:35,350 - werkzeug - WARNING -  * Debugger is active!
2025-01-26 19:55:35,362 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-26 19:55:40,839 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 19:55:40,839 - __main__ - INFO - Database session established.
2025-01-26 19:55:42,660 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 19:55:42,751 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 19:55:42,795 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 19:55:42,796 - __main__ - INFO - Database session established.
2025-01-26 19:55:42,984 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 19:55:43,055 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 19:55:43,127 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 19:55:43,195 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 19:55:43,260 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 19:55:43,509 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 19:55:43,581 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 19:55:43,666 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 19:55:43,790 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 19:55:43,791 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 19:55:43,797 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 19:55:43,858 - __main__ - INFO - Database session closed.
2025-01-26 19:55:43,860 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 19:55:43] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 19:55:43,935 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 19:55:44,035 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 19:55:44,115 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 19:55:44,188 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 19:55:44,256 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 19:55:44,319 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 19:55:44,558 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 19:55:44,626 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 19:55:44,691 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 19:55:44,751 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 19:55:44,751 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 19:55:44,812 - __main__ - INFO - Database session closed.
2025-01-26 19:55:44,812 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 19:55:44] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 19:56:17,606 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 19:56:17] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 19:56:17,609 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 19:56:17,610 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 19:56:17,613 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 19:56:18,122 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 19:56:18,379 - multi_filter_search - INFO - Query executed in 0.77s
2025-01-26 19:56:18,638 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 19:56:18] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 19:58:11,234 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 19:58:11] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 19:58:11,238 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 19:58:11,238 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 19:58:11,241 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 19:58:11,884 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 19:58:12,222 - multi_filter_search - INFO - Query executed in 0.98s
2025-01-26 19:58:12,400 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 19:58:12] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 20:00:37,656 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:00:37,657 - __main__ - INFO - Database session established.
2025-01-26 20:00:37,824 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:00:37,896 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:00:37,970 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:00:38,049 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:00:38,150 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:00:38,215 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:00:38,275 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:00:38,446 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:00:38,509 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:00:38,571 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:00:38,675 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:00:38,675 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:00:38,762 - __main__ - INFO - Database session closed.
2025-01-26 20:00:38,762 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:00:38] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:01:11,645 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:01:11] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:02:43,356 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:02:43,359 - __main__ - INFO - Database session established.
2025-01-26 20:02:43,584 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:02:43,645 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:02:43,717 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:02:43,790 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:02:44,065 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:02:44,195 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:02:44,259 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:02:44,498 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:02:44,565 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:02:44,631 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:02:44,712 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:02:44,712 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:02:44,776 - __main__ - INFO - Database session closed.
2025-01-26 20:02:44,778 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:02:44] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:03:45,038 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:03:45] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:04:18,910 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:04:18,911 - __main__ - INFO - Database session established.
2025-01-26 20:04:19,036 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:04:19,104 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:04:19,178 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:04:19,247 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:04:19,392 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:04:19,462 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:04:19,525 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:04:19,660 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:04:19,725 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:04:19,784 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:04:19,916 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:04:19,916 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:04:19,975 - __main__ - INFO - Database session closed.
2025-01-26 20:04:19,976 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:04:19] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:04:48,270 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:04:48,270 - __main__ - INFO - Database session established.
2025-01-26 20:04:48,396 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:04:48,465 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:04:48,537 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:04:48,617 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:04:48,751 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:04:48,819 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:04:48,895 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:04:49,068 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:04:49,154 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:04:49,280 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:04:49,340 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:04:49,340 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:04:49,404 - __main__ - INFO - Database session closed.
2025-01-26 20:04:49,404 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:04:49] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:05:47,936 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:05:47,936 - __main__ - INFO - Database session established.
2025-01-26 20:05:48,111 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:05:48,175 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:05:48,244 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:05:48,326 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:05:48,516 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:05:48,588 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:05:48,650 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:05:48,860 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:05:48,924 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:05:49,047 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:05:49,107 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:05:49,107 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:05:49,172 - __main__ - INFO - Database session closed.
2025-01-26 20:05:49,173 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:05:49] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:05:57,193 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:05:57] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:07:24,608 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:07:24,609 - __main__ - INFO - Database session established.
2025-01-26 20:07:24,741 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:07:24,807 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:07:24,879 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:07:24,984 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:07:25,331 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:07:25,397 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:07:25,509 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:07:25,659 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:07:25,731 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:07:25,795 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:07:25,858 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:07:25,858 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:07:25,926 - __main__ - INFO - Database session closed.
2025-01-26 20:07:25,927 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:07:25] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:07:46,271 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:07:46,273 - __main__ - INFO - Database session established.
2025-01-26 20:07:46,480 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:07:46,546 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:07:46,616 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:07:46,688 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:07:46,753 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:07:46,826 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:07:46,889 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:07:47,037 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:07:47,101 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:07:47,165 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:07:47,231 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:07:47,231 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:07:47,291 - __main__ - INFO - Database session closed.
2025-01-26 20:07:47,291 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:07:47] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:07:49,338 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:07:49] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:11:58,116 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:11:58,117 - __main__ - INFO - Database session established.
2025-01-26 20:11:58,256 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:11:58,319 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:11:58,390 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:11:58,459 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:11:58,523 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:11:58,655 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:11:58,717 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:11:58,949 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:11:59,013 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:11:59,073 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:11:59,180 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:11:59,180 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:11:59,241 - __main__ - INFO - Database session closed.
2025-01-26 20:11:59,242 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:11:59] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:12:01,824 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:12:01] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:20:56,391 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:20:56] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:20:58,393 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:20:58,394 - __main__ - INFO - Database session established.
2025-01-26 20:20:58,527 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:20:58,729 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:20:58,799 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:20:58,869 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:20:58,934 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:20:59,003 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:20:59,068 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:20:59,284 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:20:59,350 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:20:59,414 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:20:59,475 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:20:59,475 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:20:59,536 - __main__ - INFO - Database session closed.
2025-01-26 20:20:59,537 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:20:59] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:21:01,848 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:21:01] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:22:45,193 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:22:45,195 - __main__ - INFO - Database session established.
2025-01-26 20:22:45,354 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:22:45,415 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:22:45,485 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:22:45,683 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:22:46,052 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:22:46,203 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:22:46,268 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:22:46,434 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:22:46,504 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:22:46,566 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:22:46,626 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:22:46,626 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:22:46,727 - __main__ - INFO - Database session closed.
2025-01-26 20:22:46,728 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:22:46] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:22:48,812 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:22:48] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:25:26,818 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:25:26,819 - __main__ - INFO - Database session established.
2025-01-26 20:25:26,945 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:25:27,156 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:25:27,233 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:25:27,307 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:25:27,370 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:25:27,439 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:25:27,681 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:25:27,920 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:25:28,326 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:25:28,388 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:25:28,450 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:25:28,450 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:25:28,727 - __main__ - INFO - Database session closed.
2025-01-26 20:25:28,729 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:25:28] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:25:31,889 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:25:31] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:33:48,563 - __main__ - INFO - Fetching details for case: 72055975
2025-01-26 20:33:48,565 - __main__ - INFO - Database session established.
2025-01-26 20:33:48,709 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:33:48,889 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:33:48,960 - __main__ - INFO - Owners query executed. Owners found: 2
2025-01-26 20:33:49,028 - __main__ - INFO - Classifications query executed. Classifications found: 3
2025-01-26 20:33:49,089 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 0
2025-01-26 20:33:49,155 - __main__ - INFO - Statements query executed. Statements found: 2
2025-01-26 20:33:49,221 - __main__ - INFO - Design Searches query executed. Design Searches found: 2
2025-01-26 20:33:49,502 - __main__ - INFO - Event Statements query executed. Event Statements found: 32
2025-01-26 20:33:49,565 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:33:49,623 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:33:49,681 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:33:49,681 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:33:49,741 - __main__ - INFO - Database session closed.
2025-01-26 20:33:49,742 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:33:49] "GET /api/case/72055975 HTTP/1.1" 200 -
2025-01-26 20:33:51,481 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:33:51] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:34:50,610 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:34:50] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-26 20:34:50,614 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-26 20:34:50,614 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-26 20:34:50,616 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-26 20:34:51,151 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-26 20:34:51,445 - multi_filter_search - INFO - Query executed in 0.83s
2025-01-26 20:34:51,507 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:34:51] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-26 20:34:54,221 - __main__ - INFO - Fetching details for case: 73199066
2025-01-26 20:34:54,222 - __main__ - INFO - Database session established.
2025-01-26 20:34:54,422 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:34:54,486 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:34:54,556 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-26 20:34:55,004 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-26 20:34:55,067 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-26 20:34:55,135 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-26 20:34:55,200 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-26 20:34:55,498 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-26 20:34:55,564 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:34:55,724 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:34:55,997 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:34:55,998 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:34:56,078 - __main__ - INFO - Database session closed.
2025-01-26 20:34:56,079 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:34:56] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-26 20:35:00,139 - __main__ - INFO - Fetching details for case: 73199066
2025-01-26 20:35:00,139 - __main__ - INFO - Database session established.
2025-01-26 20:35:00,307 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:35:00,431 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:35:00,507 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-26 20:35:00,581 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-26 20:35:00,713 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-26 20:35:00,783 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-26 20:35:00,847 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-26 20:35:01,026 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-26 20:35:01,098 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:35:01,238 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:35:01,299 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:35:01,300 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:35:01,359 - __main__ - INFO - Database session closed.
2025-01-26 20:35:01,361 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:35:01] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-26 20:35:07,626 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:35:07] "[33mOPTIONS /api/ai-chat HTTP/1.1[0m" 404 -
2025-01-26 20:40:05,721 - __main__ - INFO - Fetching details for case: 73199066
2025-01-26 20:40:05,722 - __main__ - INFO - Database session established.
2025-01-26 20:40:05,943 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:40:06,080 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:40:06,158 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-26 20:40:06,232 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-26 20:40:06,342 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-26 20:40:06,409 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-26 20:40:06,471 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-26 20:40:06,625 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-26 20:40:06,767 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:40:06,866 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:40:06,926 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:40:06,927 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:40:06,989 - __main__ - INFO - Database session closed.
2025-01-26 20:40:06,990 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:40:06] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-26 20:40:09,548 - __main__ - INFO - Fetching details for case: 73199066
2025-01-26 20:40:09,548 - __main__ - INFO - Database session established.
2025-01-26 20:40:09,667 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:40:09,731 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:40:09,810 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-26 20:40:09,880 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-26 20:40:10,011 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-26 20:40:10,078 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-26 20:40:10,140 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-26 20:40:10,284 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-26 20:40:10,349 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:40:10,411 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:40:10,535 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:40:10,536 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:40:10,596 - __main__ - INFO - Database session closed.
2025-01-26 20:40:10,596 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:40:10] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-26 20:40:12,425 - __main__ - INFO - Fetching details for case: 73199066
2025-01-26 20:40:12,425 - __main__ - INFO - Database session established.
2025-01-26 20:40:12,691 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:40:12,936 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:40:13,156 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-26 20:40:13,249 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-26 20:40:13,314 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-26 20:40:13,381 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-26 20:40:13,448 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-26 20:40:13,689 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-26 20:40:13,753 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:40:13,820 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:40:13,881 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:40:13,882 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:40:14,002 - __main__ - INFO - Database session closed.
2025-01-26 20:40:14,004 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:40:14] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-26 20:52:42,417 - __main__ - INFO - Fetching details for case: 73199066
2025-01-26 20:52:42,418 - __main__ - INFO - Database session established.
2025-01-26 20:52:42,641 - __main__ - INFO - Case query executed. Case found: True
2025-01-26 20:52:42,709 - __main__ - INFO - Header query executed. Header found: True
2025-01-26 20:52:42,779 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-26 20:52:42,849 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-26 20:52:42,912 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-26 20:52:42,979 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-26 20:52:43,041 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-26 20:52:43,173 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-26 20:52:43,530 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-26 20:52:43,590 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-26 20:52:43,690 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-26 20:52:43,690 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-26 20:52:43,748 - __main__ - INFO - Database session closed.
2025-01-26 20:52:43,752 - werkzeug - INFO - 127.0.0.1 - - [26/Jan/2025 20:52:43] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 11:54:47,209 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-27 11:54:47,209 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-27 11:54:47,210 - werkzeug - INFO -  * Restarting with stat
2025-01-27 11:54:48,456 - werkzeug - WARNING -  * Debugger is active!
2025-01-27 11:54:48,463 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-27 11:59:32,372 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 11:59:32,373 - __main__ - INFO - Database session established.
2025-01-27 11:59:34,300 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 11:59:34,405 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 11:59:34,521 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 11:59:34,688 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 11:59:34,760 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 11:59:34,842 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 11:59:34,910 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 11:59:35,107 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 11:59:35,213 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 11:59:35,276 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 11:59:35,341 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 11:59:35,341 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 11:59:35,402 - __main__ - INFO - Database session closed.
2025-01-27 11:59:35,405 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 11:59:35] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:12:50,961 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:12:50,964 - __main__ - INFO - Database session established.
2025-01-27 12:12:51,101 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:12:51,166 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:12:51,237 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:12:51,304 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:12:51,364 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:12:51,462 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:12:51,523 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:12:51,690 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:12:51,755 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:12:51,815 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:12:51,876 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:12:51,876 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:12:51,987 - __main__ - INFO - Database session closed.
2025-01-27 12:12:51,987 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:12:51] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:13:51,998 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:13:51,999 - __main__ - INFO - Database session established.
2025-01-27 12:13:52,280 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:13:52,344 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:13:52,415 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:13:52,488 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:13:52,552 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:13:52,673 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:13:52,806 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:13:52,958 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:13:53,023 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:13:53,104 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:13:53,333 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:13:53,333 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:13:53,393 - __main__ - INFO - Database session closed.
2025-01-27 12:13:53,394 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:13:53] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:14:21,245 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:14:21,246 - __main__ - INFO - Database session established.
2025-01-27 12:14:21,370 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:14:21,433 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:14:21,502 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:14:21,640 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:14:21,701 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:14:21,836 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:14:21,906 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:14:22,065 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:14:22,165 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:14:22,227 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:14:22,360 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:14:22,361 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:14:22,422 - __main__ - INFO - Database session closed.
2025-01-27 12:14:22,422 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:14:22] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:14:26,888 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:14:26,888 - __main__ - INFO - Database session established.
2025-01-27 12:14:27,008 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:14:27,103 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:14:27,171 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:14:27,238 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:14:27,299 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:14:27,406 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:14:27,466 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:14:27,634 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:14:27,703 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:14:27,763 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:14:27,821 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:14:27,821 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:14:27,930 - __main__ - INFO - Database session closed.
2025-01-27 12:14:27,933 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:14:27] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:14:30,058 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:14:30,059 - __main__ - INFO - Database session established.
2025-01-27 12:14:30,185 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:14:30,272 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:14:30,554 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:14:30,651 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:14:30,714 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:14:30,798 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:14:30,862 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:14:31,077 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:14:31,145 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:14:31,206 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:14:31,267 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:14:31,267 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:14:31,353 - __main__ - INFO - Database session closed.
2025-01-27 12:14:31,353 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:14:31] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:19:07,504 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:19:07,505 - __main__ - INFO - Database session established.
2025-01-27 12:19:07,723 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:19:07,787 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:19:07,857 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:19:07,989 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:19:08,056 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:19:08,192 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:19:08,254 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:19:08,713 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:19:08,785 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:19:08,847 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:19:09,235 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:19:09,235 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:19:09,294 - __main__ - INFO - Database session closed.
2025-01-27 12:19:09,296 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:19:09] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:27:33,069 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:27:33,070 - __main__ - INFO - Database session established.
2025-01-27 12:27:33,285 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:27:33,355 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:27:33,430 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:27:33,505 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:27:33,745 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:27:33,811 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:27:33,876 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:27:34,055 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:27:34,269 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:27:34,330 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:27:34,393 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:27:34,393 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:27:34,475 - __main__ - INFO - Database session closed.
2025-01-27 12:27:34,476 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:27:34] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:27:37,336 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:27:37,336 - __main__ - INFO - Database session established.
2025-01-27 12:27:37,551 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:27:37,616 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:27:37,688 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:27:37,943 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:27:38,007 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:27:38,073 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:27:38,150 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:27:38,462 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:27:38,549 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:27:38,619 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:27:38,681 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:27:38,681 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:27:38,743 - __main__ - INFO - Database session closed.
2025-01-27 12:27:38,745 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:27:38] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:35:52,673 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:35:52,673 - __main__ - INFO - Database session established.
2025-01-27 12:35:52,810 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:35:52,963 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:35:53,091 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:35:53,179 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:35:53,241 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:35:53,308 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:35:53,372 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:35:53,617 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:35:53,687 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:35:53,773 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:35:53,837 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:35:53,837 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:35:53,901 - __main__ - INFO - Database session closed.
2025-01-27 12:35:53,903 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:35:53] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:39:35,007 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:39:35,008 - __main__ - INFO - Database session established.
2025-01-27 12:39:35,182 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:39:35,247 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:39:35,318 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:39:35,398 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:39:35,576 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:39:35,647 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:39:35,711 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:39:35,845 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:39:35,968 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:39:36,107 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:39:36,166 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:39:36,166 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:39:36,224 - __main__ - INFO - Database session closed.
2025-01-27 12:39:36,224 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:39:36] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:40:26,604 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:40:26,605 - __main__ - INFO - Database session established.
2025-01-27 12:40:26,732 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:40:26,796 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:40:26,962 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:40:27,065 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:40:27,126 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:40:27,193 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:40:27,255 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:40:27,488 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:40:27,580 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:40:27,640 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:40:27,699 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:40:27,699 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:40:27,761 - __main__ - INFO - Database session closed.
2025-01-27 12:40:27,762 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:40:27] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:41:04,192 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:41:04,193 - __main__ - INFO - Database session established.
2025-01-27 12:41:04,379 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:41:04,458 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:41:04,560 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:41:04,787 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:41:04,854 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:41:04,921 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:41:04,983 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:41:05,308 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:41:05,371 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:41:05,434 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:41:05,497 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:41:05,497 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:41:05,583 - __main__ - INFO - Database session closed.
2025-01-27 12:41:05,585 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:41:05] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:45:13,517 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:45:13,519 - __main__ - INFO - Database session established.
2025-01-27 12:45:13,653 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:45:13,992 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:45:14,066 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:45:14,142 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:45:14,213 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:45:14,281 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:45:14,461 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:45:14,638 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:45:14,703 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:45:14,802 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:45:14,864 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:45:14,864 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:45:14,986 - __main__ - INFO - Database session closed.
2025-01-27 12:45:14,988 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:45:14] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:46:12,953 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:46:12,954 - __main__ - INFO - Database session established.
2025-01-27 12:46:13,260 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:46:13,324 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:46:13,411 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:46:13,485 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:46:13,782 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:46:13,848 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:46:13,912 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:46:14,253 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:46:14,317 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:46:14,379 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:46:14,442 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:46:14,442 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:46:14,504 - __main__ - INFO - Database session closed.
2025-01-27 12:46:14,507 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:46:14] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:47:20,189 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:47:20,190 - __main__ - INFO - Database session established.
2025-01-27 12:47:20,438 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:47:20,503 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:47:20,601 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:47:20,669 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:47:20,731 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:47:20,843 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:47:20,907 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:47:21,117 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:47:21,179 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:47:21,238 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:47:21,369 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:47:21,369 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:47:21,430 - __main__ - INFO - Database session closed.
2025-01-27 12:47:21,432 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:47:21] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 12:50:11,809 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 12:50:11,810 - __main__ - INFO - Database session established.
2025-01-27 12:50:12,063 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 12:50:12,132 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 12:50:12,202 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 12:50:12,449 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 12:50:12,535 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 12:50:12,605 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 12:50:12,668 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 12:50:12,833 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 12:50:12,968 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 12:50:13,029 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 12:50:13,095 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 12:50:13,095 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 12:50:13,157 - __main__ - INFO - Database session closed.
2025-01-27 12:50:13,158 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 12:50:13] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 14:33:31,177 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-27 14:33:31,178 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-27 14:33:31,178 - werkzeug - INFO -  * Restarting with stat
2025-01-27 14:33:31,587 - werkzeug - WARNING -  * Debugger is active!
2025-01-27 14:33:31,598 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-27 14:38:58,706 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 14:38:58,707 - __main__ - INFO - Database session established.
2025-01-27 14:39:00,737 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 14:39:00,900 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 14:39:01,095 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 14:39:01,169 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 14:39:01,246 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 14:39:01,326 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 14:39:01,621 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 14:39:02,149 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 14:39:02,231 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 14:39:02,299 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 14:39:02,386 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 14:39:02,387 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 14:39:02,450 - __main__ - INFO - Database session closed.
2025-01-27 14:39:02,453 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 14:39:02] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 14:40:20,592 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 14:40:20,593 - __main__ - INFO - Database session established.
2025-01-27 14:40:20,869 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 14:40:20,939 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 14:40:21,039 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 14:40:21,334 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 14:40:21,418 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 14:40:21,484 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 14:40:21,545 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 14:40:21,863 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 14:40:21,930 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 14:40:22,004 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 14:40:22,064 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 14:40:22,065 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 14:40:22,149 - __main__ - INFO - Database session closed.
2025-01-27 14:40:22,151 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 14:40:22] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 14:56:58,890 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-01-27 14:56:58,891 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-01-27 14:56:58,891 - werkzeug - INFO -  * Restarting with stat
2025-01-27 14:56:59,419 - werkzeug - WARNING -  * Debugger is active!
2025-01-27 14:56:59,433 - werkzeug - INFO -  * Debugger PIN: 132-265-624
2025-01-27 14:57:10,502 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 14:57:10,502 - __main__ - INFO - Database session established.
2025-01-27 14:57:11,745 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 14:57:11,817 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 14:57:11,890 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 14:57:11,961 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 14:57:12,023 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 14:57:12,091 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 14:57:12,152 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 14:57:12,308 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 14:57:12,373 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 14:57:12,434 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 14:57:12,495 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 14:57:12,495 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 14:57:12,559 - __main__ - INFO - Database session closed.
2025-01-27 14:57:12,562 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 14:57:12] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 16:59:37,385 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 16:59:37,387 - __main__ - INFO - Database session established.
2025-01-27 16:59:50,803 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 16:59:50,804 - __main__ - INFO - Database session established.
2025-01-27 16:59:56,600 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 16:59:56,600 - __main__ - INFO - Database session established.
2025-01-27 17:00:03,420 - __main__ - ERROR - Error fetching case details for serial number 73199066: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 86, in case_details
    case = session.query(CaseFile).filter(CaseFile.serial_number == serial_number).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-27 17:00:03,426 - __main__ - ERROR - Error fetching case details for serial number 73199066: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 86, in case_details
    case = session.query(CaseFile).filter(CaseFile.serial_number == serial_number).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2241, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2110, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1189, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3274, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 148, in __init__
    Connection._handle_dbapi_exception_noconnection(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2439, in _handle_dbapi_exception_noconnection
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 146, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3298, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 449, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1263, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 712, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 179, in _do_get
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 177, in _do_get
    return self._create_connection()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 390, in _create_connection
    return _ConnectionRecord(self)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 674, in __init__
    self.__connect()
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 900, in __connect
    with util.safe_reraise():
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 896, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py", line 646, in connect
    return dialect.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 622, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at "localhost" (::1), port 15432 failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-27 17:00:03,427 - __main__ - ERROR - Error fetching case details for serial number 73199066: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id 
FROM casefile 
WHERE casefile.serial_number = %(serial_number_1)s 
 LIMIT %(param_1)s]
[parameters: {'serial_number_1': 73199066, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
psycopg2.OperationalError: SSL SYSCALL error: EOF detected


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/davidzachariah/Desktop/trademarks/backend/app.py", line 86, in case_details
    case = session.query(CaseFile).filter(CaseFile.serial_number == serial_number).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/davidzachariah/Desktop/trademarks/backend/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) SSL SYSCALL error: EOF detected

[SQL: SELECT casefile.serial_number AS casefile_serial_number, casefile.registration_number AS casefile_registration_number, casefile.transaction_date AS casefile_transaction_date, casefile.application_information_id AS casefile_application_information_id 
FROM casefile 
WHERE casefile.serial_number = %(serial_number_1)s 
 LIMIT %(param_1)s]
[parameters: {'serial_number_1': 73199066, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-01-27 17:00:03,440 - __main__ - INFO - Database session closed.
2025-01-27 17:00:03,441 - __main__ - INFO - Database session closed.
2025-01-27 17:00:03,444 - __main__ - INFO - Database session closed.
2025-01-27 17:00:03,445 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:00:03] "[35m[1mGET /api/case/73199066 HTTP/1.1[0m" 500 -
2025-01-27 17:00:03,445 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:00:03] "[35m[1mGET /api/case/73199066 HTTP/1.1[0m" 500 -
2025-01-27 17:00:03,445 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:00:03] "[35m[1mGET /api/case/73199066 HTTP/1.1[0m" 500 -
2025-01-27 17:00:11,053 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 17:00:11,054 - __main__ - INFO - Database session established.
2025-01-27 17:00:11,642 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:00:11,712 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:00:11,790 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 17:00:11,863 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 17:00:11,926 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 17:00:11,992 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:00:12,055 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:00:12,242 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 17:00:12,309 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:00:12,375 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:00:12,436 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:00:12,436 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:00:12,498 - __main__ - INFO - Database session closed.
2025-01-27 17:00:12,499 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:00:12] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 17:00:13,853 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 17:00:13,854 - __main__ - INFO - Database session established.
2025-01-27 17:00:13,977 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:00:14,041 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:00:14,128 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 17:00:14,198 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 17:00:14,259 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 17:00:14,325 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:00:14,387 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:00:14,534 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 17:00:14,600 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:00:14,661 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:00:14,721 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:00:14,722 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:00:14,783 - __main__ - INFO - Database session closed.
2025-01-27 17:00:14,784 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:00:14] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 17:03:44,691 - __main__ - INFO - Fetching details for case: 73199066
2025-01-27 17:03:44,692 - __main__ - INFO - Database session established.
2025-01-27 17:03:45,095 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:03:45,171 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:03:45,250 - __main__ - INFO - Owners query executed. Owners found: 3
2025-01-27 17:03:45,332 - __main__ - INFO - Classifications query executed. Classifications found: 7
2025-01-27 17:03:45,395 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 2
2025-01-27 17:03:45,461 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:03:45,523 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:03:45,693 - __main__ - INFO - Event Statements query executed. Event Statements found: 29
2025-01-27 17:03:45,758 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:03:45,817 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:03:45,876 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:03:45,876 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:03:45,934 - __main__ - INFO - Database session closed.
2025-01-27 17:03:45,934 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:03:45] "GET /api/case/73199066 HTTP/1.1" 200 -
2025-01-27 17:04:41,051 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:04:41] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-27 17:04:41,055 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'acme', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-27 17:04:41,055 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'acme', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-27 17:04:41,059 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-27 17:04:41,547 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'acme') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'acme') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%acme%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'acme') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%acme%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-27 17:04:41,848 - multi_filter_search - INFO - Query executed in 0.79s
2025-01-27 17:04:41,908 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:04:41] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-27 17:04:43,865 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:04:43,865 - __main__ - INFO - Database session established.
2025-01-27 17:04:43,994 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:04:44,061 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:04:44,143 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:04:44,215 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:04:44,278 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:04:44,346 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:04:44,407 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:04:44,564 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:04:44,629 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:04:44,689 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:04:44,751 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:04:44,751 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:04:44,814 - __main__ - INFO - Database session closed.
2025-01-27 17:04:44,815 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:04:44] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:04:48,191 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:04:48,195 - __main__ - INFO - Database session established.
2025-01-27 17:04:48,333 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:04:48,398 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:04:48,469 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:04:48,539 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:04:48,601 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:04:48,668 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:04:48,729 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:04:48,879 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:04:48,943 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:04:49,004 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:04:49,064 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:04:49,064 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:04:49,123 - __main__ - INFO - Database session closed.
2025-01-27 17:04:49,125 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:04:49] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:05:49,313 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:05:49,314 - __main__ - INFO - Database session established.
2025-01-27 17:05:49,441 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:05:49,507 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:05:49,576 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:05:49,643 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:05:49,704 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:05:49,770 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:05:49,830 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:05:49,962 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:05:50,026 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:05:50,085 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:05:50,145 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:05:50,145 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:05:50,205 - __main__ - INFO - Database session closed.
2025-01-27 17:05:50,206 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:05:50] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:08:06,298 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:08:06,300 - __main__ - INFO - Database session established.
2025-01-27 17:08:06,431 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:08:06,496 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:08:06,573 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:08:06,640 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:08:06,702 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:08:06,769 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:08:06,830 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:08:06,963 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:08:07,028 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:08:07,088 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:08:07,147 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:08:07,147 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:08:07,208 - __main__ - INFO - Database session closed.
2025-01-27 17:08:07,209 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:08:07] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:08:58,782 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:08:58,783 - __main__ - INFO - Database session established.
2025-01-27 17:08:58,910 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:08:58,977 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:08:59,049 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:08:59,121 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:08:59,183 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:08:59,249 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:08:59,310 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:08:59,490 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:08:59,554 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:08:59,613 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:08:59,672 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:08:59,673 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:08:59,732 - __main__ - INFO - Database session closed.
2025-01-27 17:08:59,734 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:08:59] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:31:37,397 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:31:37,398 - __main__ - INFO - Database session established.
2025-01-27 17:31:37,532 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:31:37,597 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:31:37,664 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:31:37,734 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:31:37,797 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:31:37,865 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:31:37,929 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:31:38,081 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:31:38,148 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:31:38,210 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:31:38,271 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:31:38,271 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:31:38,332 - __main__ - INFO - Database session closed.
2025-01-27 17:31:38,333 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:31:38] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:34:40,077 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:34:40,078 - __main__ - INFO - Database session established.
2025-01-27 17:34:40,214 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:34:40,279 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:34:40,352 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:34:40,436 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:34:40,500 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:34:40,573 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:34:40,636 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:34:40,803 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:34:40,869 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:34:40,933 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:34:40,995 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:34:40,996 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:34:41,060 - __main__ - INFO - Database session closed.
2025-01-27 17:34:41,061 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:34:41] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:34:56,263 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:34:56,264 - __main__ - INFO - Database session established.
2025-01-27 17:34:56,390 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:34:56,456 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:34:56,526 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:34:56,595 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:34:56,661 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:34:56,728 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:34:56,792 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:34:56,925 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:34:56,991 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:34:57,056 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:34:57,118 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:34:57,119 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:34:57,183 - __main__ - INFO - Database session closed.
2025-01-27 17:34:57,185 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:34:57] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:36:37,370 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:36:37,371 - __main__ - INFO - Database session established.
2025-01-27 17:36:37,493 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:36:37,557 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:36:37,627 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:36:37,700 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:36:37,763 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:36:37,832 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:36:37,896 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:36:38,074 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:36:38,140 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:36:38,204 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:36:38,266 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:36:38,266 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:36:38,326 - __main__ - INFO - Database session closed.
2025-01-27 17:36:38,327 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:36:38] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:36:52,283 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:36:52,284 - __main__ - INFO - Database session established.
2025-01-27 17:36:52,412 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:36:52,480 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:36:52,550 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:36:52,618 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:36:52,682 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:36:52,749 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:36:52,813 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:36:52,945 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:36:53,012 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:36:53,073 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:36:53,134 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:36:53,134 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:36:53,196 - __main__ - INFO - Database session closed.
2025-01-27 17:36:53,198 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:36:53] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:45:30,527 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:45:30,528 - __main__ - INFO - Database session established.
2025-01-27 17:45:30,546 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:45:30,546 - __main__ - INFO - Database session established.
2025-01-27 17:45:30,661 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:45:30,725 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:45:30,805 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:45:30,871 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:45:30,932 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:45:30,999 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:45:31,060 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:45:31,122 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:45:31,198 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:45:31,257 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:45:31,270 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:45:31,321 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:45:31,338 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:45:31,381 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:45:31,399 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:45:31,442 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:45:31,442 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:45:31,469 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:45:31,503 - __main__ - INFO - Database session closed.
2025-01-27 17:45:31,504 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:45:31] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:45:31,530 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:45:31,686 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:45:31,751 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:45:31,811 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:45:31,871 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:45:31,871 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:45:31,930 - __main__ - INFO - Database session closed.
2025-01-27 17:45:31,932 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:45:31] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 17:57:20,336 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 17:57:20,337 - __main__ - INFO - Database session established.
2025-01-27 17:57:20,468 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 17:57:20,530 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 17:57:20,605 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 17:57:20,679 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 17:57:20,742 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 17:57:20,809 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 17:57:20,873 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 17:57:21,043 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 17:57:21,109 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 17:57:21,172 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 17:57:21,237 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 17:57:21,237 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 17:57:21,297 - __main__ - INFO - Database session closed.
2025-01-27 17:57:21,298 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 17:57:21] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:02:09,285 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:02:09,286 - __main__ - INFO - Database session established.
2025-01-27 18:02:09,304 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:02:09,304 - __main__ - INFO - Database session established.
2025-01-27 18:02:09,424 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:02:09,424 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:02:09,505 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:02:09,506 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:02:09,591 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:02:09,593 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:02:09,664 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:02:09,666 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:02:09,725 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:02:09,727 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:02:09,793 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:02:09,793 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:02:09,856 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:02:09,857 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:02:10,047 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:02:10,076 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:02:10,110 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:02:10,139 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:02:10,168 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:02:10,201 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:02:10,229 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:02:10,229 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:02:10,260 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:02:10,260 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:02:10,291 - __main__ - INFO - Database session closed.
2025-01-27 18:02:10,294 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:02:10] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:02:10,319 - __main__ - INFO - Database session closed.
2025-01-27 18:02:10,320 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:02:10] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:15:41,957 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:15:41,958 - __main__ - INFO - Database session established.
2025-01-27 18:15:42,164 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:15:42,243 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:15:42,318 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:15:42,396 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:15:42,459 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:15:42,525 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:15:42,585 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:15:42,731 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:15:42,794 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:15:42,855 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:15:42,916 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:15:42,916 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:15:42,981 - __main__ - INFO - Database session closed.
2025-01-27 18:15:42,982 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:15:42] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:16:46,902 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:16:46,903 - __main__ - INFO - Database session established.
2025-01-27 18:16:47,026 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:16:47,089 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:16:47,159 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:16:47,226 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:16:47,286 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:16:47,351 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:16:47,410 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:16:47,546 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:16:47,611 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:16:47,670 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:16:47,731 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:16:47,731 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:16:47,791 - __main__ - INFO - Database session closed.
2025-01-27 18:16:47,792 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:16:47] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:16:48,282 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:16:48,282 - __main__ - INFO - Database session established.
2025-01-27 18:16:48,402 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:16:48,464 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:16:48,533 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:16:48,604 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:16:48,666 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:16:48,733 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:16:48,793 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:16:48,925 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:16:48,990 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:16:49,053 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:16:49,115 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:16:49,115 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:16:49,176 - __main__ - INFO - Database session closed.
2025-01-27 18:16:49,177 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:16:49] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:16:53,889 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:16:53,890 - __main__ - INFO - Database session established.
2025-01-27 18:16:54,015 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:16:54,080 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:16:54,151 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:16:54,220 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:16:54,281 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:16:54,346 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:16:54,406 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:16:54,546 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:16:54,609 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:16:54,706 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:16:54,768 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:16:54,768 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:16:54,830 - __main__ - INFO - Database session closed.
2025-01-27 18:16:54,832 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:16:54] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:18:03,707 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:18:03,708 - __main__ - INFO - Database session established.
2025-01-27 18:18:03,834 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:18:03,898 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:18:03,968 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:18:04,037 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:18:04,097 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:18:04,162 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:18:04,222 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:18:04,377 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:18:04,441 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:18:04,499 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:18:04,560 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:18:04,560 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:18:04,618 - __main__ - INFO - Database session closed.
2025-01-27 18:18:04,619 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:18:04] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:18:04,791 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:18:04,791 - __main__ - INFO - Database session established.
2025-01-27 18:18:04,911 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:18:04,974 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:18:05,042 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:18:05,110 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:18:05,172 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:18:05,239 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:18:05,303 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:18:05,435 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:18:05,498 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:18:05,559 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:18:05,618 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:18:05,618 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:18:05,679 - __main__ - INFO - Database session closed.
2025-01-27 18:18:05,680 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:18:05] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:23:02,636 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:23:02] "OPTIONS /api/combined_search HTTP/1.1" 200 -
2025-01-27 18:23:02,640 - __main__ - INFO - Received combined_search request: {'filter_tree': {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, 'page': 1, 'per_page': 60}
2025-01-27 18:23:02,640 - multi_filter_search - INFO - Starting search with filter tree: {'operator': 'AND', 'operands': [{'strategy': 'wordmark', 'query': 'bull dog', 'label': 'Wordmark'}]}, page=1, per_page=60
2025-01-27 18:23:02,643 - multi_filter_search - INFO - Generated query for strategy 'wordmark'.
2025-01-27 18:23:03,088 - multi_filter_search - INFO - Final query SQL:
SELECT casefile.serial_number AS serial_number, casefile.registration_number AS registration_number, casefileheader.mark_identification AS mark_identification, casefileheader.status_code AS status_code, casefileheader.filing_date AS filing_date, casefileheader.registration_date AS registration_date, casefileheader.attorney_name AS attorney_name, coalesce(anon_1.combined_score, 0) AS combined_score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number LEFT OUTER JOIN (SELECT unioned_scores.sn AS sn, max(unioned_scores.score) AS combined_score 
FROM (SELECT anon_2.sn AS sn, anon_2.score AS score 
FROM (SELECT casefile.serial_number AS sn, similarity(casefileheader.mark_identification, 'bull dog') * 100 AS score 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_2) AS unioned_scores GROUP BY unioned_scores.sn) AS anon_1 ON anon_1.sn = casefile.serial_number 
WHERE casefile.serial_number IN (SELECT anon_3.serial_number 
FROM (SELECT anon_4.serial_number AS serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE casefile.serial_number IN (SELECT anon_5.serial_number 
FROM (SELECT casefile.serial_number AS serial_number 
FROM casefile JOIN casefileheader ON casefile.serial_number = casefileheader.serial_number 
WHERE similarity(casefileheader.mark_identification, 'bull dog') > 0.3 OR lower(casefileheader.mark_identification) LIKE lower('%bull dog%')) AS anon_5)) AS anon_4) AS anon_3) AND coalesce(anon_1.combined_score, 0) >= 15 ORDER BY combined_score DESC, casefileheader.filing_date DESC
 LIMIT 60 OFFSET 0
2025-01-27 18:23:03,485 - multi_filter_search - INFO - Query executed in 0.84s
2025-01-27 18:23:03,544 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:23:03] "POST /api/combined_search HTTP/1.1" 200 -
2025-01-27 18:23:50,441 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:23:50,442 - __main__ - INFO - Database session established.
2025-01-27 18:23:50,567 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:23:50,630 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:23:50,698 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:23:50,768 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:23:50,832 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:23:50,901 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:23:50,963 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:23:51,158 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:23:51,223 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:23:51,285 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:23:51,346 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:23:51,347 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:23:51,408 - __main__ - INFO - Database session closed.
2025-01-27 18:23:51,409 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:23:51] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:30:48,102 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:30:48,111 - __main__ - INFO - Database session established.
2025-01-27 18:30:48,246 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:30:48,310 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:30:48,379 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:30:48,447 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:30:48,510 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:30:48,578 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:30:48,643 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:30:48,797 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:30:48,864 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:30:48,926 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:30:48,988 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:30:48,989 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:30:49,052 - __main__ - INFO - Database session closed.
2025-01-27 18:30:49,052 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:30:49] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:32:49,051 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:32:49,053 - __main__ - INFO - Database session established.
2025-01-27 18:32:49,196 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:32:49,274 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:32:49,352 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:32:49,425 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:32:49,490 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:32:49,559 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:32:49,622 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:32:49,784 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:32:49,851 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:32:49,912 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:32:49,972 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:32:49,972 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:32:50,031 - __main__ - INFO - Database session closed.
2025-01-27 18:32:50,032 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:32:50] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:33:43,342 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:33:43,342 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:33:43,342 - __main__ - INFO - Database session established.
2025-01-27 18:33:43,342 - __main__ - INFO - Database session established.
2025-01-27 18:33:43,466 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:33:43,466 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:33:43,530 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:33:43,530 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:33:43,609 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:33:43,610 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:33:43,685 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:33:43,685 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:33:43,747 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:33:43,749 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:33:43,846 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:33:43,847 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:33:43,910 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:33:43,911 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:33:44,306 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:33:44,317 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:33:44,375 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:33:44,384 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:33:44,437 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:33:44,443 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:33:44,498 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:33:44,498 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:33:44,502 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:33:44,502 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:33:44,558 - __main__ - INFO - Database session closed.
2025-01-27 18:33:44,558 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:33:44] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:33:44,563 - __main__ - INFO - Database session closed.
2025-01-27 18:33:44,564 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:33:44] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:33:46,965 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:33:46,965 - __main__ - INFO - Database session established.
2025-01-27 18:33:47,090 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:33:47,154 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:33:47,224 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:33:47,309 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:33:47,370 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:33:47,436 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:33:47,498 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:33:47,627 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:33:47,693 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:33:47,753 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:33:47,814 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:33:47,814 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:33:47,947 - __main__ - INFO - Database session closed.
2025-01-27 18:33:47,948 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:33:47] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:34:34,981 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:34:34,981 - __main__ - INFO - Database session established.
2025-01-27 18:34:35,113 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:34:35,182 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:34:35,252 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:34:35,323 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:34:35,392 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:34:35,458 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:34:35,518 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:34:35,670 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:34:35,733 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:34:35,794 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:34:35,856 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:34:35,857 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:34:35,918 - __main__ - INFO - Database session closed.
2025-01-27 18:34:35,919 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:34:35] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:40:54,520 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:40:54,522 - __main__ - INFO - Database session established.
2025-01-27 18:40:54,659 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:40:54,730 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:40:54,802 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:40:54,872 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:40:54,935 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:40:55,008 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:40:55,074 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:40:55,285 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:40:55,355 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:40:55,415 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:40:55,474 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:40:55,474 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:40:55,534 - __main__ - INFO - Database session closed.
2025-01-27 18:40:55,535 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:40:55] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:44:23,396 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:44:23,400 - __main__ - INFO - Database session established.
2025-01-27 18:44:23,539 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:44:23,603 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:44:23,673 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:44:23,756 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:44:23,818 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:44:23,883 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:44:23,945 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:44:24,157 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:44:24,223 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:44:24,283 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:44:24,343 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:44:24,344 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:44:24,404 - __main__ - INFO - Database session closed.
2025-01-27 18:44:24,405 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:44:24] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:44:37,419 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:44:37,420 - __main__ - INFO - Database session established.
2025-01-27 18:44:37,541 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:44:37,603 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:44:37,683 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:44:37,754 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:44:37,817 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:44:37,887 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:44:37,952 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:44:38,085 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:44:38,151 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:44:38,212 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:44:38,272 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:44:38,273 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:44:38,332 - __main__ - INFO - Database session closed.
2025-01-27 18:44:38,333 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:44:38] "GET /api/case/73076951 HTTP/1.1" 200 -
2025-01-27 18:45:38,774 - __main__ - INFO - Fetching details for case: 73076951
2025-01-27 18:45:38,775 - __main__ - INFO - Database session established.
2025-01-27 18:45:38,903 - __main__ - INFO - Case query executed. Case found: True
2025-01-27 18:45:38,973 - __main__ - INFO - Header query executed. Header found: True
2025-01-27 18:45:39,077 - __main__ - INFO - Owners query executed. Owners found: 5
2025-01-27 18:45:39,157 - __main__ - INFO - Classifications query executed. Classifications found: 2
2025-01-27 18:45:39,225 - __main__ - INFO - Prior Registrations query executed. Prior Registrations found: 3
2025-01-27 18:45:39,326 - __main__ - INFO - Statements query executed. Statements found: 1
2025-01-27 18:45:39,388 - __main__ - INFO - Design Searches query executed. Design Searches found: 0
2025-01-27 18:45:39,602 - __main__ - INFO - Event Statements query executed. Event Statements found: 39
2025-01-27 18:45:39,764 - __main__ - INFO - Correspondents query executed. Correspondents found: 1
2025-01-27 18:45:39,826 - __main__ - INFO - International Registrations query executed. International Registrations found: 0
2025-01-27 18:45:39,887 - __main__ - INFO - Madrid Filings query executed. Madrid Filings found: 0
2025-01-27 18:45:39,887 - __main__ - INFO - Case details retrieval and formatting complete.
2025-01-27 18:45:39,948 - __main__ - INFO - Database session closed.
2025-01-27 18:45:39,949 - werkzeug - INFO - 127.0.0.1 - - [27/Jan/2025 18:45:39] "GET /api/case/73076951 HTTP/1.1" 200 -
